<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>code</title>
  
  <subtitle>Java Engineer</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-01-28T15:53:02.408Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Bernardo Li</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Git提示Host key verification failed</title>
    <link href="http://example.com/2021/01/28/102_Git%E6%8F%90%E7%A4%BAHost-key-verification-failed/"/>
    <id>http://example.com/2021/01/28/102_Git%E6%8F%90%E7%A4%BAHost-key-verification-failed/</id>
    <published>2021-01-28T15:34:35.000Z</published>
    <updated>2021-01-28T15:53:02.408Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>Git提示Host key verification failed.</p><h1 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h1><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>输入 ssh -T <a href="mailto:git@github.com">git@github.com</a>后，出现下面提示:<br><code>fingerprint is SHA256:FQGC9Kn/eye1W8icdBgrQp+KkGYoFgbVr17bmjey0Wc.Are you sure you want to continue connecting (yes/no)?</code><br>不能直接按”回车”键过去,要手动输入”yes”才可以.</p><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>在生成密钥后，你得把ssh私钥添加到ssh-agent中。不然你是无法链接到已经添加ssh密钥的平台的。</p><p>在后台启动ssh-agent。</p><p>$ eval “$(ssh-agent -s)”</p><p>将SSH私钥添加到ssh-agent。如果您使用其他名称创建密钥，或者要添加具有其他名称的现有密钥，请使用私有密钥文件的名称替换命令中的id_ed25519。</p><p>$ ssh-add ~/.ssh/id_ed25519</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述&quot; class=&quot;headerlink&quot; title=&quot;问题描述&quot;&gt;&lt;/a&gt;问题描述&lt;/h1&gt;&lt;p&gt;Git提示Host key verification failed.&lt;/p&gt;
&lt;h1 id=&quot;问题描述-1&quot;&gt;&lt;a href</summary>
      
    
    
    
    <category term="报错" scheme="http://example.com/categories/%E6%8A%A5%E9%94%99/"/>
    
    
    <category term="Git" scheme="http://example.com/tags/Git/"/>
    
    <category term="报错" scheme="http://example.com/tags/%E6%8A%A5%E9%94%99/"/>
    
    <category term="github" scheme="http://example.com/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>vim使用系统粘贴板</title>
    <link href="http://example.com/2021/01/28/101_vim%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%B2%98%E8%B4%B4%E6%9D%BF/"/>
    <id>http://example.com/2021/01/28/101_vim%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E7%B2%98%E8%B4%B4%E6%9D%BF/</id>
    <published>2021-01-28T14:52:49.000Z</published>
    <updated>2021-01-28T14:55:55.724Z</updated>
    
    <content type="html"><![CDATA[<p>187 人赞同了该回答<br>根据平台不同，要分两种情况。先用下面命令确定你属于哪一种，</p><p>vim –version | grep clipboard</p><p>情况一，</p><p>如果结果里你找到加号开头的+clipboard， 恭喜你，你的vim没问题，是你姿势问题。</p><p>用”+y 代替y将选中的内容复制到系统剪贴板，效果和ctrl-c一致。<br>用”+p代替p将剪贴板内容复制到指定位置，也可以用ctrl-v。<br>d，x，c，s也一样，用之前前面加”+。</p><p>如果想偷懒用y直接把内容复制到系统剪贴板，需要到vim配置文件.vimrc里加一行属性。用下面命令开始配置，</p><p>vim ~/.vimrc<br>然后，加入下面这行，</p><p>set clipboard=unnamed<br>现在你的y，d，x，p已经能和 ctrl-c和ctrl-v 一个效果，并且能互相混用。</p><p>情况二，</p><p>如果找到的是负号开头的-clipboard，说明你的vim不支持系统剪切板，我的MacOS系统自带vim就不支持，所以跑来了。需要先重新安装vim，</p><p>Linux系统，</p><p>sudo apt install vim-gtk</p><p>arch系统<br><code>sudo pacman -Sy gvim</code></p><p>MacOS，</p><p>brew install vim<br>安装好之后，重复情况一的操作即可。</p><p>问题解决了，有几个细节再解释一下，满足一下好奇心。</p><p>首先，vim里y，d，x，c复制，剪切下来的内容临时存放在一个叫vim寄存器（Register）的地方。而且寄存器有好几个。下面vim命令可以看到寄存器列表，</p><p>:reg<br>最常用的默认寄存器””叫 未命名寄存器（unnamed register）。最近一次删除，修改，复制内容统统暂存这里（会覆盖，只保留最近一次任意操作）。感兴趣的同学可以看下表，其他寄存器都是干什么的。</p><p>“”      // 默认unnamed寄存器，最近一次”d”,”c”,”s”,”x”,”y”复制，删除，修改内容</p><p>“0      // 最近一次”y”复制内容</p><p>“1      // 最近一次”d”,”c”,”s”,”x”删除，修改内容<br>“2     //  上一次”d”,”c”,”s”,”x”删除，修改内容<br>“3     // 上上次”d”,”c”,”s”,”x”删除，修改内容<br>…<br>“9      // [1-9]数字以此类推</p><p>“a     // 字母寄存器，供用户指定使用，比如”ay就是复制到”a寄存器<br>“b<br>…<br>“z</p><p>“-      // 少于一行的”d”,”c”,”x”删除内容</p><p>“.      // 只读寄存器<br>“:      // 只读寄存器<br>“%     // 只读寄存器<br>“#     // 只读寄存器</p><p>“+      // 映射系统剪贴板 (有的默认设置不支持)<br>“*      // 映射系统剪贴板 (有的默认设置不支持)</p><p>而ctrl-c以及ctrl-v用到的是系统剪贴板（system clipboard）。vim寄存器和系统剪贴板不是一个东西。顾名思义，vim寄存器的数据作用域仅限于vim本地，甚至如果开多个vim窗口，每个窗口都有一套自己完整的寄存器，互相不影响。而系统剪贴板作为系统级别的全局变量，两边当然不能混用。</p><p>所以vim专门提供了”+寄存器作为对系统剪贴板的映射。可以理解成自动把”+寄存器的内容再复制一份到系统剪贴板，前提是你得把clipboard属性设置成打开。有些版本（比如MacOS自带的vim）就不支持这个映射。重装vim就是为了打开这个开关。（如果有简便的直接改设置方法，请纠正我）。打开以后用”+y命令把内容复制到和系统剪贴板关联的寄存器”+上。而y只是复制到默认无名寄存器””上。</p><p>最后set clipboard=unnamed就是把默认无名寄存器”” 和系统剪贴板也关联上。 就是用y也可以备份到系统剪贴板。缺点是破坏了默认寄存器””的本地性。因为p操作也会被等同于”+p处理，粘贴的是”+寄存器的内容， 粘贴的时候””默认寄存器内容就会被覆盖。 表现出来的就是复制一次，到任意vim窗口都可以粘贴。但这个特性恰恰是很多人想要的。</p><p>还有个细节，大部分系统上”+和”*是等价的。但在有的系统上不等价，比如Linux，</p><p>“+：对应ctrl-c和ctrl-v用到的系统剪贴板：desktop clipboard (XA_SECONDARY)<br>“*：对应图形界面中鼠标框选的内容（可以用鼠标中键黏贴）：X11 primary selection (XA_PRIMARY)<br>所以看到”*也不要慌，试试看用”*y和”*p能不能复制粘贴。可以的话就说明是混用的，不行就老老实实用”+。</p><p>以上。遇到此坑的同学了解一下。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;187 人赞同了该回答&lt;br&gt;根据平台不同，要分两种情况。先用下面命令确定你属于哪一种，&lt;/p&gt;
&lt;p&gt;vim –version | grep clipboard&lt;/p&gt;
&lt;p&gt;情况一，&lt;/p&gt;
&lt;p&gt;如果结果里你找到加号开头的+clipboard， 恭喜你，你的vim没问</summary>
      
    
    
    
    <category term="vim" scheme="http://example.com/categories/vim/"/>
    
    
    <category term="vim" scheme="http://example.com/tags/vim/"/>
    
    <category term="粘贴" scheme="http://example.com/tags/%E7%B2%98%E8%B4%B4/"/>
    
    <category term="复制" scheme="http://example.com/tags/%E5%A4%8D%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>github+hexo博客搭建详细教学</title>
    <link href="http://example.com/2021/01/28/99_github-hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E6%95%99%E5%AD%A6/"/>
    <id>http://example.com/2021/01/28/99_github-hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E6%95%99%E5%AD%A6/</id>
    <published>2021-01-28T14:28:42.000Z</published>
    <updated>2021-01-28T14:29:51.116Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_36759224/article/details/82121420">https://blog.csdn.net/qq_36759224/article/details/82121420</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_36759224/article/details/82121420&quot;&gt;https://blog.csdn.net/qq_36759224/article/details/82121420&lt;/a&gt;&lt;/p&gt;
</summary>
      
    
    
    
    <category term="Blog" scheme="http://example.com/categories/Blog/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
    <category term="github" scheme="http://example.com/tags/github/"/>
    
    <category term="搭建" scheme="http://example.com/tags/%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>hexo双线部署，实现搜索引擎收录</title>
    <link href="http://example.com/2021/01/28/100_Hexo%E5%8F%8C%E7%BA%BF%E9%83%A8%E7%BD%B2/"/>
    <id>http://example.com/2021/01/28/100_Hexo%E5%8F%8C%E7%BA%BF%E9%83%A8%E7%BD%B2/</id>
    <published>2021-01-28T14:25:51.000Z</published>
    <updated>2021-01-28T14:27:56.887Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blog.csdn.net/qq_36759224/article/details/100879609">https://blog.csdn.net/qq_36759224/article/details/100879609</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_36759224/article/details/100879609&quot;&gt;https://blog.csdn.net/qq_36759224/article/details/100879609&lt;/a&gt;&lt;/p&gt;</summary>
      
    
    
    
    <category term="Blog" scheme="http://example.com/categories/Blog/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
    <category term="博客" scheme="http://example.com/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="部署" scheme="http://example.com/tags/%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>hexo博客部署到github后404</title>
    <link href="http://example.com/2021/01/28/98_hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0github%E5%90%8E404/"/>
    <id>http://example.com/2021/01/28/98_hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0github%E5%90%8E404/</id>
    <published>2021-01-28T14:01:00.000Z</published>
    <updated>2021-01-28T14:12:43.397Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>hexo博客部署到github上后，输入域名发现404了。查看github仓库，发现用于绑定域名的文件CNAME消失了，可能是因为本地hexo博客没有CNAME文件导致的。</p><h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><p>将需要上传至github的内容放在source文件夹，例如CNAME、favicon.ico、images等。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述&quot; class=&quot;headerlink&quot; title=&quot;问题描述&quot;&gt;&lt;/a&gt;问题描述&lt;/h1&gt;&lt;p&gt;hexo博客部署到github上后，输入域名发现404了。查看github仓库，发现用于绑定域名的文件CNAME消失了，可能</summary>
      
    
    
    
    <category term="报错" scheme="http://example.com/categories/%E6%8A%A5%E9%94%99/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
    <category term="博客" scheme="http://example.com/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="github" scheme="http://example.com/tags/github/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/28/94_chrome%E3%80%81firefox%E5%9C%A8linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE/"/>
    <id>http://example.com/2021/01/28/94_chrome%E3%80%81firefox%E5%9C%A8linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%8D%E7%BD%AE/</id>
    <published>2021-01-27T19:52:37.952Z</published>
    <updated>2021-01-27T19:52:37.952Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Chrome安装位置"><a href="#Chrome安装位置" class="headerlink" title="Chrome安装位置"></a>Chrome安装位置</h1><p><code>/opt/google/chrome</code></p><p>在配置idea启动chrome时，直接选择<code>/opt/google/chrome/chrome</code>即可。</p><h1 id="Firefox安装位置"><a href="#Firefox安装位置" class="headerlink" title="Firefox安装位置"></a>Firefox安装位置</h1><p><code>usr/lib/firefox</code></p><p>在配置idea启动firefox时，直接选择<code>usr/lib/firefox/firefox</code>即可。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Chrome安装位置&quot;&gt;&lt;a href=&quot;#Chrome安装位置&quot; class=&quot;headerlink&quot; title=&quot;Chrome安装位置&quot;&gt;&lt;/a&gt;Chrome安装位置&lt;/h1&gt;&lt;p&gt;&lt;code&gt;/opt/google/chrome&lt;/code&gt;&lt;/p&gt;
&lt;p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/28/95_ked%20%E5%9E%83%E5%9C%BE%E6%A1%B6%E6%8A%A5%E9%94%99:%20malformed%20url%20trash:%E2%81%84%20%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <id>http://example.com/2021/01/28/95_ked%20%E5%9E%83%E5%9C%BE%E6%A1%B6%E6%8A%A5%E9%94%99:%20malformed%20url%20trash:%E2%81%84%20%20%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</id>
    <published>2021-01-27T19:52:37.952Z</published>
    <updated>2021-01-27T19:52:37.952Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>在使用manjaro kde系统时，点击任务栏上的trash垃圾桶图标，报错<code>malformed url trash:/</code>，译为<code>错误的垃圾桶路径</code>。</p><h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p><code>System Settings</code> —&gt; <code>default applications</code> —&gt; <code>File manager</code> 选择为之前系统默认的<code>Dolphiin</code>。因为系统的文件管理器选择错误了，所以才会如此。</p><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>删除<code>~/.local/share/Trash</code>文件夹中的所有文件。可能是因为trash中错误的垃圾文件，导致了trash的错误。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;问题描述&quot;&gt;&lt;a href=&quot;#问题描述&quot; class=&quot;headerlink&quot; title=&quot;问题描述&quot;&gt;&lt;/a&gt;问题描述&lt;/h1&gt;&lt;p&gt;在使用manjaro kde系统时，点击任务栏上的trash垃圾桶图标，报错&lt;code&gt;malformed url tras</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/28/97_XML%E5%85%A5%E9%97%A8/"/>
    <id>http://example.com/2021/01/28/97_XML%E5%85%A5%E9%97%A8/</id>
    <published>2021-01-27T19:52:37.952Z</published>
    <updated>2021-01-27T19:52:37.952Z</updated>
    
    <content type="html"><![CDATA[<h1 id="XML简介"><a href="#XML简介" class="headerlink" title="XML简介"></a>XML简介</h1><h2 id="什么是XML？"><a href="#什么是XML？" class="headerlink" title="什么是XML？"></a>什么是XML？</h2><p>xml 是可扩展的标记性语言。</p><h2 id="XML的作用"><a href="#XML的作用" class="headerlink" title="XML的作用"></a>XML的作用</h2><ol><li>用来保存数据， 而且这些数据具有自我描述性</li><li>它还可以做为项目或者模块的配置文件</li><li>还可以做为网络传输数据的格式（现在 JSON 为主）</li></ol><h1 id="XML初体验"><a href="#XML初体验" class="headerlink" title="XML初体验"></a>XML初体验</h1><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    上面一行为XML声明，是必须存在的</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">books</span>&gt;</span><span class="comment">&lt;!--books表示多个图书信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">sn</span>=<span class="string">"1010"</span>&gt;</span><span class="comment">&lt;!--book表示一个图书信息，sn表示序列号--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>那些比拼命努力更重要的事<span class="tag">&lt;/<span class="name">name</span>&gt;</span><span class="comment">&lt;!--name表示书名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>乔治•维兰特<span class="tag">&lt;/<span class="name">author</span>&gt;</span><span class="comment">&lt;!--author表示作者--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>32<span class="tag">&lt;/<span class="name">price</span>&gt;</span><span class="comment">&lt;!--price表示价格--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">booo</span> <span class="attr">sn</span>=<span class="string">"1011"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Java从入门到入土<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Jason<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>99.80<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">booo</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">books</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="XML语法"><a href="#XML语法" class="headerlink" title="XML语法"></a>XML语法</h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>XML声明用来表示这个文件是xml文件，是必不可少的，不能出错的。不然浏览器就无法解析这个xml文件。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li><code>version</code>：xml版本号</li><li><code>encoding</code>：xml文件采用的编码方式</li><li><code>standalone="yes/no"</code>：设置这个xml文件是否独立</li></ul><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>xml的注释与html完成一致。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--这是xml注释--&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="元素（标签）"><a href="#元素（标签）" class="headerlink" title="元素（标签）"></a>元素（标签）</h2><h3 id="什么是xml元素？"><a href="#什么是xml元素？" class="headerlink" title="什么是xml元素？"></a>什么是xml元素？</h3><p>元素是指从开始标签到结束标签的内容。</p><h3 id="xml命名规则"><a href="#xml命名规则" class="headerlink" title="xml命名规则"></a>xml命名规则</h3><ul><li>名称可以含字母、 数字以及其他的字符</li><li>名称不能以数字或者标点符号开始</li><li>名称不能包含空格</li></ul><h3 id="单标签和双标签"><a href="#单标签和双标签" class="headerlink" title="单标签和双标签"></a>单标签和双标签</h3><p>xml 中的元素（ 标签） 也 分成 单标签和双标签。</p><ul><li>单标签：&lt;标签名 属性=”值” 属性=”值” …… /&gt;</li><li>双标签：&lt; 标签名 属性=”值” 属性=”值” ……&gt;文本数据或子标签&lt;/标签名&gt;</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--单标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">human</span> <span class="attr">name</span>=<span class="string">"Jason"</span> <span class="attr">age</span>=<span class="string">"21"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--双标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">person</span> <span class="attr">name</span>=<span class="string">"bob"</span> <span class="attr">age</span>=<span class="string">"22"</span>&gt;</span></span><br><span class="line">    其实我是王多鱼</span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p>xml 的标签属性和 html 的标签属性是非常类似的， 属性可以提供元素的额外信息。</p><p>一个标签上可以书写多个属性，每个属性的值必须使用 引号 引起来，与html的标签书写规则一致。</p><h2 id="文本区域（CDATA区）"><a href="#文本区域（CDATA区）" class="headerlink" title="文本区域（CDATA区）"></a>文本区域（CDATA区）</h2><p>有的时候，我们需要在xml写一些纯文本的内容。这个时候我们不希望自己写的文本被xml解析，就可以使用<code>CDATA</code>来实现。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;![CDATA[纯文本内容]]&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="其他语法规定"><a href="#其他语法规定" class="headerlink" title="其他语法规定"></a>其他语法规定</h2><ul><li>所有 XML 元素都须有关闭标签（也就是闭合）</li><li>XML 标签对大小写敏感</li><li>XML 必须正确地嵌套</li><li>XML 文档必须有根元素，且仅只能有一个（没有父标签的元素，被称为跟元素）</li><li>XML 的属性值须加引号</li><li>XML 中想要显示<code>&lt;</code>、<code>&gt;</code>等符号，我们必须使用字符实体（如<code>lt;</code>、<code>gt;</code>等）</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;XML简介&quot;&gt;&lt;a href=&quot;#XML简介&quot; class=&quot;headerlink&quot; title=&quot;XML简介&quot;&gt;&lt;/a&gt;XML简介&lt;/h1&gt;&lt;h2 id=&quot;什么是XML？&quot;&gt;&lt;a href=&quot;#什么是XML？&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/28/96_%E5%88%9D%E8%AF%86Shell/"/>
    <id>http://example.com/2021/01/28/96_%E5%88%9D%E8%AF%86Shell/</id>
    <published>2021-01-27T19:52:37.952Z</published>
    <updated>2021-01-27T19:52:37.952Z</updated>
    
    <content type="html"><![CDATA[<p>程序</p><h2 id="什么是程序"><a href="#什么是程序" class="headerlink" title="什么是程序"></a>什么是程序</h2><p>程序是为实现特定目标或解决特定问题而用计算机语言编写的命令序列的集合。简单来说，电脑里面的应用都是程序来控制的，程序天天见。程序是由序列组成的，告诉计算机如何完成一个具体的任务。由于现在的计算机还不能理解人类的自然语言，所以还不能用自然语言编写计算机程序，不过现在语音识别技术己经很历害了，在不久的将来，估计，电脑就自己会编程序了。</p><h2 id="程序能做什么？"><a href="#程序能做什么？" class="headerlink" title="程序能做什么？"></a>程序能做什么？</h2><p>电脑控制手机控制机械控制物联，一切自动化制造的系统，都是由程序来控制的。</p><h2 id="什么是编程？"><a href="#什么是编程？" class="headerlink" title="什么是编程？"></a>什么是编程？</h2><p>编程是一个动词，编程==写代码。写代码为了什么？为了让计算机干你想要干的事情。</p><h1 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h1><h2 id="那计算机能理解的语言是什么？"><a href="#那计算机能理解的语言是什么？" class="headerlink" title="那计算机能理解的语言是什么？"></a>那计算机能理解的语言是什么？</h2><p>计算机只能理解二进制，如：01010101等。如果使用二进制来写代码，这样开发速度太慢。所以最好的办法就是人输入简单的指令，计算机能把指令转成二进制执行。</p><h2 id="有哪些编程语言呢？"><a href="#有哪些编程语言呢？" class="headerlink" title="有哪些编程语言呢？"></a>有哪些编程语言呢？</h2><p>编程语言总体分为：机器语言、汇编语言、高级语言</p><h3 id="机器语言"><a href="#机器语言" class="headerlink" title="机器语言"></a>机器语言</h3><p>由于计算机内部只能接受二进制，因此用二进制代码0和1描述的指令成为机器指令，全部机器指令的集合构成计算机的机器语言。用机器语言编程的程序成为目标程序，只有目标程序才能被计算机直接识别和执行。但是机器语言编写的程序无明显特征，难以记忆，不便于阅读和书写，且依赖与具体机种，局限性很大，机器语言属于低级语言。</p><p>用机器语言编写程序，编程人员要首先熟记所用计算机的全部指令代码和代码的涵义。手编程序时，程序员得自己处理每条指令和每一数据的存储分配和输入输出，还得记住编程过程中每步所使用的工作单元处在何种状态。这是一件十分繁琐的工作。编写程序花费的时间往往是实际运行时间的几十倍或几百倍。而且，编出的程序全是些0和1的指令代码，直观性差，还容易出错。除了计算机生产厂家的专业人员外，绝大多数的程序员已经不再去学习机器语言了。</p><p>机器语言是微处理器理解和使用的，用于控制它的操作二进制代码。</p><h3 id="汇编语言"><a href="#汇编语言" class="headerlink" title="汇编语言"></a>汇编语言</h3><p>汇编语言的实质和机器语言是相同的，都是直接对硬件操作，只不过指令采用了英文缩写的标识符，更容易识别和记忆。它同样需要编程者将每一步具体的操作用命令的形式写出来。</p><p>汇编程序的每一句指令只能对应实际操作过程中的一个很细微的动作。例如移动、自增，因此汇编源程序一般比较冗长、复杂、容易出错，而且使用汇编语言编程需要有更多的计算机专业知识，但汇编语言的优点也是显而易见的，用汇编语言所能完成的操作不是一般高级语言所能够实现的，而且源程序经汇编生成的可执行文件不仅比较小，而且执行速度很快。</p><h3 id="高级语言"><a href="#高级语言" class="headerlink" title="高级语言"></a>高级语言</h3><p>高级语言是大多数编程者的选择。和汇编语言相比，它不但将许多相关的机器指令合成为单条指令，并且去掉了与具体操作有关但与完成工作无关的细节，例如使用堆栈、寄存器等，这样就大大简化了程序中的指令。同时，由于省略了很多细节，编程者也就不需要有太多的专业知识。</p><p>高级语言主要是相对于汇编语言而言，它并不是特指某一种具体的语言，而是包括了很多编程语言，像最简单的编程语言PASCAL语言也属于高级语言。</p><p>高级语言所编制的程序不能直接被计算机识别，必须经过转换才能被执行，按转换方式可将它们分为两类：</p><h4 id="编译类"><a href="#编译类" class="headerlink" title="编译类"></a>编译类</h4><p>编译是指在应用源程序执行之前，就将程序源代码“翻译”成目标代码（机器语言），因此其目标程序可以脱离其语言环境独立执行(编译后生成的可执行文件，是cpu可以理解的2进制的机器码组成的)，使用比较方便、效率较高。但应用程序一旦需要修改，必须先修改源代码，再重新编译生成新的目标文件（*.obj，也就是OBJ文件）才能执行，只有目标文件而没有源代码，修改很不方便。</p><p>编译后程序运行时不需要重新翻译，直接使用编译的结果就行了。程序执行效率高，依赖编译器，跨平<br>台性差些。如C、C++、Delphi等。</p><h4 id="解释类"><a href="#解释类" class="headerlink" title="解释类"></a>解释类</h4><p>执行方式类似于我们日常生活中的“同声翻译”，应用程序源代码一边由相应语言的解释器“翻译”成目标代码（机器语言），一边执行，因此效率比较低，而且不能生成可独立执行的可执行文件，应用程序不能脱离其解释器(想运行，必须先装上解释器，就像跟老外说话，必须有翻译在场)，但这种方式比较灵活，可以动态地调整、修改应用程序。如Shell，Python、Java、PHP、Ruby等语言。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><h4 id="机器语言-1"><a href="#机器语言-1" class="headerlink" title="机器语言"></a>机器语言</h4><ul><li>优点：最底层，速度最快</li><li>缺点：最复杂，开发效率最低</li></ul><h4 id="汇编语言-1"><a href="#汇编语言-1" class="headerlink" title="汇编语言"></a>汇编语言</h4><ul><li>优点：较为底层，速度较快</li><li>缺点：较为复杂，开发效率较低</li></ul><h4 id="高级语言-1"><a href="#高级语言-1" class="headerlink" title="高级语言"></a>高级语言</h4><ul><li>编译型：执行速度快，但跨平台性差</li><li>解释型：跨平台性强，但执行速度慢</li></ul><h1 id="Shell概述"><a href="#Shell概述" class="headerlink" title="Shell概述"></a>Shell概述</h1><h2 id="什么是Shell？"><a href="#什么是Shell？" class="headerlink" title="什么是Shell？"></a>什么是Shell？</h2><p>首先Shell的英文含义是“壳”； 它是相对于内核来说的，因为它是建立在内核的基础上，面向于用户的一种表现形式，比如我们看到一个球，见到的是它的壳，而非核。 Linux中的Shell，是指一个面向用户的命令接口，表现形式就是一个可以由用户录入的界面，这个界面也可以反馈运行信息；</p><h2 id="Shell在Linux中的存在形式"><a href="#Shell在Linux中的存在形式" class="headerlink" title="Shell在Linux中的存在形式"></a>Shell在Linux中的存在形式</h2><p>由于Linux不同于Windows，Linux是内核与界面分离的，它可以脱离图形界面而单独运行，同样也可以在内核的基础上运行图形化的桌面。 这样，在Linux系统中，就出现了两种Shell表现形式，一种是在无图形界面下的终端运行环境下的Shell，另一种是桌面上运行的类似Windows 的MS-DOS运行窗口，前者我们一般习惯性地简称为终端，后者一般直接称为Shell。</p><h2 id="Shell如何执行用户的指令"><a href="#Shell如何执行用户的指令" class="headerlink" title="Shell如何执行用户的指令"></a>Shell如何执行用户的指令</h2><p><strong>Shell有两种执行指令的方式：</strong></p><ol><li>第一种方法是用户事先编写一个sh脚本文件，内含Shell脚本，而后使用Shell程序执行该脚本，这种方式，我们习惯称为Shell编程。</li><li>第二种形式，则是用户直接在Shell界面上执行Shell命令，由于Shell界面的关系，大家都习惯一行行的书写，很少写出成套的程序来一起执行，所以也称命令行。</li></ol><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>Shell 只是为用户与机器之间搭建成的一个桥梁，让我们能够通过Shell来对计算机进行操作和交互，从而达到让计算机为我们服务的目的。</p><h1 id="Shell的分类"><a href="#Shell的分类" class="headerlink" title="Shell的分类"></a>Shell的分类</h1><p>Linux中默认的Shell是/bin/bash，流行的Shell有ash、bash、ksh、csh、zsh等，不同的Shell都有自己的特点以及用途。</p><h2 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h2><p>大多数Linux系统默认使用的Shell，bash Shell是Bourne Shell 的一个免费版本，它是最早的Unix Shell。</p><p>bash还有一个特点，可以通过help命令来查看帮助。包含的功能几乎可以涵盖Shell所具有的功能，所以一般的Shell脚本都会指定它为执行路径。</p><h2 id="csh"><a href="#csh" class="headerlink" title="csh"></a>csh</h2><p>C Shell 使用的是“类C”语法，csh是具有C语言风格的一种Shell，其内部命令有52个，较为庞大。目前使用的并不多，已经被/bin/tcsh所取代。</p><h2 id="tcsh"><a href="#tcsh" class="headerlink" title="tcsh"></a>tcsh</h2><p>tcsh是csh的增强版，与C Shell完全兼容。</p><h2 id="ksh"><a href="#ksh" class="headerlink" title="ksh"></a>ksh</h2><p>Korn Shell 的语法与Bourne Shell相同，同时具备了C Shell的易用特点。许多安装脚本都使用ksh,ksh 有42条内部命令，与bash相比有一定的限制性。</p><h2 id="sh"><a href="#sh" class="headerlink" title="sh"></a>sh</h2><p>是一个快捷方式，已经被/bin/bash所取代。</p><h2 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h2><p>目前Linux里最庞大的一种 zsh。它有84个内部命令，使用起来也比较复杂。一般情况下，不会使用该Shell。</p><h1 id="Shell能做什么？"><a href="#Shell能做什么？" class="headerlink" title="Shell能做什么？"></a>Shell能做什么？</h1><ul><li>自动化批量系统初始化程序 （update，软件安装，时区设置，安全策略…）</li><li>自动化批量软件部署程序（LAMP，LNMP，Tomcat，LVS，Nginx）</li><li>应用管理程序（KVM，集群管理扩容，MySQL，DELLR720批量RAID）</li><li>日至分析处理程序（PV, UV, 200, !200, top 100, grep/awk）</li><li>自动化备份恢复程序（MySQL完全备份/增量 + Crond）</li><li>自动化管理程序（批量远程修改密码，软件升级，配置更新）</li><li>自动化信息采集及监控程序（收集系统/应用状态信息，CPU,Mem,Disk,Net,TCP Status,Apache,MySQL）</li><li>配合Zabbix信息采集（收集系统/应用状态信息，CPU,Mem,Disk,Net,TCP Status,Apache,MySQL）</li><li>自动花扩容（增加云主机——&gt;业务上线）</li><li>Zabbix监控CPU 80%+|-50% Python API AWS/EC2（增加/删除云主机） + Shell Script（业务上线）</li></ul><h1 id="login-shell与nologin-shell的区别"><a href="#login-shell与nologin-shell的区别" class="headerlink" title="login shell与nologin shell的区别"></a>login shell与nologin shell的区别</h1><h2 id="表面区别"><a href="#表面区别" class="headerlink" title="表面区别"></a>表面区别</h2><p>Login shell就是你进入shell是需要输使用者名称密码的，比如你启动图形介面最后一步需要你输入使用者名称密码，只有你输入正确，才能进入桌面，这进入的就是一个login shell 。另外比如你ctrl + alt + F2等进入非图形介面的tty ，都是需要你输入使用者名称密码之后才能继续操作，这种情况下你进入的就是login shell 。</p><p>而nologin shell就是你不需要输入密码就能进入的shell 。比如你进入图形介面之后，右键开启终端，就直接打开了一个承载shell的终端，在这个终端中你不用输入使用者名称密码就直接可以使用命令。</p><p>这只是表面上的区别，其实真正影响这两种shell使之不同的是开启两者所读取的环境变数档案不同。</p><h2 id="深层区别"><a href="#深层区别" class="headerlink" title="深层区别"></a>深层区别</h2><p>区分login shell和no login shell的主要原因是它们启动和退出时自动执行的脚本不同。</p><h3 id="login-shell"><a href="#login-shell" class="headerlink" title="login shell"></a>login shell</h3><p>对于login shell其启动时自动执行的脚本文件顺序如下</p><ol><li>首先执行<code>/etc/profile</code></li><li>再执行<code>~/.bash_profile</code>, <code>~/.bash_login</code>, <code>~/.profile</code>中第一个存在的脚本（按顺序搜索，只会执行其中一个）</li></ol><p>如果shell启动时添加了<code>--noprofile</code>选项则不会执行上述文件。在login shell退出时，会执行<code>~/.bash_logout</code></p><h3 id="no-login-shell"><a href="#no-login-shell" class="headerlink" title="no login shell"></a>no login shell</h3><p>对于no login shell，启动时会执行<code>/etc/bashrc</code>和<code>~/.bashrc</code>，如果shell启动时添加了<code>--norc</code>选项则不会执行上述文件，如果添加了<code>--rcfile &lt;filename&gt;</code>选项则会执行指定的filename文件，也不会执行上述文件。no login shell退出时不会自动执行脚本文件。</p><p>而我们知道nologin shell一定是在已经登入了login shell的前提下开启的，比如字元视窗startx启动图形介面，或者图形介面里开启新的终端。所以nologin shell算是login shell的一个子程式，根据shell中变数的继承法则，nologin shell会在继承原本login shell所有的环境变数的基础上读取~/.bashrc中的引数。</p><p>这就是这些个档案所有的关系了。所以有的时候，你设定的环境变数并没有生效，可以根据这个读取顺序检视一下是不是你的设定被覆盖掉了……</p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>no login shell和login shell在启动和退出时会执行不同的脚本文件从而影响shell中的环境变量，本文根据bash的文档描述了两种shell启动时自动执行的脚本文件的区别。</p><p>login shell和no login shell启动时执行的脚本文件是完全不同的，因此，运行环境初始化脚本需要合理配置才能让login shell和no login shell都能执行，同时也可以为login shell和no login shell配置不同的运行环境初始化脚本。</p><blockquote><ul><li>根据该定义，我们可以使用<code>bash --login</code>启动一个login shell或者通过<code>echo $0</code>的输出结果是否以<code>/</code>开头来判断一个shell是否为login shell。</li></ul></blockquote><h1 id="bash初识化"><a href="#bash初识化" class="headerlink" title="bash初识化"></a>bash初识化</h1><h2 id="bash环境变量文件"><a href="#bash环境变量文件" class="headerlink" title="bash环境变量文件"></a>bash环境变量文件</h2><ul><li><code>/etc/profile</code>：全局（公有）配置，不管是哪个用户，登录时都会读取该文件。</li><li><code>/etc/bashrc</code>：它也是全局（公有）的，bash 执行时，不管是何种方式，都会读取此文件。（Ubuntu 没有此文件，与之对应的是 /ect/bash.bashrc）</li><li><code>~/.bash_profile</code>、<code>~/.bash_login</code>、<code>~/.profile</code>：若 bash 是以 login 方式执行时，读取<code> ~/.bash_profile</code>，若它不存在，则读取 <code>~/.bash_login</code>，若前两者都不存在，读取 <code>~/.profile</code>。</li><li><code>~/.bashrc</code>：当 bash 是以 non-login 形式执行时，读取此文件。若是以 login 形式执行，则不会读取此文件。</li><li><code>~/.bash_logout</code>：当为login形式注销时，此文件才会被读取。</li></ul><h2 id="bash环境变量文件加载顺序"><a href="#bash环境变量文件加载顺序" class="headerlink" title="bash环境变量文件加载顺序"></a>bash环境变量文件加载顺序</h2><ul><li>图形模式登录时，顺序读取：<code>/etc/profile </code>和 <code>~/.profile</code></li><li>图形模式登录后，打开终端时，顺序读取：<code>/etc/bashrc</code> 和<code> ~/.bashrc</code></li><li>文本模式登录时，顺序读取：<code>/etc/bashrc</code>，<code>/etc/profile</code> 和 <code>~/.bash_profile</code></li><li>从其它用户 su 到该用户，则分两种情况：<ol><li>如果带 -l 参数（或-参数，–login 参数），如：<code>su -l username</code>，则 bash 是 login 的，它将顺序读取以<br>下配置文件：<code>/etc/bashrc</code>，<code>/etc/profile</code> 和<code>~/.bash_profile</code>。</li><li>如果没有带 -l 参数，则 bash 是 <code>non-login</code> 的，它将顺序读取：<code>/etc/bashrc</code> 和 <code>~/.bashrc</code></li></ol></li><li>注销时，或退出 su 登录的用户，如果是 longin 方式，那么 bash 会读取：<code>~/.bash_logout</code>。<ol><li>执行自定义的 Shell 文件时，若使用 <code>bash -l a.sh</code> 的方式，则 bash 会读取：<code>/etc/profile</code> 和<br><code>~/.bash_profile</code>。若使用其它方式，如：<code>bash a.sh</code>，<code>./a.sh</code>，<code>sh a.sh</code>（这个不属于bash Shell），则不<br>会读取上面的任何文件。</li><li>上面的例子凡是读取到 <code>~/.bash_profile</code> 的，若该文件不存在，则读取<code> ~/.bash_login</code>，若前两者不存<br>在，读取 <code>~/.profil</code>。</li></ol></li></ul><p>![Login shell与Nologin shell](img/Login shell与Nologin shell.png)</p><h1 id="bash特征"><a href="#bash特征" class="headerlink" title="bash特征"></a>bash特征</h1><h2 id="命令历史记忆功能"><a href="#命令历史记忆功能" class="headerlink" title="命令历史记忆功能"></a>命令历史记忆功能</h2><p>Bash 有自动记录命令的功能，自动记录到<code>.bash_history</code>隐藏文件中。在bash中,使用history 命令来查看和操作之前的命令,以此来提高工作效率。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看之前使用的所有命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示最近的n个命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span> n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除相应的第n个命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span> -d n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定执行命令历史中的第n条语句</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> !n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定执行命令历史中倒数第n条语句</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> !-n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行命令历史中最后一条语句</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> !!</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行命令历史中最近一条以[String]开头的语句(不需要写[])</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ![String]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 引用上一个命令中的最后一个参数</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> !$</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将命令历史写入命令历史文件中</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span> -w</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 回显 <span class="built_in">echo</span> 之后的语句，而使用 <span class="built_in">echo</span> <span class="variable">$FILENAME</span> 命令可以查看该 file 所在的路径</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$HISTFILE</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看命令历史的内容</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat .bash_history</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除所有的命令历史记录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">history</span> -c</span></span><br></pre></td></tr></tbody></table></figure><h2 id="别名功能"><a href="#别名功能" class="headerlink" title="别名功能"></a>别名功能</h2><p><code>alias</code>命令可以为其他命令起别名，这样可以把本来很成长的指令简化缩写，来提高工作效率。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看系统当前所有的别名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">alias</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 定义新的别名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">alias</span> newName=<span class="string">'oldName'</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除已定义的别名</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">unalias</span> newName</span></span><br></pre></td></tr></tbody></table></figure><p>如果想要文件永久生效，只需将上述别名命令写到对应用户或者系统<code>.bashrc</code>文件中，然后<code>source</code>一下<code>.bashrc</code>文件。如果想用真是命令可以在命令前面添加反斜杠，使别名失效。</p><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><table><thead><tr><th>快捷键</th><th>作用</th></tr></thead><tbody><tr><td>ctrl + A</td><td>把光标移动到命令行开头。</td></tr><tr><td>ctrl + E</td><td>把光标移动到命令行结尾。</td></tr><tr><td>ctrl + C</td><td>强制终止当前的命令。</td></tr><tr><td>ctrl + L</td><td>清屏，相当于clear命令。</td></tr><tr><td>ctrl + U</td><td>删除或剪切光标之前的命令。</td></tr><tr><td>ctrl + K</td><td>删除或剪切光标之后的内容。</td></tr><tr><td>ctrl + Y</td><td>粘贴ctrl+U或ctrl+K剪切的内容.</td></tr><tr><td>ctrl + R</td><td>搜索历史记录。</td></tr><tr><td>ctrl + D</td><td>退出当前终端。</td></tr><tr><td>ctrl + Z</td><td>暂停，并放入后台。</td></tr><tr><td>ctrl + S</td><td>暂停屏幕输出。</td></tr><tr><td>ctrl + Q</td><td>恢复屏幕输出。</td></tr></tbody></table><h2 id="前后台作业控制"><a href="#前后台作业控制" class="headerlink" title="前后台作业控制"></a>前后台作业控制</h2><p>Linux bash Shell单一终端界面下，经常需要管理或同时完成多个作业，如一边执行编译，一边实现数据备份，以及执行SQL查询等其他的任务。所有的上述的这些工作可以在一个 bash 内实现，在同一个终端窗口完成。</p><h3 id="前后台作业的定义"><a href="#前后台作业的定义" class="headerlink" title="前后台作业的定义"></a>前后台作业的定义</h3><p>前后台作业实际上对应的也就是前后台进程，因此也就有对应的 pid。在这里统称为作业。</p><p>无论是前台作业还是后台作业，两者都来自当前的Shell，都是当前Shell的子程序。</p><ul><li><p>前台作业：可以由用户参与交互及控制的作业。</p></li><li><p>后台作业：在内存可以自运行的作业，用户无法参与交互以及使用[ctrl]+c来终止，只能通过bg或fg来调用的作业。</p></li></ul><h3 id="几个常用的作业命令"><a href="#几个常用的作业命令" class="headerlink" title="几个常用的作业命令"></a>几个常用的作业命令</h3><ul><li><code>command &amp;</code>：直接在命令的后面加上&amp;，即可让执行的命令作业进入后台运行。</li><li><code>ctrl + z</code>：使用这个组合快捷键也可以让当前作业切换到后台运行。</li><li><code>jobs</code>：使用此命令可以查看后台作业状态。</li><li><code>fg %n</code>：n为编号，使用此命令可以让后台运行的作业n切换到前台运行。</li><li><code>bg %n</code>：n为编号，使用此命令可以让前台运行的作业n切换到后台运行。</li><li><code>kill -9 %n</code>：强制终止执行的作业n。</li><li><code>kill -15 %n</code>：正常终止执行的作业n。</li></ul><h3 id="作业脱机管理"><a href="#作业脱机管理" class="headerlink" title="作业脱机管理"></a>作业脱机管理</h3><p>将作业(进程)切换到后台可以避免由于误操作如[ctrl]+c等导致的job被异常中断的情形，而脱机管理主要是针对终端异常断开的情形。</p><p>通常使用nohup命令来使得脱机或注销之后，Job依旧可以继续运行。也就是说nohup忽略所有挂断(SIGHUP)<br>信号。</p><p>如果该方式命令之后未指定&amp;符号，则job位于前台，指定&amp;符号，则job位于后台。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;程序&lt;/p&gt;
&lt;h2 id=&quot;什么是程序&quot;&gt;&lt;a href=&quot;#什么是程序&quot; class=&quot;headerlink&quot; title=&quot;什么是程序&quot;&gt;&lt;/a&gt;什么是程序&lt;/h2&gt;&lt;p&gt;程序是为实现特定目标或解决特定问题而用计算机语言编写的命令序列的集合。简单来说，电脑里面的应用都</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2021/01/28/93_JQuery%E5%85%A5%E9%97%A8/"/>
    <id>http://example.com/2021/01/28/93_JQuery%E5%85%A5%E9%97%A8/</id>
    <published>2021-01-27T19:52:37.952Z</published>
    <updated>2021-01-27T19:52:37.952Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JQuery概述"><a href="#JQuery概述" class="headerlink" title="JQuery概述"></a>JQuery概述</h1><h2 id="什么是JQuery？"><a href="#什么是JQuery？" class="headerlink" title="什么是JQuery？"></a>什么是JQuery？</h2><p>jQuery， 顾名思义， 也就是 JavaScript 和查询（Query） ， 它就是辅助 JavaScript 开发的 js 类库。</p><h2 id="JQuery核心思想"><a href="#JQuery核心思想" class="headerlink" title="JQuery核心思想"></a>JQuery核心思想</h2><p>它的核心思想是 write less,do more(写得更少,做得更多)， 所以它实现了很多浏览器的兼容问题。</p><h2 id="JQuery流行程度"><a href="#JQuery流行程度" class="headerlink" title="JQuery流行程度"></a>JQuery流行程度</h2><p>jQuery 现在已经成为最流行的 JavaScript 库， 在世界前 10000 个访问最多的网站中， 有超过 55%在使用jQuery。</p><h2 id="jQuery-好处"><a href="#jQuery-好处" class="headerlink" title="jQuery 好处"></a>jQuery 好处</h2><p>jQuery 是免费、 开源的， jQuery 的语法设计可以使开发更加便捷， 例如操作文档对象、 选择 DOM 元素、制作动画效果、 事件处理、 使用 Ajax 以及其他功能。</p><h1 id="JQuery初体验"><a href="#JQuery初体验" class="headerlink" title="JQuery初体验"></a>JQuery初体验</h1><p>需求： 使用 jQuery 给一个按钮绑定单击事件?</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JQuery初体验<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--引入jquery文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">           $(<span class="string">"#one"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">               alert(<span class="string">"使用JQuery给一个按钮绑定单击事件"</span>);</span></span><br><span class="line">           });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span>你真还好吗？<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="JQuery核心函数"><a href="#JQuery核心函数" class="headerlink" title="JQuery核心函数"></a>JQuery核心函数</h1><p>$ 是 jQuery 的核心函数， 能完成 jQuery 的很多功能。 $()就是调用$这个函数</p><ol><li><p>传入参数为 [ 函数 ] 时：</p><p>表示页面加载完成之后。 相当于 window.onload = function(){}</p></li><li><p>传入参数为 [ HTML 字符串 ] 时：</p><p>会对我们创建这个 html 标签对象</p></li><li><p>传入参数为 [ 选择器字符串 ] 时：</p><p>$(“#id 属性值”); id 选择器， 根据 id 查询标签对象</p><p>$(“标签名”); 标签名选择器， 根据指定的标签名查询标签对象</p><p>$(“.class 属性值”); 类型选择器， 可以根据 class 属性查询标签对象</p></li><li><p>传入参数为 [ DOM 对象 ] 时：</p><p>会把这个 dom 对象转换为 jQuery 对象</p></li></ol><h1 id="jQuery-对象和-dom-对象区分"><a href="#jQuery-对象和-dom-对象区分" class="headerlink" title="jQuery 对象和 dom 对象区分"></a>jQuery 对象和 dom 对象区分</h1><h2 id="什么是-jQuery-对象？-什么是-dom-对象？"><a href="#什么是-jQuery-对象？-什么是-dom-对象？" class="headerlink" title="什么是 jQuery 对象？ 什么是 dom 对象？"></a>什么是 jQuery 对象？ 什么是 dom 对象？</h2><h3 id="DOM对象"><a href="#DOM对象" class="headerlink" title="DOM对象"></a>DOM对象</h3><ol><li>通过 getElementById()查询出来的标签对象是 Dom 对象</li><li>通过 getElementsByName()查询出来的标签对象是 Dom 对象</li><li>通过 getElementsByTagName()查询出来的标签对象是 Dom 对象</li><li>通过 createElement() 方法创建的对象， 是 Dom 对象</li></ol><blockquote><p>DOM 对象 Alert 出来的效果是： [object HTML 标签名 Element]</p></blockquote><h3 id="JQuery对象"><a href="#JQuery对象" class="headerlink" title="JQuery对象"></a>JQuery对象</h3><ol><li>通过 JQuery 提供的 API 创建的对象， 是 JQuery 对象</li><li>通过 JQuery 包装的 Dom 对象， 也是 JQuery 对象</li><li>通过 JQuery 提供的 API 查询到的对象， 是 JQuery 对象</li></ol><blockquote><p>jQuery 对象 Alert 出来的效果是： [object Object]</p></blockquote><h2 id="jQuery-对象的本质是什么？"><a href="#jQuery-对象的本质是什么？" class="headerlink" title="jQuery 对象的本质是什么？"></a>jQuery 对象的本质是什么？</h2><p>jQuery 对象是 dom 对象的数组 + jQuery 提供的一系列功能函数。</p><h2 id="jQuery-对象和-Dom-对象使用区别"><a href="#jQuery-对象和-Dom-对象使用区别" class="headerlink" title="jQuery 对象和 Dom 对象使用区别"></a>jQuery 对象和 Dom 对象使用区别</h2><p>jQuery 对象不能使用 DOM 对象的属性和方法<br>DOM 对象也不能使用 jQuery 对象的属性和方法</p><h2 id="Dom-对象和-jQuery-对象互转"><a href="#Dom-对象和-jQuery-对象互转" class="headerlink" title="Dom 对象和 jQuery 对象互转"></a>Dom 对象和 jQuery 对象互转</h2><h3 id="dom-对象转化为-jQuery-对象"><a href="#dom-对象转化为-jQuery-对象" class="headerlink" title="dom 对象转化为 jQuery 对象"></a>dom 对象转化为 jQuery 对象</h3><p>将DOM对象传入<code>$()</code>中即可</p><h3 id="jQuery-对象转为-dom-对象"><a href="#jQuery-对象转为-dom-对象" class="headerlink" title="jQuery 对象转为 dom 对象"></a>jQuery 对象转为 dom 对象</h3><p>jQuery 对象[下标]取出相应的 DOM 对象</p><h1 id="jQuery-选择器"><a href="#jQuery-选择器" class="headerlink" title="jQuery 选择器"></a>jQuery 选择器</h1><h2 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h2><ul><li><code>#id属性值</code>：id选择器，根据 id 查找标签对象</li><li><code>.class属性值</code>：类选择器，根据 class 查找标签对象</li><li><code>element标签名</code>：标签选择器，根据标签名查找标签对象</li><li><code>*</code>：星选择器，表示任意的， 所有的元素</li><li><code>selector1, selector2</code>：组合选择器，合并选择器 1， 选择器 2 的结果并返回</li></ul><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择id="lastname" 的元素</span></span><br><span class="line">$(<span class="string">"#lastname"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择class="intro" 的所有元素</span></span><br><span class="line">$(<span class="string">".intro"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//选择所有 &lt;p&gt; 元素</span></span><br><span class="line">$(<span class="string">"p"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择所有 &lt;h1&gt;、&lt;div&gt; 和 &lt;p&gt; 元素</span></span><br><span class="line">$(<span class="string">"h1, div, p"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="层级选择器"><a href="#层级选择器" class="headerlink" title="层级选择器"></a>层级选择器</h2><ul><li><code>ancestor descendant</code>：后代选择器，在给定的祖先元素下匹配所有的后代元素</li><li><code>parent &gt; child</code>：子元素选择器，在给定的父元素下匹配所有的子元素</li><li><code>prev + next</code>：邻居元素选择器，匹配所有紧接在 prev 元素后的 next 元素</li><li><code>prev ~ siblings</code>：兄弟元素选择器，匹配 prev 元素之后的所有 siblings 元素</li></ul><h3 id="演示-1"><a href="#演示-1" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 选择&lt;form&gt;中的所有后代&lt;input&gt;元素</span></span><br><span class="line">$(<span class="string">"form input"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//选择&lt;form&gt;中的仅子代&lt;input&gt;元素</span></span><br><span class="line">$(<span class="string">"form &gt; input"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//选择&lt;div&gt;之后的一个同级&lt;span&gt;元素</span></span><br><span class="line">$(<span class="string">"div + span"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//选择&lt;a&gt;之后所有的同级&lt;button&gt;元素</span></span><br><span class="line">$(<span class="string">"a ~ button"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="基本过滤选择器"><a href="#基本过滤选择器" class="headerlink" title="基本过滤选择器"></a>基本过滤选择器</h2><ul><li><code>:first</code>：获取第一个元素</li><li><code>:last</code>：获取最后一个元素</li><li><code>:not(selector)</code>：去除所有与给定选择器匹配的元素</li><li><code>:even</code>：匹配所有索引值为偶数的元素， 从 0 开始计数</li><li><code>:odd</code>：匹配所有索引值为奇数的元素， 从 0 开始计数</li><li><code>:eq(index)</code>：匹配一个给定索引值的元素</li><li><code>:gt(index)</code>：匹配所有大于给定索引值的元素</li><li><code>:lt(index)</code>：匹配所有小于给定索引值的元素</li><li><code>:header</code>：匹配如 h1, h2, h3 之类的标题元素</li><li><code>:animated</code>：匹配所有正在执行动画效果的元素</li></ul><h3 id="演示-2"><a href="#演示-2" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//选择第一个&lt;input&gt;元素</span></span><br><span class="line">$(<span class="string">"input:first"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//选择最后一个&lt;a&gt;元素</span></span><br><span class="line">$(<span class="string">"a:last"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有不为空的输入元素</span></span><br><span class="line">$(<span class="string">"input:not(:empty)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有偶数 &lt;tr&gt; 元素，索引值从 0 开始，第一个元素是偶数 (0)，第二个元素是奇数 (1)，以此类推。</span></span><br><span class="line">$(<span class="string">"tr:even"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有奇数 &lt;tr&gt; 元素，索引值从 0 开始，第一个元素是偶数 (0)，第二个元素是奇数 (1)，以此类推。</span></span><br><span class="line">$(<span class="string">"tr:odd"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//列表中的第四个元素（index 值从 0 开始）</span></span><br><span class="line">$(<span class="string">"ul li:eq(3)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//列举 index 大于 3 的元素</span></span><br><span class="line">$(<span class="string">"ul li:gt(3)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有标题元素 &lt;h1&gt;, &lt;h2&gt; ...</span></span><br><span class="line">$(<span class="string">":header"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有动画元素</span></span><br><span class="line">$(<span class="string">":animated"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="内容过滤器"><a href="#内容过滤器" class="headerlink" title="内容过滤器"></a>内容过滤器</h2><ul><li><code>:contains("text")</code>：匹配包含给定文本的元素</li><li><code>:empty</code>：匹配所有不包含子元素或者文本的空元素</li><li><code>:parent</code>：匹配含有子元素或者文本的元素</li><li><code>:has(selector)</code>：匹配含有选择器所匹配的元素的元素</li><li><code>:hidden</code>：匹配所有不可见元素 display:none 或 input type=hidden</li></ul><h3 id="演示-3"><a href="#演示-3" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有包含文本 "Hello" 的元素</span></span><br><span class="line">$(<span class="string">":contains('Hello')"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有不为空的输入元素</span></span><br><span class="line">$(<span class="string">"input:not(:empty)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配所有含有子元素或者文本的父元素。</span></span><br><span class="line">$(<span class="string">":parent"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有包含有 &lt;p&gt; 元素在其内的 &lt;div&gt; 元素</span></span><br><span class="line">$(<span class="string">"div:has(p)"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有隐藏的 &lt;p&gt; 元素</span></span><br><span class="line">$(<span class="string">"p:hidden"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="属性过滤器"><a href="#属性过滤器" class="headerlink" title="属性过滤器"></a>属性过滤器</h2><ul><li><code>[attribute]</code>：匹配包含给定属性的元素</li><li><code>[attribute=value]</code>：匹配给定的属性是某个特定值的元素</li><li><code>[attribute!=value]</code>：匹配所有不含有指定的属性， 或者属性不等于特定值的元素</li><li><code>[attribute^=value]</code>：匹配给定的属性是以某些值开始的元素</li><li><code>[attribute$=value]</code>：匹配给定的属性是以某些值结尾的元素</li><li><code>[attribute|=value]</code>：选取每个带有指定属性的元素，该元素的值等于指定字符串（比如 “en”）或以该字符串后跟连接符作为开头的字符串（比如 “en-us”）</li><li><code>[attribute*=value]</code>：匹配给定的属性是以包含某些值的元素</li><li><code>[attrSel1][attrSel2][attrSelN]</code>：复合属性选择器， 需要同时满足多个条件时使用</li></ul><h3 id="演示-4"><a href="#演示-4" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有带有 href 属性的元素</span></span><br><span class="line">$(<span class="string">"[href]"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 href 属性且值等于 "default.htm" 的元素</span></span><br><span class="line">$(<span class="string">"[href='default.htm']"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 href 属性且值不等于 "default.htm" 的元素</span></span><br><span class="line">$(<span class="string">"[href!='default.htm']"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 title 属性且值以 "Tom" 开头的元素</span></span><br><span class="line">$(<span class="string">"[title^='Tom']"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 href 属性且值以 ".jpg" 结尾的元素</span></span><br><span class="line">$(<span class="string">"[href$='.jpg']"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 title 属性且值等于 'Tomorrow' 或者以 'Tomorrow' 后跟连接符作为开头的字符串</span></span><br><span class="line">$(<span class="string">"[title|='Tomorrow']"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 title 属性且值包含字符串 "hello" 的元素</span></span><br><span class="line">$(<span class="string">"[title*='hello']"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//带有 id 属性，并且 name 属性以 man 结尾的输入框</span></span><br><span class="line">$( <span class="string">"input[id][name$='man']"</span> );</span><br></pre></td></tr></tbody></table></figure><h2 id="表单过滤器"><a href="#表单过滤器" class="headerlink" title="表单过滤器"></a>表单过滤器</h2><ul><li><code>:input</code>：匹配所有 input, textarea, select 和 button 元素</li><li><code>:text</code>：匹配所有的文本输入框</li><li><code>:password</code>：匹配所有的密码输入框</li><li><code>:radio</code>：匹配所有的单选框</li><li><code>:checkbox</code>：匹配所有的复选框</li><li><code>:submit</code>：匹配所有提交按钮</li><li><code>:image</code>：匹配所有 img 标签</li><li><code>:reset</code>：匹配所有重置按钮</li><li><code>:button</code>：匹配所有 input type=button 按钮</li><li><code>:file</code>：匹配所有 input type=file 文件上传框</li></ul><h3 id="演示-5"><a href="#演示-5" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有 input 元素</span></span><br><span class="line">$(<span class="string">":input"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="text" 的 input 元素</span></span><br><span class="line">$(<span class="string">":text"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="password" 的 input 元素</span></span><br><span class="line">$(<span class="string">":password"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="radio" 的 input 元素</span></span><br><span class="line">$(<span class="string">":radio"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="checkbox" 的 input 元素</span></span><br><span class="line">$(<span class="string">":checkbox"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="submit" 的 input 元素</span></span><br><span class="line">$(<span class="string">":submit"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="image" 的 input 元素</span></span><br><span class="line">$(<span class="string">":image"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="reset" 的 input 元素</span></span><br><span class="line">$(<span class="string">":reset"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="button" 的 input 元素</span></span><br><span class="line">$(<span class="string">":button"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有带有 type="file" 的 inpu</span></span><br><span class="line">$(<span class="string">":file"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="表单对象属性过滤器"><a href="#表单对象属性过滤器" class="headerlink" title="表单对象属性过滤器"></a>表单对象属性过滤器</h2><ul><li><code>:enabled</code>：匹配所有可用元素</li><li><code>:disabled</code>：匹配所有不可用元素</li><li><code>:checked</code>：匹配所有选中的单选， 复选， 和下拉列表中选中的 option 标签对象</li><li><code>:selected</code>：匹配所有选中的 option</li></ul><h3 id="演示-6"><a href="#演示-6" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//所有启用的元素</span></span><br><span class="line">$(<span class="string">":enabled"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有禁用的元素</span></span><br><span class="line">$(<span class="string">":disabled"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有选中的复选框选项</span></span><br><span class="line">$(<span class="string">":checked"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有选定的下拉列表元素</span></span><br><span class="line">$(<span class="string">":selected"</span>);</span><br></pre></td></tr></tbody></table></figure><h1 id="JQuery元素筛选"><a href="#JQuery元素筛选" class="headerlink" title="JQuery元素筛选"></a>JQuery元素筛选</h1><ul><li><code>eq(index)</code>：获取给定索引的元素（功能与<code>:eq(index)</code>一致）</li><li><code>first()</code>：获取第一个元素（功能与<code>:first</code>一致）</li><li><code>last()</code>：获取最后一个元素（功能与<code>:last</code>一致）</li><li><code>filter(exp)</code>：留下匹配的元素</li><li><code>is(exp)</code>：判断是否匹配给定的选择器， 只要有一个匹配就返回， true</li><li><code>has(exp)</code>：返回包含有匹配选择器的元素的元素（功能与<code>:has(selector)</code>一致</li><li><code>not(exp)</code>：删除匹配选择器的元素（功能与<code>:not(selector)</code>一致）</li><li><code>children(exp)</code>：返回匹配给定选择器的子元素（功能与<code>:parent &gt; child</code>一致）</li><li><code>find(exp)</code>：返回匹配给定选择器的后代元素（功能与<code>ancestor descendant</code>一致）</li><li><code>next()</code>：返回当前元素的下一个兄弟元素（功能与<code>prev + next</code>一致）</li><li><code>nextAll()</code>：返回当前元素后面所有的兄弟元素（功能与<code>prev ~ siblings</code>一致）</li><li><code>nextUntil()</code>：返回当前元素到指定匹配的元素为止的后面元素</li><li><code>parent()</code>：返回父元素</li><li><code>prev(exp)</code>：返回当前元素的上一个兄弟元素</li><li><code>prevAll()</code>：返回当前元素前面所有的兄弟元素</li><li><code>prevUnit(exp)</code>：返回当前元素到指定匹配的元素为止的前面元素</li><li><code>siblings(exp)</code>：返回所有兄弟元素</li><li><code>add()</code>：把 add 匹配的选择器的元素添加到当前 jquery 对象中</li></ul><h1 id="JQuery的属性操作"><a href="#JQuery的属性操作" class="headerlink" title="JQuery的属性操作"></a>JQuery的属性操作</h1><ul><li><code>html()</code>：它可以设置和获取起始标签和结束标签中的内容</li><li><code>text()</code>：它可以设置和获取起始标签和结束标签中的文本</li><li><code>val()</code>：它可以设置和获取表单项的 value 属性值，还可以操作单选、复选、下拉列表的勾选</li><li><code>attr()</code>：可以设置和获取属性的值，还可以添加自定义的属性、属性值（但不推荐操作 checked、 readOnly、 selected、 disabled 等等）</li><li><code>prop()</code>：可以设置和获取属性的值（只推荐操作 checked、 readOnly、 selected、 disabled 等等）</li></ul><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取id='one'的&lt;div&gt;元素中的html内容</span></span><br><span class="line">$(<span class="string">"div[id='one']"</span>).html();</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置id='one'的&lt;div&gt;元素中的html内容</span></span><br><span class="line">$(<span class="string">"div[id='one']"</span>).html(<span class="string">"&lt;span&gt;我是王多鱼&lt;/span&gt;"</span>);<span class="comment">//页面效果为：我是王多鱼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取id='two'的&lt;div&gt;元素中的text内容</span></span><br><span class="line">$(<span class="string">"div[id='two']"</span>).text();</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置id='two'的&lt;div&gt;元素中的text内容</span></span><br><span class="line">$(<span class="string">"div[id='two']"</span>).text(<span class="string">"&lt;span&gt;我是王多鱼&lt;/span&gt;"</span>);<span class="comment">//页面效果为：&lt;span&gt;我是王多鱼&lt;/span&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取id='three'且type='text'的&lt;input&gt;的value值</span></span><br><span class="line">$(<span class="string">":text[id='three']"</span>).val();</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置id='three'且type='text'的&lt;input&gt;的value值</span></span><br><span class="line">$(<span class="string">":text[id='three']"</span>).val(<span class="string">"HelloWorld"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//操作单选、复选、下拉列表的勾选</span></span><br><span class="line">$(<span class="string">".radio,.checkbox,#single,#multiple"</span>).val([<span class="string">"man"</span>,<span class="string">"game"</span>,<span class="string">"Japanese"</span>,<span class="string">"male"</span>,<span class="string">"female"</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取第一个复选框的name属性值</span></span><br><span class="line">$(<span class="string">":checkbox:first"</span>).attr(<span class="string">"name"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置最后一个复选框的name属性值</span></span><br><span class="line">$(<span class="string">":checkbox:last"</span>).attr(<span class="string">"name"</span>,<span class="string">"hobbies"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//为第一个复选框添加自定义的love='never'属性值</span></span><br><span class="line">$(<span class="string">":checkbox:first"</span>).attr(<span class="string">"love"</span>,<span class="string">"never"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取索引为0的单选框的选中状态</span></span><br><span class="line">$(<span class="string">":radio:eq(0)"</span>).prop(<span class="string">"checked"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置索引为1的单选框的选中状态</span></span><br><span class="line">$(<span class="string">":radio:eq(1)"</span>).prop(<span class="string">"checkbox"</span>,<span class="string">"true"</span>);</span><br></pre></td></tr></tbody></table></figure><h1 id="案例-JQuery全选-全不选（待复习）"><a href="#案例-JQuery全选-全不选（待复习）" class="headerlink" title="案例-JQuery全选/全不选（待复习）"></a>案例-JQuery全选/全不选（待复习）</h1><h2 id="案例要求"><a href="#案例要求" class="headerlink" title="案例要求"></a>案例要求</h2><p>要求实现<code>全选/全不选</code>、<code>全选</code>、<code>全不选</code>、<code>反选</code>、<code>提交</code>按钮的功能。</p><h2 id="案例实现"><a href="#案例实现" class="headerlink" title="案例实现"></a>案例实现</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Exercise<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//给全选按钮绑定单击事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#checkAllBtn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">":checkbox"</span>).prop(<span class="string">"checked"</span>, <span class="literal">true</span>);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//给全不选按钮绑定单击事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#checkNotAllBtn"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">":checkbox"</span>).prop(<span class="string">"checked"</span>, <span class="literal">false</span>);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//给反选绑定按钮单击事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#invert"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//遍历每个name='sport'复选框的勾选状态</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">":checkbox[name='sport']"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    <span class="comment">//进行反选</span></span></span><br><span class="line"><span class="javascript">                    <span class="built_in">this</span>.checked = !<span class="built_in">this</span>.checked;</span></span><br><span class="line">                });</span><br><span class="line"><span class="javascript">                <span class="comment">//全部name='sport'复选框的个数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $allNum = $(<span class="string">":checkbox[name='sport']"</span>).length;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//已经勾选的name='sport'复选框个数</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $checkedNum = $(<span class="string">":checkbox[name='sport']:checked"</span>).length;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//判断全选/全不选按钮选取状态</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#checkAllBox"</span>).prop(<span class="string">"checked"</span>, $allNum === $checkedNum);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//给提交按钮绑定单击事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#submit"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//创建储存已选中按钮value值的数组</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> checkedValue = [];</span></span><br><span class="line"><span class="javascript">                <span class="comment">//遍历name='sport'的已选中复选框</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">":checkbox[name='sport']:checked"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    <span class="comment">//获取value值，并放入数组</span></span></span><br><span class="line"><span class="javascript">                    checkedValue.push(<span class="built_in">this</span>.value);</span></span><br><span class="line">                });</span><br><span class="line"><span class="javascript">                <span class="comment">//弹出value值数组</span></span></span><br><span class="line">                alert(checkedValue);</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//给全选/全不选按钮绑定单击事件</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#checkAllBox"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//通过全选/全不选按钮的选中状态给所有name='sport'的复选框选中状态赋值</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">":checkbox[name='sport']"</span>).prop(<span class="string">"checked"</span>,<span class="built_in">this</span>.checked);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//手动全选name='sport'复选框，全选/全不选复选框也要自动选中</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">":checkbox[name='sport']"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//获取全部name='sport'复选框数量</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $allSport = $(<span class="string">":checkbox[name='sport']"</span>).length;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//获取全部已选中的name='sport'复选框数量</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $allChecked = $(<span class="string">":checkbox[name='sport']:checked"</span>).length;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//判断全选/全不选checked状态</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#checkAllBox"</span>).prop(<span class="string">"checked"</span>,$allSport === $allChecked);</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>What's your favorite sport?<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"checkAllBox"</span>/&gt;</span>全选/全不选</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"sport"</span> <span class="attr">value</span>=<span class="string">"football"</span>/&gt;</span>football</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"sport"</span> <span class="attr">value</span>=<span class="string">"basketball"</span>/&gt;</span>basketball</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"sport"</span> <span class="attr">value</span>=<span class="string">"badminton"</span>/&gt;</span>badminton</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"sport"</span> <span class="attr">value</span>=<span class="string">"tableTennis"</span>/&gt;</span>tableTennis</span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"checkAllBtn"</span> <span class="attr">value</span>=<span class="string">"全选"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"checkNotAllBtn"</span> <span class="attr">value</span>=<span class="string">"全不选"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"invert"</span> <span class="attr">value</span>=<span class="string">"反选"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">id</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="DOM对象的增删改"><a href="#DOM对象的增删改" class="headerlink" title="DOM对象的增删改"></a>DOM对象的增删改</h1><h2 id="内部插入"><a href="#内部插入" class="headerlink" title="内部插入"></a>内部插入</h2><ul><li><code>appendTo()</code>：例如<code>a.prependTo(b)</code>，把 a 插入到 b 子元素末尾， 成为最后一个子元素</li><li><code>prependTo()</code>：例如<code>a.prependTo(b)</code>，把 a 插到 b 所有子元素前面， 成为第一个子元素</li></ul><h2 id="外部插入"><a href="#外部插入" class="headerlink" title="外部插入"></a>外部插入</h2><ul><li><code>insertAfter()</code>：例如<code>a.insertAfter(b)</code>，把 a 插到 b 后面， 成为同级一元素</li><li><code>insertBefore()</code>：例如<code>a.insertBefore(b)</code>，把 a 插到 b 前面， 成为同级一元素</li></ul><h2 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h2><ul><li><code>replaceWith()</code>：例如<code>a.replaceWith(b)</code>，用b替换掉所有a</li><li><code>replaceAll()</code>：例如<code>a.replaceAll(b)</code>，用a替换掉所有b</li></ul><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><ul><li><code>remove()</code>：例如<code>a.remove()</code>，删除a标签</li><li><code>empty()</code>：例如<code>a.empty()</code>，清空a标签里的内容</li></ul><h2 id="演示-7"><a href="#演示-7" class="headerlink" title="演示"></a>演示</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>DOM对象增删改<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//创建一个DOM对象，并添加class='one'的div中的最后面</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"&lt;p&gt;原来我也是一个Joker&lt;/p&gt;"</span>).appendTo($(<span class="string">"div[class='one']"</span>));</span></span><br><span class="line"><span class="javascript">            <span class="comment">//创建一个DOM对象，并添加class='one'的div中的最前面</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"&lt;a&gt;www.pornhub.com&lt;/a&gt;&lt;br/&gt;"</span>).prependTo($(<span class="string">"div[class='one']"</span>));</span></span><br><span class="line"><span class="javascript">            <span class="comment">//创建一个DOM对象，并添加class='one'的div外的最前面</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"&lt;img src=\"\" alt=\"骗你的，其实没有图片\"/&gt;"</span>).insertBefore($(<span class="string">"div[class='one']"</span>));</span></span><br><span class="line"><span class="javascript">            <span class="comment">//创建一个DOM对象，并添加class='one'的div外的最后面</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"&lt;ol&gt;什么情况啊！你！&lt;/ol&gt;"</span>).insertAfter($(<span class="string">"div[class='one']"</span>));</span></span><br><span class="line"><span class="javascript">            <span class="comment">//前替换所有后</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"    &lt;form&gt;\n"</span> +</span></span><br><span class="line"><span class="handlebars"><span class="xml">                "        <span class="tag">&lt;<span class="name">span</span>&gt;</span>装逼犯姓名：<span class="tag">&lt;/<span class="name">span</span>&gt;</span>\n" +</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">                "        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">\</span>"<span class="attr">text</span>\"/&gt;</span>\n" +</span></span></span><br><span class="line"><span class="javascript">                <span class="string">"    &lt;/form&gt;"</span>).replaceAll($(<span class="string">"div[class='two']"</span>));</span></span><br><span class="line"><span class="javascript">            <span class="comment">//后替换所有前</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"div[class='three']"</span>).replaceWith(<span class="string">"&lt;p&gt;别叫了，行不行啊！&lt;/p&gt;"</span>);</span></span><br><span class="line"><span class="javascript">            <span class="comment">//删除指定DOM对象</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"div[class='four']:first"</span>).remove();</span></span><br><span class="line"><span class="javascript">            <span class="comment">//清楚指定DOM对象中的内容</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"div[class='four']:first"</span>).empty();</span></span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>严老板都已经拉了夸，你是真小丑！<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>不是，我都不知道，你在装什么？<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>你就是一个因溜狗！<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"three"</span>&gt;</span></span><br><span class="line">        都太经典了，你知道不？</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"three"</span>&gt;</span></span><br><span class="line">        龙哥的S6第一个王者，韩晶亮你懂不懂啊！</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"four"</span>&gt;</span></span><br><span class="line">        上路被三人越塔！打野都不在，我为什么要去啊！</span><br><span class="line">        不是，不是抬杠！你来告诉我，打野都不在，我为什么要去！</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"four"</span>&gt;</span></span><br><span class="line">        来，这个叫尊尼获加的臭JB钢筋！我给你房管来，来你给我说话！</span><br><span class="line">        你说不明白，明天你妈出门被车撞死！</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="案例-从左到右，从右到左（待复习）"><a href="#案例-从左到右，从右到左（待复习）" class="headerlink" title="案例-从左到右，从右到左（待复习）"></a>案例-从左到右，从右到左（待复习）</h1><h2 id="案例要求-1"><a href="#案例要求-1" class="headerlink" title="案例要求"></a>案例要求</h2><p>做出两个下拉列表，再做出四个按钮。按钮的功能分别为：<code>添加选中项到右边</code>、<code>添加全部项到右边</code>、<code>添加选中项到左边</code>、<code>添加全部项到左边</code>。</p><h2 id="案例实现-1"><a href="#案例实现-1" class="headerlink" title="案例实现"></a>案例实现</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>从左到右，从右到左<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        select {</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 140px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        div {</span><br><span class="line">            width: 130px;</span><br><span class="line">            float: left;</span><br><span class="line">            text-align: center;</span><br><span class="line">        }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//实现"添加选中项到右边"按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"button:eq(0)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"select:eq(0) &gt; option:selected"</span>).appendTo($(<span class="string">"select:eq(1)"</span>));</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现"添加全部项到右边"按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"button:eq(1)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"select:eq(0) &gt; option"</span>).appendTo($(<span class="string">"select:eq(1)"</span>));</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现"添加选中项到左边"按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"button:eq(2)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"select:eq(1) &gt; option:selected"</span>).appendTo($(<span class="string">"select:eq(0)"</span>));</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现"添加全部项到左边"按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"button:eq(3)"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"select:eq(1) &gt; option"</span>).appendTo($(<span class="string">"select:eq(0)"</span>));</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span> <span class="attr">name</span>=<span class="string">"sel01"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"one"</span>&gt;</span>one<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"two"</span>&gt;</span>two<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"three"</span>&gt;</span>three<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"four"</span>&gt;</span>four<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"five"</span>&gt;</span>five<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"six"</span>&gt;</span>six<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"seven"</span>&gt;</span>seven<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"eight"</span>&gt;</span>eight<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>添加选中项到右边<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>添加全部项到右边<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span> <span class="attr">name</span>=<span class="string">"sel02"</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>添加选中项到左边<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>添加全部项到左边<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="案例-表格的动态添加、删除（待复习）"><a href="#案例-表格的动态添加、删除（待复习）" class="headerlink" title="案例-表格的动态添加、删除（待复习）"></a>案例-表格的动态添加、删除（待复习）</h1><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态添加、删除表格记录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#employeeTable</span> {</span></span><br><span class="line">            border-spacing: 1px;</span><br><span class="line">            background-color: black;</span><br><span class="line">            margin: 80px auto 10px auto;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        th, td {</span><br><span class="line">            background-color: white;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#formDiv</span> {</span></span><br><span class="line">            width: 250px;</span><br><span class="line">            border-style: solid;</span><br><span class="line">            border-width: 1px;</span><br><span class="line">            margin: 50px auto 10px auto;</span><br><span class="line">            padding: 10px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#formDiv</span> <span class="selector-tag">input</span> {</span></span><br><span class="line">            width: 100%;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.word</span> {</span></span><br><span class="line">            width: 40px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.inp</span> {</span></span><br><span class="line">            width: 200px;</span><br><span class="line">        }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//Delete函数</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> deleteFun = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//获取被删除表格行对象</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $trObj = $(<span class="built_in">this</span>).parent().parent();</span></span><br><span class="line"><span class="javascript">                <span class="comment">//获取被删除表格行name</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> name = $trObj.find(<span class="string">"td:first"</span>).text();</span></span><br><span class="line"><span class="javascript">                <span class="comment">//用户确认删除</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (confirm(<span class="string">"确定删除["</span> + name + <span class="string">"]用户？"</span>)) {</span></span><br><span class="line">                    $trObj.remove();</span><br><span class="line">                }</span><br><span class="line"><span class="javascript">                <span class="comment">//阻止a标签的默认跳转</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">            };</span><br><span class="line"><span class="javascript">            <span class="comment">//实现提交按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#addEmpButton"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//获取输入框中 姓名、邮箱、工资的内容</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> name = $(<span class="string">":text[name='empName']"</span>).val();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> email = $(<span class="string">":text[name='email']"</span>).val();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> salary = $(<span class="string">":text[name='salary']"</span>).val();</span></span><br><span class="line"><span class="javascript">                <span class="comment">//创建一个新的表格行，将数据添加进去</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $newTrObj = $(<span class="string">"    &lt;tr&gt;"</span> +</span></span><br><span class="line"><span class="javascript">                    <span class="string">"        &lt;td&gt;"</span>+name+<span class="string">"&lt;/td&gt;"</span> +</span></span><br><span class="line"><span class="javascript">                    <span class="string">"        &lt;td&gt;"</span>+email+<span class="string">"&lt;/td&gt;"</span> +</span></span><br><span class="line"><span class="javascript">                    <span class="string">"        &lt;td&gt;"</span>+salary+<span class="string">"&lt;/td&gt;"</span> +</span></span><br><span class="line"><span class="handlebars"><span class="xml">                    "        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">\</span>"<span class="attr">deleteEmp</span>?<span class="attr">id</span>=<span class="string">new\</span>"&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>" +</span></span></span><br><span class="line"><span class="javascript">                    <span class="string">"    &lt;/tr&gt;"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="comment">//将新的表格行添加进员工表格中</span></span></span><br><span class="line"><span class="javascript">                $newTrObj.appendTo($(<span class="string">"#employeeTable"</span>));</span></span><br><span class="line"><span class="javascript">                <span class="comment">//与新添加的表格行绑定Delete事件</span></span></span><br><span class="line"><span class="javascript">                $newTrObj.find(<span class="string">"a"</span>).click(deleteFun);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现Delete&lt;a&gt;标签功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"a"</span>).click(deleteFun);</span></span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"employeeTable"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Salary<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Jason<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>your_email@example.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"deleteEmp?id=001"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>your_email@example.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>6000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"deleteEmp?id=002"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Bernardo<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>your_email@example.com<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>7000<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"deleteEmp?id=003"</span>&gt;</span>Delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"formDiv"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>添加新员工<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>name<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"empName"</span> <span class="attr">id</span>=<span class="string">"empName"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>email<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">id</span>=<span class="string">"email"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"word"</span>&gt;</span>salary<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">"inp"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"salary"</span> <span class="attr">id</span>=<span class="string">"salary"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"addEmpButton"</span> <span class="attr">value</span>=<span class="string">"abc"</span>&gt;</span></span><br><span class="line">                    Submit</span><br><span class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="JQuery操作CSS样式"><a href="#JQuery操作CSS样式" class="headerlink" title="JQuery操作CSS样式"></a>JQuery操作CSS样式</h1><ul><li><p><code>addClass()</code>：添加样式</p></li><li><p><code>removeClass()</code>：删除样式</p></li><li><p><code>toggleClass()</code>：样式存在即删除，不存在即添加</p></li><li><p><code>offset()</code>：获取和设置元素的坐标位置</p><ul><li>属性：top 和 left，分别为到dom顶的距离、和到dom左的距离。</li></ul><blockquote><p>在设置<code>offset()</code>时，必须传入键值对数据。如<code>offset({left:100,top:100})</code></p></blockquote></li></ul><h2 id="演示（待复习）"><a href="#演示（待复习）" class="headerlink" title="演示（待复习）"></a>演示（待复习）</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Css样式操作<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        div {</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 260px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.yellowBorder</span> {</span></span><br><span class="line">            border: 2px yellow solid;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.redDiv</span> {</span></span><br><span class="line">            background-color: red;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.blueBorder</span> {</span></span><br><span class="line">            border: 5px blue solid;</span><br><span class="line">        }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//实现addClass()按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">":button[value='addClass()']"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"div.border"</span>).addClass(<span class="string">"redDiv yellowBorder"</span>);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现removeClass()按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">":button[value='removeClass()']"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"div.border"</span>).removeClass(<span class="string">"redDiv"</span>);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现toggleClass()按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">":button[value='toggleClass()']"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"div.border"</span>).toggleClass(<span class="string">"blueBorder"</span>);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现offset()按钮的获取功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">":button[value='offset()01']"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> leftNum = $(<span class="string">"div.border"</span>).offset().left;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> topNum = $(<span class="string">"div.border"</span>).offset().top;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">"left: "</span>+leftNum+<span class="string">"    top: "</span>+topNum);</span></span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//实现offset()按钮的设置功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn05"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> $offset = $(<span class="string">"div.border"</span>).offset({</span></span><br><span class="line">                    top: 100,</span><br><span class="line">                    left: 100</span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--空白元素，以便测试css样式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"border"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"addClass()"</span> <span class="attr">id</span>=<span class="string">"btn01"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"removeClass()"</span> <span class="attr">id</span>=<span class="string">"btn02"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"toggleClass()"</span> <span class="attr">id</span>=<span class="string">"btn03"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"offset()01"</span> <span class="attr">id</span>=<span class="string">"btn04"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"offset()02"</span> <span class="attr">id</span>=<span class="string">"btn05"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="JQuery操作动画"><a href="#JQuery操作动画" class="headerlink" title="JQuery操作动画"></a>JQuery操作动画</h1><h2 id="基本动画"><a href="#基本动画" class="headerlink" title="基本动画"></a>基本动画</h2><ul><li><code>show()</code>：将隐藏的元素显示</li><li><code>hide()</code>：将可见的元素隐藏</li><li><code>toggle()</code>：可见则隐藏，不可见则显示=</li></ul><h2 id="淡入淡出动画"><a href="#淡入淡出动画" class="headerlink" title="淡入淡出动画"></a>淡入淡出动画</h2><ul><li><code>fadeIn()</code>：淡入（慢慢可见）</li><li><code>fadeOut()</code>：淡出（慢慢消失）</li><li><code>fadeTo()</code>：在指定时长内慢慢的将透明度修改到指定的值。 0 透明， 1 完成可见， 0.5 半透明（此方法较为特殊，第二个参数为透明度，第三个方法才为回调函数）</li><li><code>fadeToggle()</code>：淡入则切换为淡出，淡出则切换为淡入</li></ul><blockquote><p>上述所有方法都可以添加两个参数：</p><ol><li>参数一，动画执行的时长</li><li>参数二，动画的回调函数</li></ol></blockquote><h2 id="演示（待复习）-1"><a href="#演示（待复习）-1" class="headerlink" title="演示（待复习）"></a>演示（待复习）</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JQuery操作动画<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        table, td {</span><br><span class="line">            border: 1px solid;</span><br><span class="line">            border-collapse: collapse;;</span><br><span class="line">        }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//显示show()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).show(<span class="number">2000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"show()动画完成了"</span>);</span></span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//隐藏hide()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).hide(<span class="number">2000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"hide动画执行完成了"</span>);</span></span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//切换toggle()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).toggle(<span class="number">1000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"toggle动画完成"</span>);</span></span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//自动动画效果</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> $autoToggle = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).toggle(<span class="number">1000</span>, $autoToggle);</span></span><br><span class="line">            };</span><br><span class="line"><span class="javascript">            <span class="comment">//取消注释，开启自动动画效果</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//$autoToggle();</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">//淡出fadeOut()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn4"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).fadeOut(<span class="number">2000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"fadeOut动画完成"</span>);</span></span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//淡入fadeIn()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn5"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).fadeIn(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"fadeIn动画完成"</span>);</span></span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//fadeTo()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn6"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).fadeTo(<span class="number">2000</span>, <span class="number">0.5</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"fadeTo动画完成"</span>);</span></span><br><span class="line">                })</span><br><span class="line">            });</span><br><span class="line"><span class="javascript">            <span class="comment">//fadeToggle()</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#btn7"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#div1"</span>).fadeToggle(<span class="number">2000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                    alert(<span class="string">"fadeToggle动画完成"</span>);</span></span><br><span class="line">                });</span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">style</span>=<span class="string">"float: left"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn1"</span>&gt;</span>显示show()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn2"</span>&gt;</span>隐藏hide()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn3"</span>&gt;</span>显示/隐藏切换toggle()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn4"</span>&gt;</span>淡出fadeOut()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn5"</span>&gt;</span>淡入fadeIn()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn6"</span>&gt;</span>淡化到fadeTo()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn7"</span>&gt;</span>淡化切换fadeToggle()<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">style</span>=<span class="string">"float:left;border: 1px solid;background-color: blue;width: 300px;height: 200px;"</span>&gt;</span></span><br><span class="line">    jquery动画定义了很多种动画效果，可以很方便的使用这些动画效果</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="案例-CSS动画之品牌展示"><a href="#案例-CSS动画之品牌展示" class="headerlink" title="案例-CSS动画之品牌展示"></a>案例-CSS动画之品牌展示</h1><h2 id="案例要求-2"><a href="#案例要求-2" class="headerlink" title="案例要求"></a>案例要求</h2><ol><li>点击按钮的时候， 隐藏和显示卡西欧之后的品牌。</li><li>当显示全部内容的时候， 按钮文本为“显示精简品牌”。然后小三角形向上， 所有品牌产品为默认颜色。</li><li>当只显示精简品牌的时候， 要隐藏卡西欧之后的品牌， 按钮文本为“显示全部品牌”。然后小三形向下，并且把 佳能，尼康的品牌颜色改为红色（给 li 标签添加 promoted 样式即可）</li></ol><h2 id="案例实现（待复习）"><a href="#案例实现（待复习）" class="headerlink" title="案例实现（待复习）"></a>案例实现（待复习）</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>CSS动画之商品展示练习<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * {</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        body {</span><br><span class="line">            font-size: 12px;</span><br><span class="line">            text-align: center;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        a {</span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#0044DD</span>;</span></span><br><span class="line">            text-decoration: none;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> {</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#FF5500</span>;</span></span><br><span class="line">            text-decoration: underline;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.SubCategoryBox</span> {</span></span><br><span class="line">            width: 600px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            text-align: center;</span><br><span class="line">            margin-top: 40px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.SubCategoryBox</span> <span class="selector-tag">ul</span> {</span></span><br><span class="line">            list-style: none;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.SubCategoryBox</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> {</span></span><br><span class="line">            display: block;</span><br><span class="line">            float: left;</span><br><span class="line">            width: 200px;</span><br><span class="line">            line-height: 20px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.showMore</span>, <span class="selector-class">.showLess</span> {</span></span><br><span class="line">            clear: both;</span><br><span class="line">            text-align: center;</span><br><span class="line">            paddin-top: 10px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.showMore</span> <span class="selector-tag">a</span>, <span class="selector-class">.showLess</span> <span class="selector-tag">a</span> {</span></span><br><span class="line">            display: block;</span><br><span class="line">            width: 120px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">            line-height: 24px;</span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#AAAAAA</span>;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.showMore</span> <span class="selector-tag">a</span> <span class="selector-tag">span</span> {</span></span><br><span class="line">            padding-left: 15px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-tag">url</span>("<span class="selector-tag">img</span>/<span class="selector-tag">down</span><span class="selector-class">.gif</span>") <span class="selector-tag">no-repeat</span> 0 0;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.showLess</span> <span class="selector-tag">a</span> <span class="selector-tag">span</span> {</span></span><br><span class="line">            padding-left: 15px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-tag">url</span>("<span class="selector-tag">img</span>/<span class="selector-tag">up</span><span class="selector-class">.gif</span>") <span class="selector-tag">no-repeat</span> 0 0;</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.promoted</span> <span class="selector-tag">a</span> {</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#FF5500</span>;</span></span><br><span class="line">        }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//页面初始状态</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"li:gt(4):not(:last)"</span>).hide();</span></span><br><span class="line"><span class="javascript">            <span class="comment">//实现展示/收起按钮功能</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"a:last"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//让下面的品牌显示或隐藏</span></span></span><br><span class="line"><span class="javascript">                $(<span class="string">"li:gt(4):not(:last)"</span>).toggle();</span></span><br><span class="line"><span class="javascript">                <span class="comment">//判断下面的品牌是显示还是隐藏</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> ($(<span class="string">"li:gt(4):not(:last)"</span>).is(<span class="string">":hidden"</span>)) {</span></span><br><span class="line"><span class="javascript">                    <span class="comment">//若下面的品牌是隐藏的，则text为'显示全部品牌'，图标为向下</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"div div a span"</span>).text(<span class="string">"显示全部品牌"</span>);</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"div div"</span>).removeClass();</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"div div"</span>).addClass(<span class="string">"showMore"</span>)</span></span><br><span class="line"><span class="javascript">                    <span class="comment">//除去广告高亮</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"li:contains('佳能')"</span>).removeClass(<span class="string">"promoted"</span>);</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"li:contains('索尼')"</span>).removeClass(<span class="string">"promoted"</span>);</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"li:contains('三星')"</span>).removeClass(<span class="string">"promoted"</span>);</span></span><br><span class="line"><span class="javascript">                } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">                    <span class="comment">//若下面的品牌是显示的，则text为'显示精简品牌'，图标为向上</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"div div a span"</span>).text(<span class="string">"显示精简品牌"</span>);</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"div div"</span>).removeClass();</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"div div"</span>).addClass(<span class="string">"showLess"</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="comment">//添加广告高亮</span></span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"li:contains('佳能')"</span>).addClass(<span class="string">"promoted"</span>);</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"li:contains('索尼')"</span>).addClass(<span class="string">"promoted"</span>);</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"li:contains('三星')"</span>).addClass(<span class="string">"promoted"</span>);</span></span><br><span class="line">                }</span><br><span class="line"><span class="javascript">                <span class="comment">//取消&lt;a&gt;标签自动跳转</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"SubCategoryBox"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>佳能<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(30440)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>索尼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(20001)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>三星<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(19028)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>尼康<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(17821)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>松下<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(12289)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>卡西欧<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(8242)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>富士<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(14894)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>柯达<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(9520)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>宾得<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(2195)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>理光<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(4114)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>奥林巴斯<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(12205)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>明基<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(1466)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>爱国者<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(3091)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>小米<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(1010)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>其他品牌<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span>&gt;</span>(7275)<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"showMore"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"more.html"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>显示全部品牌<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="JQuery操作事件"><a href="#JQuery操作事件" class="headerlink" title="JQuery操作事件"></a>JQuery操作事件</h1><h2 id="JQuery页面加载后事件"><a href="#JQuery页面加载后事件" class="headerlink" title="JQuery页面加载后事件"></a>JQuery页面加载后事件</h2><h3 id="什么是’JQuery页面加载后事件’"><a href="#什么是’JQuery页面加载后事件’" class="headerlink" title="什么是’JQuery页面加载后事件’?"></a>什么是’JQuery页面加载后事件’?</h3><p><code>$(document).ready()</code></p><h3 id="JQuery页面加载后事件与原生JS页面加载后事件的触发顺序？"><a href="#JQuery页面加载后事件与原生JS页面加载后事件的触发顺序？" class="headerlink" title="JQuery页面加载后事件与原生JS页面加载后事件的触发顺序？"></a>JQuery页面加载后事件与原生JS页面加载后事件的触发顺序？</h3><ul><li>JQuery的<code>$(document).ready()</code>先执行</li><li>原生JS的<code>window.onload</code>后执行</li></ul><h3 id="JQuery页面加载后事件与原生JS页面加载后事件的触发时机？"><a href="#JQuery页面加载后事件与原生JS页面加载后事件的触发时机？" class="headerlink" title="JQuery页面加载后事件与原生JS页面加载后事件的触发时机？"></a>JQuery页面加载后事件与原生JS页面加载后事件的触发时机？</h3><ul><li>JQuery的<code>$(document).ready()</code>是浏览器的内核解析完页面的标签，创建好 DOM 对象之后就会马上执行</li><li>原生JS的<code>window.onload</code>除了要等浏览器内核解析完标签创建好 DOM 对象， 还要等标签显示时需要的内容加载<br>完成才能执行</li></ul><h3 id="JQuery页面加载后事件与原生JS页面加载后事件的可执行次数？"><a href="#JQuery页面加载后事件与原生JS页面加载后事件的可执行次数？" class="headerlink" title="JQuery页面加载后事件与原生JS页面加载后事件的可执行次数？"></a>JQuery页面加载后事件与原生JS页面加载后事件的可执行次数？</h3><ul><li>JQuery的<code>$(document).ready()</code>，有多少执行多少（依次）</li><li>原生JS的<code>window.onload</code>再多，也只能执行最后依次的赋值函数</li></ul><h2 id="JQuery其他常见事件"><a href="#JQuery其他常见事件" class="headerlink" title="JQuery其他常见事件"></a>JQuery其他常见事件</h2><ul><li><code>click()</code>：鼠标单击事件（被调用时传入函数为绑定，不传入函数为触发）</li><li><code>mouseover()</code>：鼠标移入事件（被调用时传入函数为绑定，不传入函数为触发）</li><li><code>mouseout()</code>：鼠标移出事件（被调用时传入函数为绑定，不传入函数为触发）</li><li><code>bind()</code>：给元素绑定一个或多个事件</li><li><code>one()</code>：给元素绑定一个或多个事件，但其绑定的事件只能被触发一次（使用格式与<code>bind()</code>一致）</li><li><code>unbind()</code>：解除元素绑定的一个或多个事件（功能与<code>bind()</code>相反，调用时只需传入字符串形式的事件名即可）</li><li><code>$(document).on(events,[selector],[data],fn) </code>：动态绑定事件，即使元素是后创建的</li></ul><h3 id="演示-8"><a href="#演示-8" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//click()绑定单击事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    alert(<span class="string">"h5的单击事件"</span>);</span><br><span class="line">});</span><br><span class="line"><span class="comment">//click()触发单击事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).click();</span><br><span class="line"></span><br><span class="line"><span class="comment">//mouseover()绑定鼠标移入事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).mouseover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    alert(<span class="string">"h5的鼠标移入事件"</span>);;</span><br><span class="line">});</span><br><span class="line"><span class="comment">//mouseover()触发鼠标移入事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).mouseover();</span><br><span class="line"></span><br><span class="line"><span class="comment">//mouseout()绑定鼠标移出事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).mouseout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    alert(<span class="string">"鼠标移出事件"</span>);</span><br><span class="line">});</span><br><span class="line"><span class="comment">//mouseout()触发鼠标移出事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).mouseout();</span><br><span class="line"></span><br><span class="line"><span class="comment">//bind()元素绑定三个事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).bind(<span class="string">"click mouseover mouseout"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"别JB叫！"</span>);</span><br><span class="line">});</span><br><span class="line"><span class="comment">//bind()分别触发三个事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).click();</span><br><span class="line">$(<span class="string">"h5"</span>).mouseover();</span><br><span class="line">$(<span class="string">"h5"</span>).mouseout();</span><br><span class="line"></span><br><span class="line"><span class="comment">//one()元素绑定三个事件</span></span><br><span class="line">$(<span class="string">"h5"</span>).one(<span class="string">"click mouseover mouseout"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"我说的，眼老板是垃圾！"</span>);</span><br><span class="line">});</span><br><span class="line"><span class="comment">//one()分别触发三个事件（一个事件只能被触发一次）</span></span><br><span class="line">$(<span class="string">"h5"</span>).click();</span><br><span class="line">$(<span class="string">"h5"</span>).mouseover();</span><br><span class="line">$(<span class="string">"h5"</span>).mouseout();</span><br><span class="line"></span><br><span class="line"><span class="comment">//unbind()解除两个事件的绑定</span></span><br><span class="line">$(<span class="string">"h5"</span>).unbind(<span class="string">"mouseover mouseout"</span>);</span><br><span class="line"><span class="comment">//unbind()解除所有事件的绑定（不传参，表示解除全部事件绑定）</span></span><br><span class="line">$(<span class="string">"h5"</span>).unbind();</span><br><span class="line"></span><br><span class="line"><span class="comment">//$(document).on(events,[selector],[data],fn)动态绑定事件</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">"click mouseover mouseout"</span>, $(<span class="string">"h5"</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"live没了"</span>);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h1 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h1><h2 id="什么是事件冒泡？"><a href="#什么是事件冒泡？" class="headerlink" title="什么是事件冒泡？"></a>什么是事件冒泡？</h2><p>事件的冒泡是指：父子元素同时监听同一个事件，当触发子元素的事件的时候， 同一个事件也被传递到了父元素的事件里去响应。</p><h3 id="演示-9"><a href="#演示-9" class="headerlink" title="演示"></a>演示</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JQuery操作事件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#ancestor</span> {</span></span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            border: black solid 2px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#descendant</span> {</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            border: blue solid 1px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//父元素div与子元素div绑定同一个事件，</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//当子元素div的单击事件被触发，</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//父元素div的单击事件也会被自动触发</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"div"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">"事件冒泡"</span>);</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"ancestor"</span>&gt;</span>one</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"descendant"</span>&gt;</span>two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h2 id="怎么解决事件冒泡？"><a href="#怎么解决事件冒泡？" class="headerlink" title="怎么解决事件冒泡？"></a>怎么解决事件冒泡？</h2><p>在子元素事件函数体内， return false; 可以阻止事件的冒泡传递。</p><h3 id="演示-10"><a href="#演示-10" class="headerlink" title="演示"></a>演示</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JQuery操作事件<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#ancestor</span> {</span></span><br><span class="line">            width: 300px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            border: black solid 2px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#descendant</span> {</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            border: blue solid 1px;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            <span class="comment">//与上面的是同样的代码，现在只需要加上return false</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//即可阻止事件冒泡的产生</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">"div"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">"事件冒泡"</span>);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"ancestor"</span>&gt;</span>one</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"descendant"</span>&gt;</span>two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h1 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h1><h2 id="什么是事件对象？"><a href="#什么是事件对象？" class="headerlink" title="什么是事件对象？"></a>什么是事件对象？</h2><p>事件对象， 是封装有触发的事件信息的一个 javascript 对象。</p><h2 id="如何获取事件对象？"><a href="#如何获取事件对象？" class="headerlink" title="如何获取事件对象？"></a>如何获取事件对象？</h2><p>在给元素绑定事件的时候， 在事件的 function( event ) 参数列表中添加一个参数， 这个参数名， 我们习惯取名为 event。这个 event 就是 javascript 传递参事件处理函数的事件对象。</p><h3 id="演示-11"><a href="#演示-11" class="headerlink" title="演示"></a>演示</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原生Js获取事件对象event</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">"div"</span>)[<span class="number">0</span>].onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(event);</span><br><span class="line">    };</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="comment">//JQuery获取事件对象event</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    $(<span class="string">"div:first"</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(event);</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h2 id="事件对象的作用"><a href="#事件对象的作用" class="headerlink" title="事件对象的作用"></a>事件对象的作用</h2><p>在我们使用<code>bind()</code>给一个元素一次性绑定多个事件时，我们该如何分别给这些事件设置单独的函数呢？这个时候，我们就需要用到事件对象event了。</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用bind()给一个元素一次性绑定多个事件</span></span><br><span class="line">$(<span class="string">"div:first"</span>).bind(<span class="string">"mouseover mouseout click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>{</span><br><span class="line">    <span class="comment">//若是mouseover事件，控制台打印mouseover</span></span><br><span class="line">    <span class="keyword">if</span> (event.type == <span class="string">"mouseover"</span>) {</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"mouseover"</span>);</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (event.type == <span class="string">"mouseout"</span>) {</span><br><span class="line">        <span class="comment">//若是mouseout事件，控制台打印mouseout</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"mouseout"</span>);</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (event.type == <span class="string">"click"</span>) {</span><br><span class="line">        <span class="comment">//若是click事件，控制台打印click</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"click"</span>);</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><h1 id="案例-图片放大跟随"><a href="#案例-图片放大跟随" class="headerlink" title="案例-图片放大跟随"></a>案例-图片放大跟随</h1><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>图片跟随<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        body {</span><br><span class="line">            text-align: center;</span><br><span class="line">        }</span><br><span class="line"><span class="css">        <span class="selector-id">#small</span> {</span></span><br><span class="line">            width: 20%;</span><br><span class="line">            height: 20%;</span><br><span class="line">        }</span><br><span class="line"><span class="css">        <span class="selector-id">#big</span> {</span></span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 300px;</span><br><span class="line">        }</span><br><span class="line"><span class="css">        <span class="selector-id">#showBig</span> {</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            display: none;</span><br><span class="line">        }</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-3.5.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">            $(<span class="string">"#small"</span>).bind(<span class="string">"mouseover mouseout mousemove"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>{</span></span><br><span class="line"><span class="javascript">                <span class="comment">//当鼠标到图片上时，添加大图片</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (event.type == <span class="string">"mouseover"</span>) {</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#showBig"</span>).show();</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="comment">//当鼠标移动时，大图片也要跟随鼠标移动</span></span></span><br><span class="line"><span class="javascript">                } <span class="keyword">else</span> <span class="keyword">if</span> (event.type == <span class="string">"mousemove"</span>) {</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#showBig"</span>).offset({</span></span><br><span class="line">                       left: event.pageX + 10,</span><br><span class="line">                       top: event.pageY + 10</span><br><span class="line">                    });</span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="comment">//当鼠标移出图片上时，大图片消失</span></span></span><br><span class="line"><span class="javascript">                } <span class="keyword">else</span> <span class="keyword">if</span> (event.type == <span class="string">"mouseout"</span>) {</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#showBig"</span>).hide();</span></span><br><span class="line">                }</span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"small"</span> <span class="attr">src</span>=<span class="string">"img/wallhaven-6oqzgq.jpg"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"showBig"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"big"</span> <span class="attr">src</span>=<span class="string">"img/wallhaven-6oqzgq.jpg"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JQuery概述&quot;&gt;&lt;a href=&quot;#JQuery概述&quot; class=&quot;headerlink&quot; title=&quot;JQuery概述&quot;&gt;&lt;/a&gt;JQuery概述&lt;/h1&gt;&lt;h2 id=&quot;什么是JQuery？&quot;&gt;&lt;a href=&quot;#什么是JQuery？&quot; class=&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>计网万字扫盲</title>
    <link href="http://example.com/2020/11/30/92_%E8%AE%A1%E7%BD%91%E4%B8%87%E5%AD%97%E6%89%AB%E7%9B%B2/"/>
    <id>http://example.com/2020/11/30/92_%E8%AE%A1%E7%BD%91%E4%B8%87%E5%AD%97%E6%89%AB%E7%9B%B2/</id>
    <published>2020-11-30T08:24:53.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="计算机网络概述"><a href="#计算机网络概述" class="headerlink" title="计算机网络概述"></a>计算机网络概述</h1><h2 id="基本术语"><a href="#基本术语" class="headerlink" title="基本术语"></a>基本术语</h2><ol><li><strong>结点（node）</strong>：网络中的结点可以是计算机、集线器、交换机或路由器等。</li><li><strong>链路（link）</strong>：从一个结点到另一个结点的一段物理线路，中间没有任何其他交点。</li><li><strong>主机（host）</strong>：连接在因特网上的计算机。</li><li><strong>ISP（Internet Service Provider）：</strong>因特网服务提供者（提供商）。</li><li><strong>IXP（Internet eXchange Point）：</strong>互联网交换点IXP的主要作用就是允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组。</li><li><strong>RFC（Requst For Comments）：</strong>意思是“请求评议”，包含了关于Internet几乎所有的重要的文字资料。</li><li><strong>广域网WAN（Wide Area Network）：</strong>任务是通过长距离运送主机发送的数据。</li><li><strong>城域网MAN（Metropolitan Area Network）：</strong>大型的计算机网络，MAN是改进LAN（局域网）中的传输介质，扩大局域网的范围。</li><li><strong>局域网LAN（Local Area Network）：</strong>地理分布范较小，一般为数百米至数公里。</li><li><strong>个人区域网PAN（Personal Area Network）：</strong>在个人工作的地方把属于个人使用的电子设备用无线技术连接起来的网络。</li><li><strong>分组（packet）：</strong>因特网中传送的数据单元，由首部header和数据段组成。分组又称为包，首部可称为包头。</li><li><strong>存储转发（store and forward）：</strong>路由器收到一个分组，先检查分组是否正确，并过滤掉冲突包错误。确定包正确后，取出目的地址，通过查找表找到想要发送的输出端口地址，然后将该包发送出去。</li><li><strong>带宽（bandwidth）：</strong>在计算机网络中，表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”。常用来表示网络的通信线路所能传送数据的能力，单位是“比特每秒”，记为b/s。</li><li><strong>吞吐量（throughput）：</strong>表示在单位时间内通过某个网络（或信道、接口）的数据量。吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网路。吞吐量受网络的带宽或网络的额定速率的限制。</li></ol><h2 id="重要知识点总结"><a href="#重要知识点总结" class="headerlink" title="重要知识点总结"></a>重要知识点总结</h2><ol><li><p>计算机网络（简称网络）把许多计算机连接所在一起，而互联网把许多网络连接在一起，是网络的网络。</p></li><li><p>小写字母 i 开头的 internet（互联网）是通用名词，它泛指由多个计算机网络相互连接而成的网络，在这些网络之间的通信协议（即通信规则）可以是任意的。大写字母 I 开头的 Internet（互联网）是专用名词，它指全球最大的，开放的，由众多网络相互连接而成的特定的互联网，并采用 TCP/IP 协议作为通信规则，其前身为 ARPANET 。</p></li><li><p>路由器是实现分组交换的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。分组交换采用存储转发技术，表示把一个报文（要发送的整块数据）分为几个分组后在进行传送。在发送报文之前，先把较长的报文划分成为一个个更小的等长数据段。在每个数据段的前面加上一些由必要的控制信息组成的首部后，就构成了一个分组。分组又称为包，分组是在互联网中传送的数据单元，正是由于分组的头部包含了诸如目的地址和源地址等重要控制信息，每一个分组才能在互联网中独立的选择传输路径，并正确地交付到分组传输的终点。</p></li><li><p>互联网按工作方式可划分为边缘部分和核心部分。主机在网络的边缘部分，其作用是进行信息处理。由大量网络和连接这些网络的路由器组成核心部分，其作用是提供连通性的交换。</p></li><li><p>计算机通信是计算机中进程（即运行着的程序）之间的通信。计算机网络采用的通信方式是客户-服务器方式（C/S方式）和对等连接方式（P2P方式）。</p></li><li><p>客户和服务器都是指通信中所涉及的应用进程。客户是服务请求方，服务器是服务提供方。</p></li><li><p>按照作用范围的不同，计算机网络分为广域网WAN、城域网MAN、局域网LAN、个人区域网PAN。</p></li><li><p>计算机网络最常用的性能指标是：速率、带宽、吞吐量、时延（发送时延、处理时延、排队时延）、时延带宽积、往返时间和信道利用率。</p></li><li><p>网络协议即协议，是为进行网络中的数据交换而建立的规则。计算机网络的各层以及其协议集合，称为网络的体系结构。</p></li><li><p>五层体系结构由应用层、运输层、网络层（网际层）、数据链路层、物理层组成。运输层最主要的协议是 TCP和 UDP 协议，网络层最重要的协议是 IP 协议。下面的内容会介绍计算机的五层体系结构：</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201130172230.png"></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;计算机网络概述&quot;&gt;&lt;a href=&quot;#计算机网络概述&quot; class=&quot;headerlink&quot; title=&quot;计算机网络概述&quot;&gt;&lt;/a&gt;计算机网络概述&lt;/h1&gt;&lt;h2 id=&quot;基本术语&quot;&gt;&lt;a href=&quot;#基本术语&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="计算机网络" scheme="http://example.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="计算机网络" scheme="http://example.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    <category term="基础" scheme="http://example.com/tags/%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>JDBC入门</title>
    <link href="http://example.com/2020/11/27/91_JDBC%E5%85%A5%E9%97%A8/"/>
    <id>http://example.com/2020/11/27/91_JDBC%E5%85%A5%E9%97%A8/</id>
    <published>2020-11-27T12:42:51.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JDBC概述"><a href="#JDBC概述" class="headerlink" title="JDBC概述"></a>JDBC概述</h1><p>JDBC 是 Java 访问数据库的标准规范，真正怎么操作数据库还需要具体的实现类，也就是数据库驱动。每个数据库厂商根据自家数据库的通信格式编写好自己数据库的驱动。所以我们只需要会调用 JDBC 接口中的方法即 可，数据库驱动由数据库厂商提供。</p><p>程序员如果要开发访问数据库的程序，只需要会调用 JDBC 接口中的方法即可，不用关注类是如何实现的。 </p><p> 使用同一套 Java 代码，进行少量的修改就可以访问其他 JDBC 支持的数据库。</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201127205158.png"></p><h1 id="JDBC相关开发包"><a href="#JDBC相关开发包" class="headerlink" title="JDBC相关开发包"></a>JDBC相关开发包</h1><ul><li><code>java.sql</code>：包含所有与JDBC访问数据库相关的接口和类。</li><li><code>javax.sql</code>：数据库扩展包，提供数据库额外的功能。如：连接池</li><li>数据库的驱动：由各大数据库厂商提供，需要额外去下载，是对 JDBC 接口实现的类</li></ul><h1 id="JDBC核心API"><a href="#JDBC核心API" class="headerlink" title="JDBC核心API"></a>JDBC核心API</h1><ul><li><code>DriverManager</code>类：管理和注册数据库驱动，得到数据库连接对象。</li><li><code>Connection</code>接口：一个连接对象，可用于创建<code>Statement</code>和<code>PreparedStatement</code>对象</li><li><code>Statement</code>接口：一个SQL语句对象，用于将SQL语句发送给数据库服务器。</li><li><code>PreparedStatement</code>接口：一个SQL语句对象，是Statement的子接口</li><li><code>ResultSet</code>接口：用于封装数据库查询的结果集，返回给客户端Java程序。</li></ul><h1 id="JDBC使用步骤"><a href="#JDBC使用步骤" class="headerlink" title="JDBC使用步骤"></a>JDBC使用步骤</h1><ol><li><p>Java 连接 MySQL 需要驱动包，官网下载地址为<a href="https://dev.mysql.com/downloads/connector/j/">MySQL驱动包官网下载</a><br>还是建议大家下载以前的版本</p></li><li><p>导入驱动Jar包到Java项目中</p><p><a href="https://blog.csdn.net/weixin_47330507/article/details/106192548"> JDBC驱动jar包的下载&amp;导入IDEA</a></p></li><li><p>加载和注册驱动</p><p>使用<code>Class.forName</code>(数据库驱动实现类)来加载和注册数据库驱动。</p></li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Human</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>{</span><br><span class="line">        <span class="comment">//注册数据库驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><blockquote><p>从 JDBC3 开始，目前已经普遍使用的版本。可以不用注册驱动而直接使用。Class.forName 这句话可以省略。</p></blockquote><h1 id="JDBC初级代码模板"><a href="#JDBC初级代码模板" class="headerlink" title="JDBC初级代码模板"></a>JDBC初级代码模板</h1><ul><li><p>在<code>mydatabase</code>数据库中创建一个<code>students</code>表格（执行DDL语句）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings("all")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            <span class="comment">//获取数据库连接对象</span></span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/mydatabase"</span>, <span class="string">"root"</span>, <span class="string">"helloWorld"</span>);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql = <span class="string">"CREATE TABLE students (id INT PRIMARY KEY AUTO_INCREMENT,NAME VARCHAR(20) NOT NULL,gender VARCHAR(2) NOT NULL,age INT NOT NULL,join_date DATE NOT NULL);"</span>;</span><br><span class="line">            <span class="comment">//获取执行SQL语句的对象</span></span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            <span class="keyword">int</span> count = state.executeUpdate(sql);</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            System.out.println(count);<span class="comment">//0</span></span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (state != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    state.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>向<code>students</code>表格中添加三条记录（执行DML语句）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/mydatabase"</span>, <span class="string">"root"</span>, <span class="string">"helloWorld"</span>);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql01 = <span class="string">"INSERT INTO students (NAME, gender, age, join_date) VALUES ('Jason', '男', 21, '1999-08-22');"</span>;</span><br><span class="line">            String sql02 = <span class="string">"INSERT INTO students (NAME, gender, age, join_date) VALUES ('Charlie', '女', 20, '1999-07-12');"</span>;</span><br><span class="line">            String sql03 = <span class="string">"INSERT INTO students (NAME, gender, age, join_date) VALUES ('June', '男', 23, '2020-01-01');"</span>;</span><br><span class="line">            <span class="comment">//获取执行SQL语句的对象</span></span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            <span class="keyword">int</span> count = state.executeUpdate(sql01);</span><br><span class="line">            count += state.executeUpdate(sql02);</span><br><span class="line">            count += state.executeUpdate(sql03);</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            System.out.println(count);<span class="comment">//3</span></span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (state != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    state.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>查询<code>students</code>表格中的所有记录（执行DQL语句）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            <span class="comment">//获取数据库连接对象</span></span><br><span class="line">            conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/mydatabase"</span>, <span class="string">"root"</span>, <span class="string">"helloWorld"</span>);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql = <span class="string">"select * from students"</span>;</span><br><span class="line">            <span class="comment">//获取执行SQL语句的对象</span></span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            result = state.executeQuery(sql);</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            <span class="keyword">while</span> (result.next()) {</span><br><span class="line">                <span class="keyword">int</span> id = result.getInt(<span class="string">"id"</span>);</span><br><span class="line">                String name = result.getString(<span class="number">2</span>);</span><br><span class="line">                String gender = result.getString(<span class="string">"gender"</span>);</span><br><span class="line">                <span class="keyword">int</span> age = result.getInt(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">                System.out.println(id + <span class="string">", "</span> + name + <span class="string">","</span> + gender + <span class="string">","</span> + age);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (result != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    result.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (state != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    state.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="步骤详解"><a href="#步骤详解" class="headerlink" title="步骤详解"></a>步骤详解</h2><h3 id="一：注册数据库驱动"><a href="#一：注册数据库驱动" class="headerlink" title="一：注册数据库驱动"></a>一：注册数据库驱动</h3><h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><p>告诉程序该使用哪一个数据库驱动</p><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><ul><li><p><code>Class.forName("com.mysql.jdbc.Driver")</code></p><p>通过查看源代码发现，使用此方法实际上是调用<code>com.mysql.jdbc.Driver</code>类中的静态代码块</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        DriverManager.registerDriver(<span class="keyword">new</span> Driver());</span><br><span class="line">    } <span class="keyword">catch</span> (SQLException E) {</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Can't register driver!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>通过<code>DriverManager</code>类调用静态方法<code>registerDriver()</code>来进行数据库驱动注册的。</p><p>在<code>mysql 5</code>版本之后的驱动jar都是可以直接省略注册驱动的。</p></li></ul><h3 id="二：获取数据库连接对象"><a href="#二：获取数据库连接对象" class="headerlink" title="二：获取数据库连接对象"></a>二：获取数据库连接对象</h3><h4 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h4><p>通过传入URL、用户名、密码，来获取数据库的连接。</p><h4 id="方法-1"><a href="#方法-1" class="headerlink" title="方法"></a>方法</h4><p><code>java.sql.DriverManager</code>类中的<code>static Connection getConnection(String url, String user, String password)</code></p><ul><li><p><code>user</code>：用户名</p></li><li><p><code>password</code>：密码</p></li><li><p><code>URL</code></p><p>格式：<code>jdbc:mysql://ip:端口/数据库名称</code></p><p>实例：<code>jdbc:mysql://localhost:3306/mydatabase</code></p><p>备注：如果连接的是本机<code>mysql</code>服务器，并且默认端口为3306，则URL可以简写为<code>jdbc:mysql:///mydatabase</code></p></li></ul><h3 id="三：定义sql语句"><a href="#三：定义sql语句" class="headerlink" title="三：定义sql语句"></a>三：定义sql语句</h3><p>定义一个字符串引用，用于接收字符串形式的SQL语句。</p><h4 id="占位符？"><a href="#占位符？" class="headerlink" title="占位符？"></a>占位符？</h4><p>使用占位符：<code>select * from user where username = ? and password = ?</code></p><p>给占位符赋值：setXxx(参数1, 参数2)</p><h3 id="四：获取执行sql语句对象"><a href="#四：获取执行sql语句对象" class="headerlink" title="四：获取执行sql语句对象"></a>四：获取执行sql语句对象</h3><h4 id="功能-2"><a href="#功能-2" class="headerlink" title="功能"></a>功能</h4><p>获取用于执行SQL语句的对象。</p><h4 id="方法-2"><a href="#方法-2" class="headerlink" title="方法"></a>方法</h4><ol><li><p><code>java.sql.Connection</code>接口中的<code>Statement createStatement()</code></p><p>创建一个Statement对象，用于向数据库发送SQL语句。</p></li><li><p><code>java.sql.Connection</code>接口中的<code>PreparedStatement prepareStatement(String sql)</code></p><p>创建用于向数据库发送参数化SQL语句的PreparedStatement对象。</p></li></ol><h3 id="五：执行sql语句"><a href="#五：执行sql语句" class="headerlink" title="五：执行sql语句"></a>五：执行sql语句</h3><h4 id="功能-3"><a href="#功能-3" class="headerlink" title="功能"></a>功能</h4><p>执行传入的String类型的SQL语句。</p><h4 id="方法-3"><a href="#方法-3" class="headerlink" title="方法"></a>方法</h4><ol><li><p><code>java.sql.Statement()</code>接口中的<code>int executeUpdate(String sql)</code></p><ul><li><p>作用</p><p>执行insert、delete、update和DDL语句。</p></li><li><p>返回值</p><p>影响的行数，可以通过这个影响的行数判断DML语句是否执行成功 返回值&gt;0的则执行成功，反之，则失败。</p></li></ul></li><li><p><code>java.sql.Statement()</code>接口的<code>ResultSet executeQuery(String sql)</code></p><ul><li><p>作用</p><p>执行给定的DQL语句，该语句返回单个ResultSet对象。</p></li><li><p>返回值</p><p>查询得到的结果集</p></li></ul></li><li><p><code>java.sql.PreparedStatement()</code>接口中的<code>int executeUpdate()</code></p><ul><li><p>作用</p><p>执行PreparedStatement对象中的SQL语句，该对象必须是SQL数据操作语言(DML)语句，如insert、update或delete;或者不返回任何内容的SQL语句，比如DDL语句。</p></li><li><p>返回值</p><p>影响的行数，可以通过这个影响的行数判断DML语句是否执行成功 返回值&gt;0的则执行成功，反之，则失败。</p></li></ul></li><li><p><code>java.sql.PreparedStatement()</code>接口中的<code>ResultSet executeQuery()</code></p><ul><li><p>作用</p><p>在这个PreparedStatement对象中执行SQL查询，并返回查询生成的ResultSet对象。</p></li><li><p>返回值</p><p>查询得到的结果集</p></li></ul></li></ol><h3 id="六：处理结果集"><a href="#六：处理结果集" class="headerlink" title="六：处理结果集"></a>六：处理结果集</h3><h4 id="功能-4"><a href="#功能-4" class="headerlink" title="功能"></a>功能</h4><ul><li><p><code>executeUpdate()</code>返回值为<code>int</code>类型</p><p>执行DDL语句，成功则返回0。执行DML语句，成功则返回影响的行数。我们需要利用这个返回得到的int类型的数值进行一些代码操作。</p></li><li><p><code>executeQuery</code>返回值为<code>ResultSet</code>类型。两种的处理方式不同。</p></li></ul><p>下面我只讲述一下关于<code>executeQuery()</code>返回的<code>ResultSet</code>类型的结果的处理。</p><h4 id="方法-4"><a href="#方法-4" class="headerlink" title="方法"></a>方法</h4><ol><li><p><code>java.sql.Result</code>接口的<code>boolean next()</code></p><p>将光标从当前位置向前移动一行，当光标移动到最后一行之后则返回true，其余返回false。</p></li><li><p><code>java.sql.Result</code>接口的<code>xxx getXxx(int columnIndex)</code></p><p>通过传入索引获取表中的字段值。如：getString()不管数据库中的数据类型是什么，都已String类型取出。其他方法也类似。并且jdbc下标是从1开始，而不是0。</p></li><li><p><code>java.sql.Result</code>接口的<code>xxx getXxx(String columnLabel)</code>（推荐这一种）</p><p>通过传入列名获取表中的值。注意这里的列名，是指我们查询之后得到的列名，这个列名可能会被起别名。</p></li></ol><h4 id="常用数据类型转换表"><a href="#常用数据类型转换表" class="headerlink" title="常用数据类型转换表"></a>常用数据类型转换表</h4><table><thead><tr><th>SQL类型</th><th>JDBC对应方法</th><th>返回类型</th></tr></thead><tbody><tr><td>BIT(1) bit(n)</td><td>getBoolean()</td><td>boolean</td></tr><tr><td>TINYINT</td><td>getByte()</td><td>byte</td></tr><tr><td>SMALLINT</td><td>getShort()</td><td>short</td></tr><tr><td>INT</td><td>getInt()</td><td>int</td></tr><tr><td>BIGINT</td><td>getLong()</td><td>long</td></tr><tr><td>CHAR, VARCHAR</td><td>getString()</td><td>String</td></tr><tr><td>Text(Clob) Blob</td><td>getClob getBlob()</td><td>Clob Blob</td></tr><tr><td>DATE</td><td>getDate()</td><td>java.sql.Date只代表日期</td></tr><tr><td>TIME</td><td>getTime()</td><td>java.sql.Time只表示时间</td></tr><tr><td>TIMESTAMP</td><td>getTimestamp()</td><td>java.sql.Timestamp同时有日期和时间</td></tr></tbody></table><h3 id="七：关闭资源"><a href="#七：关闭资源" class="headerlink" title="七：关闭资源"></a>七：关闭资源</h3><p>首先判断需要关闭的资源引用是否为<code>null</code>，如果不为<code>null</code>，则调用<code>close()</code>方法关闭资源。</p><h1 id="JDBC结合属性配置文件"><a href="#JDBC结合属性配置文件" class="headerlink" title="JDBC结合属性配置文件"></a>JDBC结合属性配置文件</h1><ul><li><p>配置文件</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">helloWorld</span></span><br><span class="line"><span class="attr">sql</span>=<span class="string">CREATE TABLE person (id INT PRIMARY KEY AUTO_INCREMENT,NAME VARCHAR(20),age INT,gender VARCHAR(2));</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>实例代码</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings("all")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定属性配置文件</span></span><br><span class="line">        ResourceBundle bundle = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        String driver = bundle.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url = bundle.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user = bundle.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password = bundle.getString(<span class="string">"password"</span>);</span><br><span class="line">        String sql = bundle.getString(<span class="string">"sql"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(url,user,password);</span><br><span class="line">            <span class="comment">//sql语句已经在配置文件中定义好了</span></span><br><span class="line">            <span class="comment">//获取执行SQL语句的对象</span></span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            <span class="keyword">int</span> count = state.executeUpdate(sql);</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            System.out.println(count);<span class="comment">//0</span></span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (state != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    state.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h1 id="JDBC案例：用户登录"><a href="#JDBC案例：用户登录" class="headerlink" title="JDBC案例：用户登录"></a>JDBC案例：用户登录</h1><ul><li><p>用户账号数据库<code>mydatabase.account</code></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">----+---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> <span class="keyword">user</span>          <span class="operator">|</span> password  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> fortune       <span class="operator">|</span> wswdy     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> dragon        <span class="operator">|</span> xhssf     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> dinosaur      <span class="operator">|</span> xxxxxxx   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> dragonPortal  <span class="operator">|</span> wswswswsw <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> questionnaire <span class="operator">|</span> ds.o2.cgi <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+---------------+-----------+</span></span><br></pre></td></tr></tbody></table></figure></li><li><p><code>jdbc.properties</code>配置文件</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">helloWorld</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>代码实现</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//初始化一个界面</span></span><br><span class="line">        Map&lt;String, String&gt; userLoginInfo = initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="keyword">boolean</span> loginSuccess = login(userLoginInfo);</span><br><span class="line">        System.out.println(loginSuccess ? <span class="string">"登录成功"</span> : <span class="string">"登录失败"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证用户名和密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userLoginInfo 用户输入的用户名和密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否登录成功的布尔值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(Map&lt;String, String&gt; userLoginInfo)</span> </span>{</span><br><span class="line">        <span class="comment">//登录成功的布尔标记</span></span><br><span class="line">        <span class="keyword">boolean</span> loginSuccess = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//取出用户输入的用户名和密码</span></span><br><span class="line">        String loginName = userLoginInfo.get(<span class="string">"userName"</span>);</span><br><span class="line">        String loginPwd = userLoginInfo.get(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中值</span></span><br><span class="line">        String driver = resource.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url = resource.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user = resource.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password = resource.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接对象</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql = <span class="string">"select * from account where user = '"</span>+ loginName +<span class="string">"' and password = '"</span>+ loginPwd +<span class="string">"';"</span>;</span><br><span class="line">            <span class="comment">//获取SQL语句执行对象</span></span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            result = state.executeQuery(sql);</span><br><span class="line">            <span class="comment">//判断是否登录成功</span></span><br><span class="line">            <span class="keyword">if</span> (result.next()) {</span><br><span class="line">                loginSuccess = <span class="keyword">true</span>;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (state != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    state.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> loginSuccess;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化用户界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户输入的用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title">initUI</span><span class="params">()</span> </span>{</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"请输入用户名："</span>);</span><br><span class="line">        String userName = scan.nextLine();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"请输入密码："</span>);</span><br><span class="line">        String password = scan.nextLine();</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; userLoginInfo = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">"userName"</span>,userName);</span><br><span class="line">        userLoginInfo.put(<span class="string">"password"</span>,password);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userLoginInfo;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>经过测试发现，上面的程序有如下的问题：</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201201130142.png"></p><p>当密码设置为<code>xxx' OR '1'='1</code>时，无论是否此用户，输入的密码是否正确，都会登录成功。此种现象被称为【SQL注入】</p><h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p>因为用户输入的信息中含有SQL语句的关键字，并且这些关键字参与SQL语句的编译过程，导致SQL语句的原意被扭曲，进行出现了SQL注入的问题。</p><h2 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h2><p>只要用户提供的信息不参与SQL语句e编译过程，即使信息中含有SQL语句的关键字，SQL注入问题也不会产生。为了达成上述目的，我们就需要使用到<code>java.sql.PreparedStatement</code>。下面我们先对于<code>java.sqlPreparedStatement</code>进行一个简短的说明：</p><ul><li><code>java.sql.PreparedStatement</code>接口是<code>java.sql.Statement</code>的子接口。</li><li><code>java.sql.PreparedStatement</code>是被称为预编译的数据库操作对象.</li><li><code>java.sql.PreparedStatement</code>的原理为：预先对SQL语句的框架进行编译，然后再给SQL语句传值。</li></ul><h1 id="JDBC案例：利用SQL注入，进行数据排序"><a href="#JDBC案例：利用SQL注入，进行数据排序" class="headerlink" title="JDBC案例：利用SQL注入，进行数据排序"></a>JDBC案例：利用SQL注入，进行数据排序</h1><ul><li><p>数据库<code>mydatabase.account</code></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">----+---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> <span class="keyword">user</span>          <span class="operator">|</span> password  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+---------------+-----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> fortune       <span class="operator">|</span> wswdy     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> dragon        <span class="operator">|</span> xhssf     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> dinosaur      <span class="operator">|</span> xxxxxxx   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> dragonPortal  <span class="operator">|</span> wswswswsw <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> questionnaire <span class="operator">|</span> ds.o2.cgi <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+---------------+-----------+</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>配置文件</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">helloWorld</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>实现代码</p></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//初始化</span></span><br><span class="line">        String keyWord = initUI();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//排序</span></span><br><span class="line">        order(keyWord);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户输入的命令对查询的数据进行排序</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keyWord 用户输入的命令</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">order</span><span class="params">(String keyWord)</span> </span>{</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle source = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中的值</span></span><br><span class="line">        String driver = source.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url = source.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user = source.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password = source.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement state = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql = <span class="string">"select * from account order by id "</span> + keyWord;</span><br><span class="line">            <span class="comment">//获取sql语句执行的对象</span></span><br><span class="line">            state = conn.createStatement();</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            result = state.executeQuery(sql);</span><br><span class="line">            <span class="comment">//打印查询结果集</span></span><br><span class="line">            <span class="keyword">while</span> (result.next()) {</span><br><span class="line">                <span class="keyword">int</span> id = result.getInt(<span class="number">1</span>);</span><br><span class="line">                String userName = result.getString(<span class="string">"user"</span>);</span><br><span class="line">                String userPwd = result.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">                System.out.println(id + <span class="string">", "</span> + userName + <span class="string">", "</span> + userPwd);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化用户界面,接收用户输入的命令</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户输入的命令</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">initUI</span><span class="params">()</span> </span>{</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"输入命令(desc或asc)："</span>);</span><br><span class="line">        String keyWord = scan.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> keyWord;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="JDBC案例-用户登录-防SQL注入PreparedStatement"><a href="#JDBC案例-用户登录-防SQL注入PreparedStatement" class="headerlink" title="JDBC案例:用户登录(防SQL注入PreparedStatement)"></a>JDBC案例:用户登录(防SQL注入PreparedStatement)</h1><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//初始化一个界面</span></span><br><span class="line">        Map&lt;String, String&gt; userLoginInfo = initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="keyword">boolean</span> loginSuccess = login(userLoginInfo);</span><br><span class="line">        System.out.println(loginSuccess ? <span class="string">"登录成功"</span> : <span class="string">"登录失败"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 验证用户名和密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userLoginInfo 用户输入的用户名和密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是否登录成功的布尔值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(Map&lt;String, String&gt; userLoginInfo)</span> </span>{</span><br><span class="line">        <span class="comment">//登录成功的布尔标记</span></span><br><span class="line">        <span class="keyword">boolean</span> loginSuccess = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//取出用户输入的用户名和密码</span></span><br><span class="line">        String loginName = userLoginInfo.get(<span class="string">"userName"</span>);</span><br><span class="line">        String loginPwd = userLoginInfo.get(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中值</span></span><br><span class="line">        String driver = resource.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url = resource.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user = resource.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password = resource.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pState = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接对象</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">//定义SQL语句，使用占位符</span></span><br><span class="line">            String sql = <span class="string">"select * from account where user = ? and password = ?;"</span>;</span><br><span class="line">            <span class="comment">//获取SQL语句预编译的执行对象（将SQL语句提前发送给DBMS进行预编译）</span></span><br><span class="line">            pState = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//给占位符赋值(JDBC的index都是从1开始)</span></span><br><span class="line">            pState.setString(<span class="number">1</span>,loginName);</span><br><span class="line">            pState.setString(<span class="number">2</span>,loginPwd);</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            result = pState.executeQuery();</span><br><span class="line">            <span class="comment">//判断是否登录成功</span></span><br><span class="line">            <span class="keyword">if</span> (result.next()) {</span><br><span class="line">                loginSuccess = <span class="keyword">true</span>;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (pState != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    pState.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> loginSuccess;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化用户界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户输入的用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title">initUI</span><span class="params">()</span> </span>{</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"请输入用户名："</span>);</span><br><span class="line">        String userName = scan.nextLine();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"请输入密码："</span>);</span><br><span class="line">        String password = scan.nextLine();</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; userLoginInfo = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">"userName"</span>,userName);</span><br><span class="line">        userLoginInfo.put(<span class="string">"password"</span>,password);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userLoginInfo;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="Statement对比PreparedStatement"><a href="#Statement对比PreparedStatement" class="headerlink" title="Statement对比PreparedStatement"></a>Statement对比PreparedStatement</h1><ol><li>Statement存在SQL注入问题，而PreparedStatement解决了SQL注入问题。</li><li>Statement效率低于PreparedStatement。因为Statement是编译一次执行一次，而PreparedStatement是编译一次，可以执行N次。</li><li>Statement安全性也低于PreparedStatement。因为PreparedStatement会再编译阶段进行安全检查。</li><li>我们工作中大多数使用PreparedStatement，但遇到业务方面要求需要进行SQL语句拼接、SQL注入时，就必须使用Statement了。</li></ol><h1 id="JDBC代码模板PreparedStatement版"><a href="#JDBC代码模板PreparedStatement版" class="headerlink" title="JDBC代码模板PreparedStatement版"></a>JDBC代码模板PreparedStatement版</h1><ul><li><p>配置文件</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line"><span class="attr">user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">helloWorld</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>在<code>mydatabase</code>中创建一个<code>person</code>表格</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用PreparedStatement版的JDBC代码模板</span></span><br><span class="line"><span class="comment"> * 创建一个person表格</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中的信息</span></span><br><span class="line">        String driver= resource.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url= resource.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user= resource.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password=resource.getString(<span class="string">"password"</span>);</span><br><span class="line">        </span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql = <span class="string">"CREATE TABLE person (id INT PRIMARY KEY AUTO_INCREMENT,NAME VARCHAR(20) NOT NULL,age INT);"</span>;</span><br><span class="line">            <span class="comment">//获取SQL语句预编译的执行对象</span></span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            <span class="keyword">int</span> count = ps.executeUpdate();</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            System.out.println(count);<span class="comment">//0</span></span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (ps != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    ps.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">            <span class="keyword">try</span> {</span><br><span class="line">                conn.close();</span><br><span class="line">            } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>向<code>person</code>表格中插入三条记录</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBC模板preparedStatement版</span></span><br><span class="line"><span class="comment"> * 向`person`表格中插入三条记录</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中的信息</span></span><br><span class="line">        String driver = resource.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url = resource.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user = resource.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password = resource.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps01 = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps02 = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps03 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(url,user,password);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql01 = <span class="string">"INSERT INTO person (NAME,age) VALUES (?,?);"</span>;</span><br><span class="line">            String sql02 = <span class="string">"INSERT INTO person (NAME,age) VALUES (?,?);"</span>;</span><br><span class="line">            String sql03 = <span class="string">"INSERT INTO person (NAME,age) VALUES (?,?);"</span>;</span><br><span class="line">            <span class="comment">//获取SQL语句的预编译执行对象</span></span><br><span class="line">            ps01 = conn.prepareStatement(sql01);</span><br><span class="line">            ps02 = conn.prepareStatement(sql02);</span><br><span class="line">            ps03 = conn.prepareStatement(sql03);</span><br><span class="line">            <span class="comment">//给占位符赋值</span></span><br><span class="line">            ps01.setString(<span class="number">1</span>,<span class="string">"one"</span>);</span><br><span class="line">            ps01.setInt(<span class="number">2</span>,<span class="number">21</span>);</span><br><span class="line">            ps02.setString(<span class="number">1</span>,<span class="string">"two"</span>);</span><br><span class="line">            ps02.setInt(<span class="number">2</span>,<span class="number">22</span>);</span><br><span class="line">            ps03.setString(<span class="number">1</span>,<span class="string">"three"</span>);</span><br><span class="line">            ps03.setInt(<span class="number">2</span>,<span class="number">23</span>);</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">            count += ps01.executeUpdate();</span><br><span class="line">            count += ps02.executeUpdate();</span><br><span class="line">            count += ps03.executeUpdate();</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">3</span>) {</span><br><span class="line">                System.out.println(<span class="string">"三条记录插入成功"</span>);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                System.out.println(<span class="string">"三条记录插入失败"</span>);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span> (ps01 != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    ps01.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (ps02 != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    ps02.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (ps03 != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    ps03.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>删除<code>person</code>表格中的一条记录</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中的信息</span></span><br><span class="line">        String driver=resource.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url=resource.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user=resource.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password=resource.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(url,user,password);</span><br><span class="line">            <span class="comment">//定义SQL语句</span></span><br><span class="line">            String sql = <span class="string">"DELETE from person WHERE id = ?;"</span>;</span><br><span class="line">            <span class="comment">//获取SQL语句的预编译执行对象</span></span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//给占位符赋值</span></span><br><span class="line">            ps.setInt(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            <span class="keyword">int</span> count = ps.executeUpdate();</span><br><span class="line">            <span class="comment">//处理结果</span></span><br><span class="line">            System.out.println(count);<span class="comment">//1</span></span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">            <span class="keyword">if</span> (ps != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    ps.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="keyword">null</span>) {</span><br><span class="line">                <span class="keyword">try</span> {</span><br><span class="line">                    conn.close();</span><br><span class="line">                } <span class="keyword">catch</span> (SQLException throwables) {</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>查询<code>person</code>表格中的指定列名记录</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.liboshuai.study;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//使用资源绑定器绑定配置文件</span></span><br><span class="line">        ResourceBundle resource = ResourceBundle.getBundle(<span class="string">"jdbc"</span>);</span><br><span class="line">        <span class="comment">//获取配置文件中的信息</span></span><br><span class="line">        String driver=resource.getString(<span class="string">"driver"</span>);</span><br><span class="line">        String url=resource.getString(<span class="string">"url"</span>);</span><br><span class="line">        String user=resource.getString(<span class="string">"user"</span>);</span><br><span class="line">        String password=resource.getString(<span class="string">"password"</span>);</span><br><span class="line"></span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="comment">//注册数据库驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//获取数据库连接</span></span><br><span class="line">            conn = DriverManager.getConnection(url,user,password);</span><br><span class="line">            <span class="comment">//定义SQL</span></span><br><span class="line">            String sql = <span class="string">"SELECT * FROM person WHERE NAME = ?;"</span>;</span><br><span class="line">            <span class="comment">//获取SQL语句的预编译执行对象</span></span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//给占位符赋值</span></span><br><span class="line">            ps.setString(<span class="number">1</span>,<span class="string">"one"</span>);</span><br><span class="line">            <span class="comment">//执行SQL语句</span></span><br><span class="line">            result = ps.executeQuery();</span><br><span class="line">            <span class="comment">//打印查询结果集</span></span><br><span class="line">            <span class="keyword">while</span> (result.next()) {</span><br><span class="line">                String name = result.getString(<span class="string">"name"</span>);</span><br><span class="line">                <span class="keyword">int</span> age = result.getInt(<span class="string">"age"</span>);</span><br><span class="line"></span><br><span class="line">                System.out.println(name + <span class="string">", "</span> + age);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;JDBC概述&quot;&gt;&lt;a href=&quot;#JDBC概述&quot; class=&quot;headerlink&quot; title=&quot;JDBC概述&quot;&gt;&lt;/a&gt;JDBC概述&lt;/h1&gt;&lt;p&gt;JDBC 是 Java 访问数据库的标准规范，真正怎么操作数据库还需要具体的实现类，也就是数据库驱动。每个数</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>CentOS安装MySQL详解</title>
    <link href="http://example.com/2020/11/27/90_CentOS%E5%AE%89%E8%A3%85MySQL%E8%AF%A6%E8%A7%A3/"/>
    <id>http://example.com/2020/11/27/90_CentOS%E5%AE%89%E8%A3%85MySQL%E8%AF%A6%E8%A7%A3/</id>
    <published>2020-11-26T17:01:57.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>最近某云搞活动，买了个服务器作为平时学习和测试用，新机器啥也没有，一些常用软件的安装是免不了的，于是乎想着把安装过程都详细记录下来，一是做个备忘，二是给有需要的同学作个参考。</p><p>Linux上安装软件常见的几种方式：</p><ul><li>源码编译</li><li>压缩包解压（一般为tar.gz）</li><li>编译好的安装包（RPM、DPKG等）</li><li>在线安装（YUM、APT等）</li></ul><p>以上几种方式便捷性依次增加，但通用性依次下降，比如直接下载压缩包进行解压，这种方式一般需要自己做一些额外的配置工作，但只要掌握了方法，各个平台基本都适用，YUM虽然简单，但是平台受限，网络受限，必要的时候还需要增加一些特定YUM源。</p><p>几种安装方式最好都能掌握，原则上能用简单的就用简单的：YUM&gt;RPM&gt;tar.gz&gt;源码</p><p>本文是介绍MySQL在CentOS上的安装，主要步骤都是参考了MySQL官方文档：<a href="https://dev.mysql.com/doc/refman/5.7/en/installing.html">https://dev.mysql.com/doc/refman/5.7/en/installing.html</a></p><p>为了测试不同安装方式，反复折腾了好几次，装了删，删了装，每个步骤都是亲测成功的，每条命令都是亲自执行过的，可以放心使用</p><p>咱们闲话少说，书归正传（这闲话就不少了…）</p><h2 id="一、YUM"><a href="#一、YUM" class="headerlink" title="一、YUM"></a>一、YUM</h2><h4 id="0、删除已安装的MySQL"><a href="#0、删除已安装的MySQL" class="headerlink" title="0、删除已安装的MySQL"></a>0、删除已安装的MySQL</h4><h5 id="检查MariaDB"><a href="#检查MariaDB" class="headerlink" title="检查MariaDB"></a>检查MariaDB</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; rpm -qa|grep mariadb</span><br><span class="line">mariadb-server-5.5.60-1.el7_5.x86_64</span><br><span class="line">mariadb-5.5.60-1.el7_5.x86_64</span><br><span class="line">mariadb-libs-5.5.60-1.el7_5.x86_64</span><br></pre></td></tr></tbody></table></figure><h5 id="删除mariadb"><a href="#删除mariadb" class="headerlink" title="删除mariadb"></a>删除mariadb</h5><p>如果不存在（上面检查结果返回空）则跳过步骤</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; rpm -e --nodeps mariadb-server</span><br><span class="line">shell&gt; rpm -e --nodeps mariadb</span><br><span class="line">shell&gt; rpm -e --nodeps mariadb-libs</span><br></pre></td></tr></tbody></table></figure><p><em>其实yum方式安装是可以不用删除mariadb的，安装MySQL会覆盖掉之前已存在的mariadb</em></p><h5 id="检查MySQL"><a href="#检查MySQL" class="headerlink" title="检查MySQL"></a>检查MySQL</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; rpm -qa|grep mysql</span><br></pre></td></tr></tbody></table></figure><h5 id="删除MySQL"><a href="#删除MySQL" class="headerlink" title="删除MySQL"></a>删除MySQL</h5><p>如果不存在（上面检查结果返回空）则跳过步骤</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; rpm -e --nodeps xxx</span><br></pre></td></tr></tbody></table></figure><h3 id="1、添加MySQL-Yum-Repository"><a href="#1、添加MySQL-Yum-Repository" class="headerlink" title="1、添加MySQL Yum Repository"></a>1、添加MySQL Yum Repository</h3><blockquote><p>从CentOS 7开始，MariaDB成为Yum源中默认的数据库安装包。也就是说在CentOS 7及以上的系统中使用yum安装MySQL默认安装的会是MariaDB（MySQL的一个分支）。如果想安装官方MySQL版本，需要使用MySQL提供的Yum源。</p></blockquote><h5 id="下载MySQL源"><a href="#下载MySQL源" class="headerlink" title="下载MySQL源"></a>下载MySQL源</h5><p>官网地址：<a href="https://dev.mysql.com/downloads/repo/yum/">https://dev.mysql.com/downloads/repo/yum/</a></p><p>查看系统版本：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; cat /etc/redhat-release</span><br><span class="line">CentOS Linux release 7.6.1810 (Core)</span><br></pre></td></tr></tbody></table></figure><p>选择对应的版本进行下载，例如CentOS 7当前在官网查看最新Yum源的下载地址为：<br><a href="https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm">https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</a></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></tbody></table></figure><h5 id="安装MySQL源"><a href="#安装MySQL源" class="headerlink" title="安装MySQL源"></a>安装MySQL源</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo rpm -Uvh platform-and-version-specific-package-name.rpm</span><br></pre></td></tr></tbody></table></figure><p>例如CentOS7当前最新MySQL源安装：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo rpm -Uvh mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></tbody></table></figure><h5 id="检查是否安装成功"><a href="#检查是否安装成功" class="headerlink" title="检查是否安装成功"></a>检查是否安装成功</h5><p>执行成功后会在<code>/etc/yum.repos.d/</code>目录下生成两个repo文件<code>mysql-community.repo</code>及 <code>mysql-community-source.repo</code></p><p>并且通过<code>yum repolist</code>可以看到mysql相关资源</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum repolist enabled | grep "mysql.*-community.*"</span><br><span class="line">!mysql-connectors-community/x86_64 MySQL Connectors Community                108</span><br><span class="line">!mysql-tools-community/x86_64      MySQL Tools Community                      90</span><br><span class="line">!mysql80-community/x86_64          MySQL 8.0 Community Server                113</span><br></pre></td></tr></tbody></table></figure><h3 id="2、选择MySQL版本"><a href="#2、选择MySQL版本" class="headerlink" title="2、选择MySQL版本"></a>2、选择MySQL版本</h3><p>使用MySQL Yum Repository安装MySQL，默认会选择当前最新的稳定版本，例如通过上面的MySQL源进行安装的话，默安装会选择MySQL 8.0版本，如果就是想要安装该版本，可以直接跳过此步骤，如果不是，比如我这里希望安装MySQL5.7版本，就需要“切换一下版本”：</p><h5 id="查看当前MySQL-Yum-Repository中所有MySQL版本（每个版本在不同的子仓库中）"><a href="#查看当前MySQL-Yum-Repository中所有MySQL版本（每个版本在不同的子仓库中）" class="headerlink" title="查看当前MySQL Yum Repository中所有MySQL版本（每个版本在不同的子仓库中）"></a>查看当前MySQL Yum Repository中所有MySQL版本（每个版本在不同的子仓库中）</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum repolist all | grep mysql</span><br></pre></td></tr></tbody></table></figure><h5 id="切换版本"><a href="#切换版本" class="headerlink" title="切换版本"></a>切换版本</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo yum-config-manager --disable mysql80-community</span><br><span class="line">shell&gt; sudo yum-config-manager --enable mysql57-community</span><br></pre></td></tr></tbody></table></figure><p>除了使用yum-config-manager之外，还可以直接编辑<code>/etc/yum.repos.d/mysql-community.repo</code>文件</p><p>enabled=0禁用</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[mysql80-community]</span><br><span class="line">name=MySQL 8.0 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/$basearch/</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></tbody></table></figure><p>enabled=1启用</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Enable to use MySQL 5.7</span><br><span class="line">[mysql57-community]</span><br><span class="line">name=MySQL 5.7 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></tbody></table></figure><h5 id="检查当前启用的MySQL仓库"><a href="#检查当前启用的MySQL仓库" class="headerlink" title="检查当前启用的MySQL仓库"></a>检查当前启用的MySQL仓库</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum repolist enabled | grep mysql</span><br></pre></td></tr></tbody></table></figure><p><em>如果同时启用了多个仓库，安装时会选择最新版本</em></p><h3 id="3、安装MySQL"><a href="#3、安装MySQL" class="headerlink" title="3、安装MySQL"></a>3、安装MySQL</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo yum install mysql-community-server</span><br></pre></td></tr></tbody></table></figure><p>该命令会安装MySQL服务器 (mysql-community-server) 及其所需的依赖、相关组件，包括mysql-community-client、mysql-community-common、mysql-community-libs等</p><p>如果带宽不够，这个步骤时间会比较长，请耐心等待~</p><h3 id="4、启动MySQL"><a href="#4、启动MySQL" class="headerlink" title="4、启动MySQL"></a>4、启动MySQL</h3><h5 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo systemctl start mysqld.service</span><br></pre></td></tr></tbody></table></figure><p>CentOS 6：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysqld start</span><br></pre></td></tr></tbody></table></figure><h5 id="查看状态"><a href="#查看状态" class="headerlink" title="查看状态"></a>查看状态</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo systemctl status mysqld.service</span><br></pre></td></tr></tbody></table></figure><p>CentOS 6：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysqld status</span><br></pre></td></tr></tbody></table></figure><h5 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo systemctl stop mysqld.service</span><br></pre></td></tr></tbody></table></figure><p>CentOS 6：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysqld stop</span><br></pre></td></tr></tbody></table></figure><h5 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo systemctl restart mysqld.service</span><br></pre></td></tr></tbody></table></figure><p>CentOS 6：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo service mysqld restart</span><br></pre></td></tr></tbody></table></figure><h3 id="5、修改密码"><a href="#5、修改密码" class="headerlink" title="5、修改密码"></a>5、修改密码</h3><h5 id="初始密码"><a href="#初始密码" class="headerlink" title="初始密码"></a>初始密码</h5><p>MySQL第一次启动后会创建超级管理员账号<code>root@localhost</code>，初始密码存储在日志文件中：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; sudo grep 'temporary password' /var/log/mysqld.log</span><br></pre></td></tr></tbody></table></figure><h5 id="修改默认密码"><a href="#修改默认密码" class="headerlink" title="修改默认密码"></a>修改默认密码</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; mysql -uroot -p</span><br><span class="line">mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';</span><br><span class="line">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br></pre></td></tr></tbody></table></figure><p>出现上面的提示是因为密码太简单了，解决方法如下：</p><ol><li>使用复杂密码，MySQL默认的密码策略是要包含数字、字母及特殊字符；</li><li>如果只是测试用，不想用那么复杂的密码，可以修改默认策略，即<code>validate_password_policy</code>（以及<code>validate_password_length</code>等相关参数），使其支持简单密码的设定，具体方法可以自行百度；</li><li>修改配置文件<code>/etc/my.cnf</code>，添加<code>validate_password=OFF</code>，保存并重启MySQL</li></ol><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></tbody></table></figure><h3 id="6、允许root远程访问"><a href="#6、允许root远程访问" class="headerlink" title="6、允许root远程访问"></a>6、允许root远程访问</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></tbody></table></figure><h3 id="7、设置编码为utf8"><a href="#7、设置编码为utf8" class="headerlink" title="7、设置编码为utf8"></a>7、设置编码为utf8</h3><h5 id="查看编码"><a href="#查看编码" class="headerlink" title="查看编码"></a>查看编码</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW VARIABLES LIKE 'character%';</span><br></pre></td></tr></tbody></table></figure><h5 id="设置编码"><a href="#设置编码" class="headerlink" title="设置编码"></a>设置编码</h5><p>编辑/etc/my.cnf，[mysqld]节点增加以下代码：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character_set_server=utf8</span><br><span class="line">init-connect='SET NAMES utf8'</span><br></pre></td></tr></tbody></table></figure><h3 id="8、设置开机启动"><a href="#8、设置开机启动" class="headerlink" title="8、设置开机启动"></a>8、设置开机启动</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; systemctl enable mysqld</span><br><span class="line">shell&gt; systemctl daemon-reload</span><br></pre></td></tr></tbody></table></figure><h2 id="二、RPM"><a href="#二、RPM" class="headerlink" title="二、RPM"></a>二、RPM</h2><blockquote><p>除安装过程外，其他步骤和yum方式安装相同，不再赘述</p></blockquote><h3 id="0、删除已旧版本"><a href="#0、删除已旧版本" class="headerlink" title="0、删除已旧版本"></a>0、删除已旧版本</h3><p>略</p><h3 id="1、下载MySQL安装包"><a href="#1、下载MySQL安装包" class="headerlink" title="1、下载MySQL安装包"></a>1、下载MySQL安装包</h3><p>下载地址：<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p><p>选择对应的版本：</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201130101014.png"></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar</span><br></pre></td></tr></tbody></table></figure><h3 id="2、安装MySQL"><a href="#2、安装MySQL" class="headerlink" title="2、安装MySQL"></a>2、安装MySQL</h3><h5 id="解压（解打包）"><a href="#解压（解打包）" class="headerlink" title="解压（解打包）"></a>解压（解打包）</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line">tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar</span><br><span class="line">mysql-community-embedded-devel-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-libs-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-embedded-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-test-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-embedded-compat-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-common-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-devel-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-client-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-server-5.7.26-1.el7.x86_64.rpm</span><br></pre></td></tr></tbody></table></figure><p>我们主要安装的是这四个（如果有需要也可以一并安装其它的）：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql-community-libs-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-common-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-client-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-server-5.7.26-1.el7.x86_64.rpm</span><br></pre></td></tr></tbody></table></figure><p>如果不想下载rpm-bundle，官网也提供单独的rpm下载链接</p><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>各rpm包是有依赖关系的，所以需要按照一定顺序进行安装，安装期间如果提示缺少哪些依赖也要先安装相应的包：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">shell&gt; rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">shell&gt; rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm</span><br><span class="line">shell&gt; rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm</span><br></pre></td></tr></tbody></table></figure><p>还有一种简单的方式，可以自动处理各个包之间的依赖关系并自动下载缺少的依赖：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum install mysql-community-{server,client,common,libs}-*</span><br></pre></td></tr></tbody></table></figure><p><em>注意：上面的<code>yum install</code>命令需要在tar解压之后的各个rpm包所在目录内执行，否则就变成yum方式安装了，需要配置MySQL的yum源并且速度很慢，还要当前机器支持外网访问</em></p><h3 id="3、设置"><a href="#3、设置" class="headerlink" title="3、设置"></a>3、设置</h3><p>略</p><h2 id="三、tar-gz"><a href="#三、tar-gz" class="headerlink" title="三、tar.gz"></a>三、tar.gz</h2><h3 id="0、删除旧版本"><a href="#0、删除旧版本" class="headerlink" title="0、删除旧版本"></a>0、删除旧版本</h3><p>略</p><h3 id="1、下载"><a href="#1、下载" class="headerlink" title="1、下载"></a>1、下载</h3><p>下载地址：<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloa…</a></p><p>选择对应的版本：<br><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201130100824.png"></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz</span><br></pre></td></tr></tbody></table></figure><h3 id="2、安装-amp-配置："><a href="#2、安装-amp-配置：" class="headerlink" title="2、安装&amp;配置："></a>2、安装&amp;配置：</h3><h5 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h5><p>MySQL依赖libaio库，如果没有先安装一下：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum install libaio</span><br></pre></td></tr></tbody></table></figure><h5 id="创建mysql用户"><a href="#创建mysql用户" class="headerlink" title="创建mysql用户"></a>创建mysql用户</h5><p>不需要登录的一个系统账号，启动MySQL服务时会使用该账号</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; groupadd mysql</span><br><span class="line">shell&gt; useradd -r -g mysql -s /bin/false mysql</span><br></pre></td></tr></tbody></table></figure><h5 id="解压并创建链接"><a href="#解压并创建链接" class="headerlink" title="解压并创建链接"></a>解压并创建链接</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; cd /usr/local</span><br><span class="line">shell&gt; tar zxvf /path/to/mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz</span><br><span class="line">shell&gt; ln -s mysql-5.7.26-linux-glibc2.12-x86_64/ mysql</span><br></pre></td></tr></tbody></table></figure><h5 id="创建mysql-files目录"><a href="#创建mysql-files目录" class="headerlink" title="创建mysql-files目录"></a>创建mysql-files目录</h5><p>这一步并不是必须的，可以设置secure_file_priv的值指向该目录（用于限制数据导入导出操作的目录）</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; cd mysql</span><br><span class="line">shell&gt; mkdir mysql-files</span><br><span class="line">shell&gt; chown mysql:mysql mysql-files</span><br><span class="line">shell&gt; chmod 750 mysql-files</span><br></pre></td></tr></tbody></table></figure><h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; bin/mysqld --initialize --user=mysql</span><br></pre></td></tr></tbody></table></figure><p>如果初始化时报错如下：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory</span><br></pre></td></tr></tbody></table></figure><p>是因为libnuma没有安装（或者默认安装的是32位），我们这里需要64位的：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; yum install numactl.x86_64</span><br></pre></td></tr></tbody></table></figure><p>执行完后重新初始化即可<br>初始化成功后返回结果中有一行包含初始密码，第一次登录时要用到它：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A temporary password is generated for root@localhost: 8M0ary878s*U</span><br></pre></td></tr></tbody></table></figure><h5 id="启用SSL（非必须）"><a href="#启用SSL（非必须）" class="headerlink" title="启用SSL（非必须）"></a>启用SSL（非必须）</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; bin/mysql_ssl_rsa_setup</span><br></pre></td></tr></tbody></table></figure><h5 id="启动-1"><a href="#启动-1" class="headerlink" title="启动"></a>启动</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; bin/mysqld_safe --user=mysql &amp;</span><br></pre></td></tr></tbody></table></figure><p>查看进程可以看到一些默认参数，可以在配置文件中修改这些参数</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; ps -ef | grep mysql</span><br><span class="line">root     14604 12719  0 00:03 pts/0    00:00:00 /bin/sh bin/mysqld_safe --user=mysql</span><br><span class="line">mysql    14674 14604  0 00:03 pts/0    00:00:00 /usr/local/mysql/bin/mysqld --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data --plugin-dir=/usr/local/mysql/lib/plugin --user=mysql --log-error=VM_2_24_centos.err --pid-file=VM_2_24_centos.pid</span><br></pre></td></tr></tbody></table></figure><h5 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h5><p>避免每次执行mysql命令都要加上路径，在<code>/etc/profile</code>中添加：</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/mysql/bin</span><br></pre></td></tr></tbody></table></figure><h5 id="设置为服务"><a href="#设置为服务" class="headerlink" title="设置为服务"></a>设置为服务</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; cp support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">shell&gt; service mysqld start|stop|restart|status</span><br></pre></td></tr></tbody></table></figure><h5 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h5><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&gt; chkconfig --add mysqld</span><br><span class="line">shell&gt; chkconfig --list mysqld</span><br><span class="line">mysqld             0:关    1:关    2:开    3:开    4:开    5:开    6:关</span><br></pre></td></tr></tbody></table></figure><p><em>其他配置与yum、rpm相同，不再赘述</em></p><h2 id="四、源码安装"><a href="#四、源码安装" class="headerlink" title="四、源码安装"></a>四、源码安装</h2><p>就别费这个劲了吧…</p><h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>我们不是Linux运维专家，也不是MySQL专家，生在这个年代也不知算是幸福还是不幸，线上的环境已经越来越少有人（主要指平时写代码的人）手动去搞这些数据库、中间件的安装配置了，为什么呢？因为各种云产品实在是太方便了呀，一般的公司也不会差这几个钱，既方便又稳定，何乐而不为呢~但是我们自己搞一搞用于自己测试还是必要的，而且还有不少公司的开发环境、测试环境偶尔还是需要手动搞一下的，当然，还有那些个自己搞机房的巨头们。</p><p>那我们既然不是专家，上面所写的内容如果有纰漏也是在所难免的，如果被看到了还希望能够及时批评指正~</p><blockquote><p>转载至：<a href="https://segmentfault.com/a/1190000019507071">CentOS安装MySQL详解_个人文章 - SegmentFault 思否</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;引言&quot;&gt;&lt;a href=&quot;#引言&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;引言&lt;/h2&gt;&lt;p&gt;最近某云搞活动，买了个服务器作为平时学习和测试用，新机器啥也没有，一些常用软件的安装是免不了的，于是乎想着把安装过程都详细记录下来，一是做个</summary>
      
    
    
    
    <category term="Linux" scheme="http://example.com/categories/Linux/"/>
    
    <category term="MySQL" scheme="http://example.com/categories/Linux/MySQL/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
    <category term="安装" scheme="http://example.com/tags/%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>MySQL插入记录出现Incorrent string value错误</title>
    <link href="http://example.com/2020/11/26/89_MySQL%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95%E5%87%BA%E7%8E%B0Incorrent-string-value%E9%94%99%E8%AF%AF/"/>
    <id>http://example.com/2020/11/26/89_MySQL%E6%8F%92%E5%85%A5%E8%AE%B0%E5%BD%95%E5%87%BA%E7%8E%B0Incorrent-string-value%E9%94%99%E8%AF%AF/</id>
    <published>2020-11-26T03:14:49.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL插入记录出现Incorrent-string-value错误"><a href="#MySQL插入记录出现Incorrent-string-value错误" class="headerlink" title="MySQL插入记录出现Incorrent string value错误"></a>MySQL插入记录出现Incorrent string value错误</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>你是否遇到过类似以下错误？</p><p>java.sql.SQLException: Incorrect string value: ‘\xF0\x9F\x92\x9C’ for column ‘content’ at row 1.</p><p>产生这种异常的原因在于，mysql中的utf8编码最多会用3个字节存储一个字符，如果一个字符的utf8</p><p>编码占用4个字节（最常见的就是ios中的emoji表情字符），那么在写入数据库时就会报错。</p><p>mysql从5.5.3版本开始，才支持4字节的utf8编码，编码名称为utf8mb4（mb4的意思是max bytes 4），这种编码方式最多用4个字节存储一个字符。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><ol><li><p>修改MySQL的配置文件：windows 查找<code>C:\ProgramData\MySQL\MySQL Server 5.7\my.ini</code>，Linux查找my.cnf。在配置文件最后添加如下字段：(先备份)</p><figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8mb4</span><br><span class="line"> </span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br></pre></td></tr></tbody></table></figure></li><li><p>重启MySQL</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭MySQL服务</span></span><br><span class="line">net stop &lt;mysql服务名称&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动Mysql服务</span></span><br><span class="line">net start &lt;mysql服务名称&gt;</span><br></pre></td></tr></tbody></table></figure></li><li><p>按顺序执行下面两个SQL语句：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改数据库字符集</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE 数据库名 <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8mb4 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8mb4_unicode_ci</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表字符集</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">CONVERT</span> <span class="keyword">TO</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></tbody></table></figure></li><li><p>如果觉得步骤三太过麻烦，也可以重建数据库，进行数据迁移。这样就不需要手动执行命令来修改字符集。</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MySQL插入记录出现Incorrent-string-value错误&quot;&gt;&lt;a href=&quot;#MySQL插入记录出现Incorrent-string-value错误&quot; class=&quot;headerlink&quot; title=&quot;MySQL插入记录出现Incorrent s</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="报错" scheme="http://example.com/categories/MySQL/%E6%8A%A5%E9%94%99/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-DCL语句</title>
    <link href="http://example.com/2020/11/25/88_MySQL-DCL%E8%AF%AD%E5%8F%A5/"/>
    <id>http://example.com/2020/11/25/88_MySQL-DCL%E8%AF%AD%E5%8F%A5/</id>
    <published>2020-11-25T15:10:52.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL-DCL语句"><a href="#MySQL-DCL语句" class="headerlink" title="MySQL-DCL语句"></a>MySQL-DCL语句</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>我们现在默认使用的都是 root 用户，超级管理员，拥有全部的权限。但是，一个公司里面的数据库服务器上面可能同时运行着很多个项目的数据库。所以，我们应该可以根据不同的项目建立不同的用户，分配不同的权限来管理和维护数据库。</p><blockquote><p>注：mysqld是MySQL的主程序，服务器端。mysql是MySQL的命令行工具，客户端。</p></blockquote><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125232739.png"></p><h2 id="查看用户"><a href="#查看用户" class="headerlink" title="查看用户"></a>查看用户</h2><p>所有的用户信息，我们都可以去MySQL自带的数据库<code>mysql</code>中的表<code>user</code>去查询（密码是加密的）。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 切换到mysql数据库</span></span><br><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询user表中的用户信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201126235617.png"></p><h2 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'密码'</span>;</span><br></pre></td></tr></tbody></table></figure><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><ul><li><p><code>'用户名'</code></p><p>将要创建的用户名</p></li><li><p><code>'主机名'</code></p><p>指定该用户在哪个主机上可以登录，如果是本地用户可用<code>localhost</code>。如果想让该用户可以从任意远程主机登录，可以使用通配符<code>%</code></p></li><li><p><code>'密码'</code></p><p>该用户的登录密码，密码可以为空，如果为空则该用户可以不需要密码登录服务器</p></li></ul><h3 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建 user1 用户，只能在本地登录 mysql 服务器，密码为 空</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'user1'</span>@<span class="string">'127.0.0.1'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建 user2 用户可以在远程主机'182.92.151.10'电脑上登录 mysql 服务器，密码为 remote</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'user2'</span>@<span class="string">'182.92.151.10'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'remote'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建 user3 用户可以在任何电脑上登录 mysql 服务器，密码为 admin</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'user3'</span>@<span class="string">'%'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'admin'</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>; <span class="comment">-- 要与创建用户时的 '用户名'@'主机名'，保持一致</span></span><br></pre></td></tr></tbody></table></figure><h3 id="代码演示-1"><a href="#代码演示-1" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除 user2 用户</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">'user2'</span>@<span class="string">'%'</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h2><h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>; <span class="comment">-- 要与创建用户时的 '用户名'@'主机名'，保持一致</span></span><br></pre></td></tr></tbody></table></figure><h3 id="代码演示-2"><a href="#代码演示-2" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看 user1 用户的权限</span></span><br><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看 user2 用户的权限</span></span><br><span class="line"><span class="keyword">show</span> grants <span class="keyword">for</span> <span class="string">'user2'</span>@<span class="string">'%'</span>;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>usage 是指连接（登陆）权限，建立一个用户，就会自动授予其 usage 权限（默认授予）。</p></blockquote><h2 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h2><p>在我们创建一个用户之处，这个用户是没用任何权限的，我们需要单独给这个用户赋予权限。</p><h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> 权限<span class="number">1</span>, 权限<span class="number">2</span> ... <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">TO</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>; </span><br><span class="line"><span class="comment">-- 要与创建用户时的 '用户名'@'主机名'，保持一致</span></span><br></pre></td></tr></tbody></table></figure><h3 id="关键字说明"><a href="#关键字说明" class="headerlink" title="关键字说明"></a>关键字说明</h3><ul><li><p><code>权限</code></p><p>授予用户的权限，如<code>CREATE</code>、<code>ALTER</code>、<code>DROP</code>、<code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>、<code>GRANT</code>等的权限。如果要授予所有的权限则使用<code>All</code></p></li><li><p><code>数据库名.表名</code></p><p>该用户可以操作哪个数据库的哪些表。如果要授予该用户对所有数据库和表的相应操作权限则可用<code>*</code>表示，如<code>*.*</code></p></li></ul><h3 id="代码演示-3"><a href="#代码演示-3" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 给 user1 用户分配对 mydatabase 这个数据库操作的权限：创建表，修改表，插入记录，更新记录，查询</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">create</span>, <span class="keyword">alter</span>, <span class="keyword">insert</span>, <span class="keyword">update</span>, <span class="keyword">select</span> <span class="keyword">on</span> mydatabase.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 给 user2 用户分配所有权限，对所有数据库的所有表</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">'user2'</span>@<span class="string">'%'</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="撤销授权"><a href="#撤销授权" class="headerlink" title="撤销授权"></a>撤销授权</h2><p>当我们需要撤销一个用户的权限时，我们可以采用下面的语法语句，撤销一个用户的权限。</p><h3 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> 权限<span class="number">1</span>, 权限<span class="number">2</span> ... <span class="keyword">ON</span> 数据库.表名 <span class="keyword">FROM</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span>;</span><br><span class="line"> <span class="comment">-- 要与创建用户时的 '用户名'@'主机名'，保持一致</span></span><br></pre></td></tr></tbody></table></figure><h3 id="关键字说明-1"><a href="#关键字说明-1" class="headerlink" title="关键字说明"></a>关键字说明</h3><ul><li><p><code>权限</code></p><p>用户的权限，如<code>CREATE</code>、<code>ALTER</code>、<code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code>等权限。如果要撤销所有权限，则可以使用<code>ALL</code></p></li><li><p><code>数据库名</code>.<code>表名</code></p><p>对哪些数据库的哪些表的权限进行撤销，如果要撤销该用户对所有数据库和表的操作权限，则可以使用<code>*.*</code></p></li></ul><h3 id="代码演示-4"><a href="#代码演示-4" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 撤销user1用户对mydatabase数据所有表的操作权限</span></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> mydatabase.<span class="operator">*</span> <span class="keyword">from</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="修改管理员密码"><a href="#修改管理员密码" class="headerlink" title="修改管理员密码"></a>修改管理员密码</h2><h3 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h3><ul><li><p>记得root用户密码</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -uroot -p password 新密码;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>需要在未登陆 MySQL 的情况下操作，新密码没有特殊符号，就不需要加上引号。</p></blockquote></li></ul><h3 id="代码演示-5"><a href="#代码演示-5" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 root 管理员的新密码改成 123456</span></span><br><span class="line">mysqladmin -uroot -p password 123456;</span><br></pre></td></tr></tbody></table></figure><h2 id="修改普通用户密码"><a href="#修改普通用户密码" class="headerlink" title="修改普通用户密码"></a>修改普通用户密码</h2><h3 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> <span class="string">'用户名'</span>@<span class="string">'主机名'</span><span class="operator">=</span>password(<span class="string">'新密码'</span>);</span><br><span class="line">或</span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">USER</span> <span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(<span class="string">'新密码'</span>) <span class="keyword">WHERE</span> <span class="keyword">USER</span> <span class="operator">=</span> <span class="string">'用户名'</span>;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>需要在登陆 MySQL 的情况下操作，新密码要加单引号。</p></blockquote><h3 id="代码演示-6"><a href="#代码演示-6" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将'user1'@'localhost'的密码改成'666666'</span></span><br><span class="line"><span class="keyword">set</span> password <span class="keyword">for</span> <span class="string">'user1'</span>@<span class="string">'localhost'</span><span class="operator">=</span>password(<span class="string">'666666'</span>);</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MySQL-DCL语句&quot;&gt;&lt;a href=&quot;#MySQL-DCL语句&quot; class=&quot;headerlink&quot; title=&quot;MySQL-DCL语句&quot;&gt;&lt;/a&gt;MySQL-DCL语句&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;head</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>事务</title>
    <link href="http://example.com/2020/11/25/87_%E4%BA%8B%E5%8A%A1/"/>
    <id>http://example.com/2020/11/25/87_%E4%BA%8B%E5%8A%A1/</id>
    <published>2020-11-25T04:11:47.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p><strong>数据准备</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> account (</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">    balance <span class="keyword">DOUBLE</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account (name, balance) <span class="keyword">VALUES</span> (<span class="string">'张三'</span>, <span class="number">1000</span>), (<span class="string">'李四'</span>, <span class="number">1000</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>在实际的开发过程中，一个业务操作如：转账，往往是要多次访问数据库才能完成的。转账是一个用户扣钱，另一个用户加钱。如果其中有一条 SQL 语句出现异常，这条 SQL 就可能执行失败。 </p><p>事务执行是一个整体，所有的 SQL 语句都必须执行成功。如果其中有 1 条 SQL 语句出现异常，则所有的 SQL 语句都要回滚，整个业务执行失败。</p><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 模拟转账的操作 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账号-500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br></pre></td></tr></tbody></table></figure><p>假设当张三账号上-500 元,服务器崩溃了。李四的账号并没有+500 元，数据就出现问题了。我们需要保证其中 一条 SQL 语句出现问题，整个转账就算失败。只有两条 SQL 都成功了转账才算成功。这个时候就需要用到事务.</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p><code>MySQL</code>中可以有两种方式进行事务的操作：</p><ol><li>手动提交事务</li><li>自动提交事务</li></ol><h2 id="手动提交"><a href="#手动提交" class="headerlink" title="手动提交"></a>手动提交</h2><p><code>MySQL</code>默认事务是自动提交的，所以想要开启事务，就需要执行对应的命令。相关的命令如下：</p><ul><li><p>开启事务</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">start</span> transaction;</span><br></pre></td></tr></tbody></table></figure></li><li><p>提交事务</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></tbody></table></figure></li><li><p>回滚事务</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></tbody></table></figure><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125125158.png"></p></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重置表数据</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账户-500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表数据,数据已发现改变</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重置表数据</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账户-500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表数据,数据未发现改变</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>如果事务中 SQL 语句没有问题，commit 提交事务，会对数据库数据的数据进行改变。 如果事务中 SQL 语句有问题，rollback 回滚事务，会回退到开启事务时的状态。</p></blockquote><h2 id="自动提交"><a href="#自动提交" class="headerlink" title="自动提交"></a>自动提交</h2><p>MySQL 默认每一条 DML(增删改)语句都是一个单独的事务，每条语句都会自动开启一个事务，语句执行完毕 自动提交事务，MySQL 默认开始自动提交事务。</p><ul><li><p>查看是否了开启自动提交事务</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;<span class="comment">-- @@表示全局变量，1 表示开启，0 表示关闭</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>取消自动提交事务</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span> <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure></li><li><p>开启自动提交事务</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span> <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重置表数据</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看是否开启了自动提交事务</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 取消自动提交事务</span></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账户-500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询表数据，数据未发生改变（自动提交事务已关闭，回滚，会导致前面的SQL失效）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重置表数据</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看是否开启了自动提交事务</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账户-500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询表数据，数据已发生改变（自动提交事务已关闭，只有commit，才能提交数据）</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重置表数据</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看是否开启了自动提交事务</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启自动提交事务</span></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 张三账户-500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号+500</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询表数据，数据已发生改变(自动提交事务已开启，回滚无效)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><h2 id="事务原理"><a href="#事务原理" class="headerlink" title="事务原理"></a>事务原理</h2><p>事务开启之后, 所有的操作都会临时保存到事务日志中, 事务日志只有在得到<code>commit</code>命令才会同步到数据表 中，其他任何情况(rollback，断开连接)都会清空事务日志。</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125193145.png"></p><h2 id="事务步骤"><a href="#事务步骤" class="headerlink" title="事务步骤"></a>事务步骤</h2><ol><li>客户端连接数据库服务器，创建连接时创建此用户临时日志文件</li><li>开启事务以后，所有的操作都会先写入到临时日志文件中</li><li>所有的查询操作从表中查询，但会经过日志文件加工后才返回</li><li>如果事务提交则将日志文件中的数据写到表中，否则清空日志文件。</li></ol><h2 id="回滚点"><a href="#回滚点" class="headerlink" title="回滚点"></a>回滚点</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p>在某些成功的操作完成之后，后续的操作有可能成功有可能失败，但是不管成功还是失败，前面操作都已经成功，可以在当前成功的位置设置一个回滚点。可以供后续失败操作返回到该位置，而不是返回所有操作，这个点称之为<strong>回滚点</strong>。</p><h3 id="设置回滚点"><a href="#设置回滚点" class="headerlink" title="设置回滚点"></a>设置回滚点</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SAVEPOINT</span> 回滚点名字;</span><br></pre></td></tr></tbody></table></figure><h3 id="返回回滚点"><a href="#返回回滚点" class="headerlink" title="返回回滚点"></a>返回回滚点</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> 回滚点名字;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 重置表数据</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号-100</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">100</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置回滚点</span></span><br><span class="line"><span class="keyword">savepoint</span> one_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 李四账号再-100</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">100</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回回滚点</span></span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> one_time;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询表数据，发现李四账号只减少了100</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><h2 id="事务特征"><a href="#事务特征" class="headerlink" title="事务特征"></a>事务特征</h2><ol><li><p><strong>原子性</strong>(Atomicity)</p><p>每个事务都是一个整体，不可再拆分，事务中所有的 SQL 语句要么都执行成功， 要么都失败。</p></li><li><p><strong>一致性</strong>(Consistency)</p><p>事务在执行前数据库的状态与执行后数据库的状态保持一致。如：转账前2个人的总金额是2000，转账后2 个人总金额也是2000</p></li><li><p><strong>隔离性</strong>(Isolation)</p><p>事务与事务之间不应该相互影响，执行时保持隔离的状态。</p></li><li><p><strong>持久性</strong>(Durability)</p><p>一旦事务执行成功，对数据库的修改是持久的。就算关机，也是保存下来的。</p></li></ol><h2 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h2><p>事务在操作时的理想状态是：所有的事务之间保持隔离，互不影响。</p><p>但是因为并发操作，多个用户同时访问同一个数据。就可能引发并发访问的问题，如下：</p><ul><li><p><strong>脏读</strong></p><p>一个事务读取到了另一个事务中尚未提交的数据。</p></li><li><p><strong>不可重复读</strong></p><p>一个事务中两次读取的数据内容不一致（update时引发的问题）</p></li><li><p><strong>幻读</strong></p><p>一个事务中两次读取的数据的数量不一致（insert或delete引发的问题）</p></li></ul><p>下表为<code>MySQL</code>数据库中的四种隔离级别，每种级别可能又不同的访问问题：</p><table><thead><tr><th>级别</th><th>名字</th><th>隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th><th>默认采用此级别的数据库</th></tr></thead><tbody><tr><td>1</td><td>读未提交</td><td>read uncommitted</td><td>是</td><td>是</td><td>是</td><td></td></tr><tr><td>2</td><td>读已提交</td><td>read committed</td><td>否</td><td>是</td><td>是</td><td>Oracle 和 SQL Server</td></tr><tr><td>3</td><td>可重复读</td><td>repeatable read</td><td>否</td><td>否</td><td>是</td><td>MySQL</td></tr><tr><td>4</td><td>串行化</td><td>serializable</td><td>否</td><td>否</td><td>否</td><td></td></tr></tbody></table><blockquote><p> 隔离级别越高，性能越差，安全性越高。</p></blockquote><h3 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h3><ul><li><p>查询全局事务隔离级别</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TX</span>_ISOLATION;</span><br></pre></td></tr></tbody></table></figure></li><li><p>设置事务隔离级别（需重登MySQL，才能看出隔离级别变化）</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> TRANSACTION ISOLATION LEVEL 级别字符串;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 脏读演示 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 打开 A 窗口登录 MySQL，重置表格</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口设置全局的隔离级别为最低(read uncommitted——读未提交)</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read uncommitted;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再打开 B 窗口登录MySQL,进入指定数据库，然后 A B 窗口都开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口更新 2 个人的账户数据，不提交</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查询账户, 结果读取了 A 窗口尚未提交的事务，这就叫作脏读</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口回滚</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查询，表数据又变为原来的样子</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>脏读非常危险的，比如张三向李四购买商品，张三开启事务，向李四账号转入 500 块，然后打电话给李四说钱 已经转了。李四一查询钱到账了，发货给张三。张三收到货后回滚事务，李四的再查看钱没了。</p><p><strong>解决脏读的办法</strong>：将全局的隔离级别进行提升为<code>read committed</code></p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 解决脏读演示 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 打开 A 窗口登录 MySQL，重置表格</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口设置全局的隔离级别为read committed-读已提交</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read committed;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口重登MySQL，A B窗口都开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口更新2人账号，不提交</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查询账户，并没有读取到 A 窗口尚未提交的数据(脏读已被解决)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口提交事务</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查看账户，才读取到 A 窗口已经提交的数据(脏读已被解决)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>隔离级别为<code>read committed</code>可以避免<strong>脏读</strong>的发生</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 不可重复读演示 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 打开 A 窗口登录 MySQL，重置表格</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口设置全局的隔离级别为read committed-读已提交</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read committed;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口重登MySQL，并开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查询表数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口也开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口更新2人账号，并提交</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查询，发现查询到的数据与前一次不同</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>两次查询输出的结果不同，这也是一种危险情况！我们可以考虑这样一种情况，比如银行程序需要将查询结果分别输出到电脑屏幕和发短信给客户，结果在一个事务中针对不同的输出目的地进行的两次查询不一致，导致文件和屏幕中的结果不一致，这样就可能会导致账务错误。</p><p><strong>解决不可重复读的办法：</strong>将全局的隔离级别提升为<code>repeatable read</code></p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 解决不可重复读演示 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 打开 A 窗口登录 MySQL，重置表格</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口设置全局的隔离级别为repeatable read-可重复读</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level repeatable read;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口重登MySQL，并开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口都查询表数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口也开启事务</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口更新2人账号，并提交</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">'李四'</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口查询，发现查询到的数据与前一次一致</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>隔离级别为<code>repeatable read</code>可以避免<strong>不可重复读</strong>的发生</p><p>首先需要声明的是：在<code>MySQL</code>中，我们是无法看到幻读的效果的。但是我们可以将事务隔离级别设置到最高，以挡住幻读的发生，将数据进行恢复。</p></blockquote><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 幻读演示 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 打开 A 窗口登录 MySQL，重置表格</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> balance <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口设置全局的隔离级别为最高serializable-串行化</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口重登MySQL, 并开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口查询表记录总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口登录 MySQL，并开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口添加一条记录(此时回车确认时，会发现操作没有继续进行，光标仍在闪烁)</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> account (name, balance) <span class="keyword">values</span> (<span class="string">'Jason'</span>, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口中执行commit提交事务后，B 窗口中的insert语句就立即执行完毕</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口中查询表记录总数，发现总数未改变，B 窗口的insert没起作用</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- B 窗口中执行commit提交事务</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- A 窗口查询表记录总数，发现总数已经改变，B 窗口的insert起作用了</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> account;</span><br></pre></td></tr></tbody></table></figure><blockquote><p>使用<code>serializable</code>隔离级别，一个事务没有执行完，其他事务的 SQL 执行不了，可以挡住幻读</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>默认情况下autocommit（自动提交）=1时：<br>执行sql修改语句（insert into，update…set，delete from）后，是立即生效的；</p></li><li><p>若手动修改autocommit（自动提交）=0，即手动提交时：<br>执行sql修改语句（insert into，update，delete from）后，不会生效；</p><p>在当前终端查看到的数据是存在缓存里的数据；</p><p>重新打开一个终端查看，会发现数据没有生效；</p><p>需要输入commit命令，提交数据到数据库，这样才会生效；</p></li><li><p>不管是autocommit=1或=0时；开启事务使用了begin命令，执行了sql修改语句后，都必须要使用commit命令提交数据<br>给数据库，不然不会生效；<br>如果使用了begin，没有使用commit,而是用begin另外开启了一个事务，之前的修改会被提交，隐式提交；<br>即：使用begin开启事务-&gt;后面必须使用commit/begin(其他命令不行)，sql修改语句才能生效；</p></li><li><p>以上要使用到commit的，在commit之前，使用命令rollback，都可以使数据回滚</p></li><li><p>事务开启到结束：begin+commit/rollback</p></li><li><p>对于set autocommit=0的设置的有效范围（）：</p><ul><li>只在当前操作的mysql数据库有效，临时有效</li><li>退出当前mysql数据库（未退出终端），失效</li><li>退出当前终端，再重新使用mysql，失效</li></ul></li><li><p>事务的开启，与是否选择了特定的数据库无关。即：在执行<code>use database_name</code>命令前，就可以通过<code>begin/start transaction</code>来开启事务，然后在选择你需要使用的数据库，进行数据操作。</p></li><li><p><code>begin</code>和 <code>start transaction</code> 等价，都是显式开启一个事务；<code>commit</code> 和 <code>commit work</code> 等价，都是对事物进行提交；<code>rollback</code> 和 <code>rollback work</code> 等价，都是对事物进行回滚；</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;事务&quot;&gt;&lt;a href=&quot;#事务&quot; class=&quot;headerlink&quot; title=&quot;事务&quot;&gt;&lt;/a&gt;事务&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;数据准备&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tbody&gt;</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>多表查询</title>
    <link href="http://example.com/2020/11/25/86_%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/"/>
    <id>http://example.com/2020/11/25/86_%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/</id>
    <published>2020-11-24T16:45:35.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h1><p><strong>准备数据</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建部门表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept(</span><br><span class="line"> id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line"> name <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 向部门表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (name) <span class="keyword">values</span> (<span class="string">'开发部'</span>), (<span class="string">'市场部'</span>), (<span class="string">'财务部'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建员工表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    gender <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">    salary <span class="keyword">double</span>,</span><br><span class="line">    join_date <span class="type">date</span>,</span><br><span class="line">    dept_id <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (dept_id) <span class="keyword">references</span> dept(id) <span class="comment">-- 外键，关联部门表主键</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 向员工表中添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp (name, gender, salary, join_date, dept_id) <span class="keyword">values</span></span><br><span class="line">(<span class="string">'孙悟空'</span>,<span class="string">'男'</span>,<span class="number">7200</span>,<span class="string">'2013-02-24'</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">'猪八戒'</span>,<span class="string">'男'</span>,<span class="number">3600</span>,<span class="string">'2010-12-02'</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'唐僧'</span>,<span class="string">'男'</span>,<span class="number">9000</span>,<span class="string">'2008-08-08'</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'白骨精'</span>,<span class="string">'女'</span>,<span class="number">5000</span>,<span class="string">'2015-10-07'</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">'蜘蛛精'</span>,<span class="string">'女'</span>,<span class="number">4500</span>,<span class="string">'2011-03-14'</span>,<span class="number">1</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125004843.png"></p><h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示。如：<code>从表.外键=主表.主键</code>。</p><p>内连接也分为两个：隐式内连接 and 显示内连接。</p><h3 id="隐式内连接"><a href="#隐式内连接" class="headerlink" title="隐式内连接"></a>隐式内连接</h3><p>看不到关键字<code>JOIN</code>，条件使用<code>WHERE</code>指定</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名 <span class="keyword">FROM</span> 左表, 右表 <span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp, dept <span class="keyword">where</span> emp.`dept_id` <span class="operator">=</span> dept.`id`;</span><br></pre></td></tr></tbody></table></figure><h3 id="显示内连接"><a href="#显示内连接" class="headerlink" title="显示内连接"></a>显示内连接</h3><p>使用<code>INNER JOIN ... ON</code>关键字的语句（<code>INNER</code>可以省略）</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名 <span class="keyword">FROM</span> 左表 [<span class="keyword">INNER</span>] <span class="keyword">JOIN</span> 右表 <span class="keyword">ON</span> 条件;</span><br></pre></td></tr></tbody></table></figure><p><strong>内连接查询步骤</strong></p><ol><li>确定查询哪些表</li><li>确定表连接的条件</li><li>确定查询的条件</li><li>确定查询的字段</li></ol><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询唐僧的信息，显示id，姓名，性别，工资和所在的部门名称</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">e.id id, e.name name, e.gender gender, e.salary salary, d.name deptName</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">emp e <span class="comment">-- 给左表起别名</span></span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">dept d <span class="comment">-- 给右表起别名</span></span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">e.`dept_id` <span class="operator">=</span> d.`id`</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">e.`name` <span class="operator">=</span> <span class="string">'唐僧'</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><p>外连接也是分为两类：左外连接 and 右外连接。</p><h3 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h3><p>使用<code>LEFT OUTER JOIN ... ON</code>关键字的语句（<code>OUTER</code>可以省略）</p><p>用左边表的记录去匹配右边表的记录，如果符合条件的则显示. 否则，显示 <code>NULL</code>.</p><p>可以理解为：在内连接的基础上保证左表的数据全部显示</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名 <span class="keyword">FROM</span> 左表 <span class="keyword">LEFT</span> [<span class="keyword">OUTER</span>] <span class="keyword">JOIN</span> 右表 <span class="keyword">ON</span> 条件;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在部门表中增加一个销售部</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dept (name) <span class="keyword">values</span> (<span class="string">'销售部'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用内连接查询(只显示符合条件的数据)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept d <span class="keyword">inner</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> d.`id` <span class="operator">=</span> e.`dept_id`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用左外连接查询(保证左表dept数据的全部显示,再对右表的数据再进条件过滤)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept d <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> emp e <span class="keyword">on</span> d.`id` <span class="operator">=</span> e.`dept_id`;</span><br></pre></td></tr></tbody></table></figure><h3 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h3><p>使用<code>RIGHT OUTER</code>，<code>OUTER</code>可以省略</p><p>用右边表的记录去匹配左边表的记录，如果符合条件的则显示；否则，显示<code>NULL</code></p><p>可以理解为：在内连接的基础上保证右表的数据全部显示</p><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在员工表中增加一个dept_id为null的员工</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'Jason'</span>, <span class="string">'男'</span>, <span class="number">6543.40</span>, <span class="string">'1999-07-12'</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用内连接查询(只显示符合条件的数据)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept d <span class="keyword">inner</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> d.`id` <span class="operator">=</span> e.`dept_id`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用右外连接查询(保证右表emp数据的全部显示,再对左表的数据再进条件过滤)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept d <span class="keyword">right</span> <span class="keyword">join</span> emp e <span class="keyword">on</span> d.`id` <span class="operator">=</span> e.`dept_id`;</span><br></pre></td></tr></tbody></table></figure><h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>一个查询的结果做为另一个查询的条件</p><h3 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h3><ol><li><p>子查询的结果是单行单列</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125020821.png"></p></li><li><p>子查询的结果是多行单列</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125020848.png"></p></li><li><p>子查询的结果是多行多列</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201125020920.png"></p></li></ol><h3 id="单行单列"><a href="#单行单列" class="headerlink" title="单行单列"></a>单行单列</h3><p>子查询结果只要是单行单列，肯定在<code>WHERE</code>后面作为条件</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询字段 <span class="keyword">FROM</span> 表 <span class="keyword">WHERE</span> 字段 <span class="operator">=</span> (子查询);</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资最高的员工是谁？</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">=</span> (<span class="keyword">select</span> <span class="built_in">max</span>(salary) <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询工资小于平均工资的员工有哪些？</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&lt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(salary) <span class="keyword">from</span> emp);</span><br></pre></td></tr></tbody></table></figure><h3 id="多行单列"><a href="#多行单列" class="headerlink" title="多行单列"></a>多行单列</h3><p>子查询结果是多行单列，结果集类似于一个数组，父查询使用<code>IN</code>运算符</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询字段 <span class="keyword">FROM</span> 表 <span class="keyword">WHERE</span> 字段 <span class="keyword">IN</span> (子查询);</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询工资大于 5000 的员工，来自于哪些部门的名字</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">from</span> dept <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="keyword">select</span> dept_id <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询开发部与财务部所有的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="keyword">in</span> (<span class="string">'开发部'</span>,<span class="string">'财务部'</span>));</span><br></pre></td></tr></tbody></table></figure><h3 id="多行多列"><a href="#多行多列" class="headerlink" title="多行多列"></a>多行多列</h3><p>子查询结果只要是多列，肯定在<code>FROM</code>后面作为表</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询字段 <span class="keyword">FROM</span> (子查询) 表别名 <span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询出 2011 年以后入职的员工信息，包括部门名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方法一：使用隐式内连接</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">d.name deptName, e.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">dept d, (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> join_date <span class="operator">&gt;=</span> <span class="string">'2011-1-1'</span>) e </span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">d.`id` <span class="operator">=</span> e.`dept_id`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方法二：使用显示内连接1</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">d.name deptName, e.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> join_date <span class="operator">&gt;=</span> <span class="string">'2011-1-1'</span>) e</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">d.`id` <span class="operator">=</span> e.`dept_id`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方法三：使用显示内连接2</span></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">d.name deptName, e.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">dept d </span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> </span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">d.`id` <span class="operator">=</span> e.`dept_id`</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">e.`join_date` <span class="operator">&gt;=</span> <span class="string">'2011-1-1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方法四：使用显示内连接3</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">d.name deptName, e.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">dept d</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">emp e</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">d.`id` <span class="operator">=</span> e.`dept_id`</span><br><span class="line"><span class="keyword">and</span></span><br><span class="line">e.`join_date` <span class="operator">&gt;=</span> <span class="string">'2011-1-1'</span>;</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;多表查询&quot;&gt;&lt;a href=&quot;#多表查询&quot; class=&quot;headerlink&quot; title=&quot;多表查询&quot;&gt;&lt;/a&gt;多表查询&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;准备数据&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>数据库设计规范</title>
    <link href="http://example.com/2020/11/20/85_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/"/>
    <id>http://example.com/2020/11/20/85_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/</id>
    <published>2020-11-19T19:28:58.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据库设计范例"><a href="#数据库设计范例" class="headerlink" title="数据库设计范例"></a>数据库设计范例</h1><h2 id="表关系概述"><a href="#表关系概述" class="headerlink" title="表关系概述"></a>表关系概述</h2><p>现实生活中，实体与实体之间肯定是有关系的，比如：老公和老婆，部门和员工，老师和学生等。那么我们在设计表的时候，就应该体现出表与表之间的这种关系！</p><p>数据库中之间有三种关系：</p><ol><li>一对多，例如：最常用的关系 部门和员工</li><li>多对多，例如：学生选课表 和 学生表， 一门课程可以有多个学生选择，一个学生选择多门课程</li><li>一对一，例如：相对使用比较少。员工表 简历表， 公民表 护照表</li></ol><h2 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h2><h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><p>在从表(多方)创建一个字段,字段作为外键指向主表(一方)的主键。</p><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><h4 id="案例需求"><a href="#案例需求" class="headerlink" title="案例需求"></a>案例需求</h4><p>一个旅游线路分类中有多个旅游线路，如下图</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201120034209.png"></p><h4 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h4><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201120034347.png"></p><h4 id="案例实现"><a href="#案例实现" class="headerlink" title="案例实现"></a>案例实现</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建主表tab_category旅游分类表</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">cid 旅游线路分类主键，自动增长</span></span><br><span class="line"><span class="comment">cname 旅游线路分类名称非空，唯一，字符串 100</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_category (</span><br><span class="line">    cid <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    cname <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">unique</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向主表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> tab_category (cname) <span class="keyword">values</span> (<span class="string">'周边游'</span>), (<span class="string">'出境游'</span>), (<span class="string">'国内游'</span>), (<span class="string">'港澳游'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建次表tab_route旅游路线表</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">rid 旅游线路主键，自动增长</span></span><br><span class="line"><span class="comment">rname 旅游线路名称非空，唯一，字符串 200</span></span><br><span class="line"><span class="comment">price 价格</span></span><br><span class="line"><span class="comment">rdate 上架时间，日期类型</span></span><br><span class="line"><span class="comment">cid 外键，所属分类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_route (</span><br><span class="line">rid <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    rname <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">    price <span class="keyword">double</span>(<span class="number">9</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    rdate <span class="type">date</span>,</span><br><span class="line">    cid <span class="type">int</span>, <span class="comment">-- 外键对应主表的主键</span></span><br><span class="line">    <span class="keyword">constraint</span> route_cid_fk <span class="keyword">foreign</span> <span class="keyword">key</span> (cid) <span class="keyword">references</span> tab_category (cid) <span class="keyword">on</span> <span class="keyword">update</span> cascade <span class="keyword">on</span> <span class="keyword">delete</span> cascade <span class="comment">-- 创建外键约束，添加级联更新、级联删除</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向次表添加数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_route <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'厦门'</span>, <span class="number">1499</span>,<span class="string">'2018-01-27'</span>, <span class="number">1</span>), </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'西山公园'</span>, <span class="number">699</span>, <span class="string">'2018-02-22'</span>, <span class="number">3</span>), </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'泰国'</span>, <span class="number">1699</span>, <span class="string">'2018-01-27'</span>, <span class="number">2</span>), </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'巴厘岛'</span>, <span class="number">2399</span>, <span class="string">'2017-12-23'</span>,<span class="number">2</span>), </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'香港迪士尼'</span>, <span class="number">799</span>, <span class="string">'2018-04-10'</span>, <span class="number">4</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h2><h3 id="原则-1"><a href="#原则-1" class="headerlink" title="原则"></a>原则</h3><p>需要创建第三张表，中间表中至少两个字段，这两个字段分别作为外键指向各自一方的主键。</p><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><h4 id="案例需求-1"><a href="#案例需求-1" class="headerlink" title="案例需求"></a>案例需求</h4><p>一个用户收藏多个线路，一个线路被多个用户收藏。如下图：</p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201120042412.png"></p><h4 id="案例分析-1"><a href="#案例分析-1" class="headerlink" title="案例分析"></a>案例分析</h4><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201120042448.png"></p><h4 id="案例实现-1"><a href="#案例实现-1" class="headerlink" title="案例实现"></a>案例实现</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建旅游路线表 tab_route</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">rid 旅游线路主键，自动增长</span></span><br><span class="line"><span class="comment">rname 旅游线路名称非空，唯一，字符串 200</span></span><br><span class="line"><span class="comment">price 价格</span></span><br><span class="line"><span class="comment">rdate 上架时间，日期类型</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_route (</span><br><span class="line">rid <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    rname <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">    price <span class="keyword">double</span>(<span class="number">9</span>,<span class="number">2</span>),</span><br><span class="line">    rdate <span class="type">date</span>,</span><br><span class="line">    cid <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加旅游线路数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_route <span class="keyword">VALUES</span></span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'厦门'</span>, <span class="number">1499</span>,<span class="string">'2018-01-27'</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'西山'</span>, <span class="number">699</span>, <span class="string">'2018-02-22'</span>, <span class="number">3</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'泰国 '</span>, <span class="number">1699</span>, <span class="string">'2018-01-27'</span>, <span class="number">2</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'巴厘岛'</span>, <span class="number">2399</span>, <span class="string">'2017-12-23'</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'香港'</span>, <span class="number">799</span>, <span class="string">'2018-04-10'</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建用户名表 tab_user</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">uid 用户主键，自增长</span></span><br><span class="line"><span class="comment">username 用户名长度 100，唯一，非空</span></span><br><span class="line"><span class="comment">password 密码长度 30，非空</span></span><br><span class="line"><span class="comment">name 真实姓名长度 100</span></span><br><span class="line"><span class="comment">birthday 生日</span></span><br><span class="line"><span class="comment">sex 性别，定长字符串 2</span></span><br><span class="line"><span class="comment">telephone 手机号，字符串 11</span></span><br><span class="line"><span class="comment">email 邮箱，字符串长度 100</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_user (</span><br><span class="line">uid <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">100</span>),</span><br><span class="line">    birthday <span class="type">date</span>,</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="string">'男'</span>,</span><br><span class="line">    telephone <span class="type">varchar</span>(<span class="number">11</span>),</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加用户数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_user <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'cz110'</span>, <span class="number">123456</span>, <span class="string">'老王'</span>, <span class="string">'1977-07-07'</span>, <span class="string">'男'</span>, <span class="string">'13888888888'</span>, <span class="string">'66666@qq.com'</span>), </span><br><span class="line">(<span class="keyword">NULL</span>, <span class="string">'cz119'</span>, <span class="number">654321</span>, <span class="string">'小王'</span>, <span class="string">'1999-09-09'</span>, <span class="string">'男'</span>, <span class="string">'13999999999'</span>, <span class="string">'99999@qq.com'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建收藏表 tab_favorite</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">rid 旅游线路 id，外键</span></span><br><span class="line"><span class="comment">favDate 收藏时间</span></span><br><span class="line"><span class="comment">uid 用户 id，外键</span></span><br><span class="line"><span class="comment">rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tab_favorite (</span><br><span class="line">rid <span class="type">int</span>,</span><br><span class="line">    favDate datetime,</span><br><span class="line">    uid <span class="type">int</span>,</span><br><span class="line">    <span class="comment">-- 创建复合主键</span></span><br><span class="line">    <span class="keyword">primary</span> <span class="keyword">key</span> (rid, uid),</span><br><span class="line">    <span class="comment">-- 创建外键</span></span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (rid) <span class="keyword">references</span> tab_route(rid),</span><br><span class="line">    <span class="keyword">foreign</span> <span class="keyword">key</span> (uid) <span class="keyword">references</span> tab_user(uid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加收藏表数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_favorite <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>, <span class="string">'2018-01-01'</span>, <span class="number">1</span>), </span><br><span class="line">(<span class="number">2</span>, <span class="string">'2018-02-11'</span>, <span class="number">1</span>), </span><br><span class="line">(<span class="number">3</span>, <span class="string">'2018-03-21'</span>, <span class="number">1</span>), </span><br><span class="line">(<span class="number">2</span>, <span class="string">'2018-04-21'</span>, <span class="number">2</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">'2018-05-08'</span>, <span class="number">2</span>), </span><br><span class="line">(<span class="number">5</span>, <span class="string">'2018-06-02'</span>, <span class="number">2</span>); </span><br></pre></td></tr></tbody></table></figure><h2 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a>一对一</h2><h3 id="原则-2"><a href="#原则-2" class="headerlink" title="原则"></a>原则</h3><p>在任意一方添加唯一外键指向另一方的主键（当然也可以直接合成一张表）</p><p><strong>小结</strong></p><table><thead><tr><th>表与表的关系</th><th>关系的维护</th></tr></thead><tbody><tr><td>一对多</td><td>主外键的关系</td></tr><tr><td>多对多</td><td>中间表，两个一对多</td></tr><tr><td>一对一</td><td>1) 特殊一对多，从表中的外键设置为唯一<br>2) 从表中的主键又是外键</td></tr></tbody></table><h2 id="数据库设计规范"><a href="#数据库设计规范" class="headerlink" title="数据库设计规范"></a>数据库设计规范</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>好的数据库设计对数据的存储性能和后期的程序开发，都会产生重要的影响。建立科学的，规范的数据库就需要满足一些规则来优化数据的设计和存储，这些规则就称为范式。</p><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、 第四范式(4NF）和第五范式（5NF，又称完美范式）。 </p><p>满足最低要求的范式是第一范式（1NF）。在第一范式的基础上进一步满足更多规范要求的称为第二范式（2NF）， 其余范式以次类推。一般说来，数据库只需满足第三范式(3NF）就行了。</p><h3 id="第一范式（1NF）"><a href="#第一范式（1NF）" class="headerlink" title="第一范式（1NF）"></a>第一范式（1NF）</h3><p>数据库表的每一列都是不可分割的原子数据项，不能是集合、数组等非原子数据项。即表中的某个列有多个值 时，必须拆分为不同的列。简而言之，第一范式每一列不可再拆分，称为原子性。</p><h3 id="第二范式（2NF）"><a href="#第二范式（2NF）" class="headerlink" title="第二范式（2NF）"></a>第二范式（2NF）</h3><p>在满足第一范式的前提下，表中的每一个字段都完全依赖于主键。</p><p> 所谓完全依赖是指不能存在仅依赖主键一部分的列。简而言之，第二范式就是在第一范式的基础上所有列完全依赖于主键列。当存在一个复合主键包含多个主键列的时候，才会发生不符合第二范式的情况。比如有一个主键有 两个列，不能存在这样的属性，它只依赖于其中一个列，这就是不符合第二范式。</p><blockquote><p>范式定义中概念解释：</p><ol><li>属性组：几个属性组合而成。</li><li>函数依赖： A——&gt; B，如果通过A属性（属性组）的值，可以确定唯一B属性的值。则称B依赖于A。</li><li>完全函数依赖：A——B，如果A是一个属性组，则B属性值的确定需要依赖于A属性组中所有的属性值。</li><li>部分函数依赖：A——B，如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值既可。</li><li>传递函数依赖：A——B，B——C。如果通过A属性（属性组）的值，可以确定唯一B属性的值。然后再通过B属性（属性组）的值可以确定唯一C属性的值，则称C传递函数依赖于A。</li><li>码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性（属性组）为该表的码。<ul><li>主属性：码属性组中的所有属性；</li><li>非主属性：除了码属性组的其他属性；</li></ul></li></ol></blockquote><p>第二范式的特点： 1. 一张表只描述一件事情。 2. 表中的每一列都完全依赖于主键</p><h3 id="第三范式（3NF）"><a href="#第三范式（3NF）" class="headerlink" title="第三范式（3NF）"></a>第三范式（3NF）</h3><p>在满足第二范式的前提下，表中的每一列都直接依赖于主键，而不是通过其它的列来间接依赖于主键。</p><p> 简而言之，第三范式就是所有列不依赖于其它非主键列，也就是在满足 2NF 的基础上，任何非主列不得传递 依赖于主键。所谓传递依赖，指的是如果存在”A → B → C”的决定关系，则 C 传递依赖于 A。因此，满足第三范 式的数据库表应该不存在如下依赖关系：主键列 → 非主键列 x → 非主键列 y</p><p><strong>小结</strong></p><table><thead><tr><th>范式</th><th>特点</th></tr></thead><tbody><tr><td>1NF</td><td>原子性，表中每列不可再拆分。</td></tr><tr><td>2NF</td><td>不产生局部依赖，一张表只描述一件事情</td></tr><tr><td>3NF</td><td>不产生传递依赖，表中每一列都直接依赖于主键。而不是通过其它列间接依赖于主键。</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;数据库设计范例&quot;&gt;&lt;a href=&quot;#数据库设计范例&quot; class=&quot;headerlink&quot; title=&quot;数据库设计范例&quot;&gt;&lt;/a&gt;数据库设计范例&lt;/h1&gt;&lt;h2 id=&quot;表关系概述&quot;&gt;&lt;a href=&quot;#表关系概述&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>数据库表的约束</title>
    <link href="http://example.com/2020/11/19/84_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E7%BA%A6%E6%9D%9F/"/>
    <id>http://example.com/2020/11/19/84_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E7%BA%A6%E6%9D%9F/</id>
    <published>2020-11-19T10:31:01.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据库表的约束"><a href="#数据库表的约束" class="headerlink" title="数据库表的约束"></a>数据库表的约束</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>对表中的数据进行限制，保证数据的正确性、有效性和完整性。一个表如果添加了约束，不正确的数据将无法插入到表中。约束在创建表的时候添加比较合适。</p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><table><thead><tr><th>约束名</th><th>约束关键字</th></tr></thead><tbody><tr><td>主键</td><td>primary key</td></tr><tr><td>唯一</td><td>unique</td></tr><tr><td>非空</td><td>not null</td></tr><tr><td>外键</td><td>foreign key</td></tr><tr><td>检查约束</td><td>check 注：mysql 不支持</td></tr></tbody></table><h2 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h2><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>用来唯一标识数据库中的每一条记录。</p><h3 id="哪个字段应该作为表的主键？"><a href="#哪个字段应该作为表的主键？" class="headerlink" title="哪个字段应该作为表的主键？"></a>哪个字段应该作为表的主键？</h3><p>通常不用业务字段作为主键，单独给每张表设计一个 id 的字段，把 id 作为主键。主键是给数据库和程序使用 的，不是给最终的客户使用的。所以主键有没有含义没有关系，只要不重复，非空就行。 如：身份证，学号不建议做成主键</p><h3 id="主键的特点"><a href="#主键的特点" class="headerlink" title="主键的特点"></a>主键的特点</h3><ol><li>唯一且非空</li><li>一张表只能有一个主键</li></ol><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><ol><li><p>在创建表的时候给字段添加主键</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>在已有表中添加主键</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>(字段名);</span><br></pre></td></tr></tbody></table></figure></li><li><p>删除主键</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>;</span><br></pre></td></tr></tbody></table></figure></li></ol><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表学生表 student01, 包含字段(id, name, age)将 id 做为主键</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student01 (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span>, <span class="comment">-- id为主键</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除student01上面的主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student01 <span class="keyword">drop</span> <span class="keyword">primary</span> <span class="keyword">key</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重新为表student01添加主键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student01 <span class="keyword">add</span> <span class="keyword">primary</span> <span class="keyword">key</span>(id);</span><br></pre></td></tr></tbody></table></figure><h3 id="主键自增"><a href="#主键自增" class="headerlink" title="主键自增"></a>主键自增</h3><ul><li><p>主键如果让我们自己添加很有可能重复,我们通常希望在每次插入新记录时,数据库自动生成主键字段的值</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUTO_INCREMENT： 表示自动增长，但字段类型必须是整数类型</span><br></pre></td></tr></tbody></table></figure></li><li><p>默认 AUTO_INCREMENT 的开始值是 1，如果希望修改起始值,请使用下列 SQL 语法</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AUTO_INCREMENT<span class="operator">=</span>初始值</span><br></pre></td></tr></tbody></table></figure></li><li><p>创建好以后修改起始值（只能往大的修改）</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 AUTO_INCREMENT <span class="operator">=</span> 初始值;</span><br></pre></td></tr></tbody></table></figure></li><li><p>创建表后，删除自增</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 字段类型;</span><br></pre></td></tr></tbody></table></figure></li><li><p>创建表后，添加自增</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 字段类型 AUTO_INCREMENT;</span><br></pre></td></tr></tbody></table></figure></li><li><p><code>DELETE</code> 和<code>TRUNCATE</code>对自增长的影响</p><p>DELETE：删除所有的记录之后，自增长没有影响。</p><p> TRUNCATE：删除以后，自增长又重新开始。</p></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表 student02, 包含字段(id, name, age)将 id 做为自增主键，起始值为5</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student02 (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment, <span class="comment">-- 自增主键</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span></span><br><span class="line">) auto_increment <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 直接插入数据，主键会自动增长</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 (name, age) <span class="keyword">values</span>(<span class="string">'Jason'</span>, <span class="number">21</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 (name, age) <span class="keyword">values</span>(<span class="string">'June'</span>, <span class="number">22</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 (name, age) <span class="keyword">values</span>(<span class="string">'Charlie'</span>, <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建好以后修改起始值为10</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student02 auto_increment <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'Bob'</span>, <span class="number">24</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'Sql'</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'My'</span>, <span class="number">26</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- DELETE：删除所有的记录之后，自增长没有影响。</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student02;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'is'</span>, <span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'it'</span>, <span class="number">31</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'just me'</span>, <span class="number">32</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- TRUNCATE：删除以后，自增长又重新开始。</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> student02;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'Sasha'</span>, <span class="number">36</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student02 <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'Sloan'</span>, <span class="number">40</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除自增</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student02 modify id <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次添加自增</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student02 modify id <span class="type">int</span>(<span class="number">11</span>) auto_increment;</span><br></pre></td></tr></tbody></table></figure><h2 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p> 约束表中某一列不能出现重复的值（可以有多个<code>NULL</code>）</p><h3 id="格式-1"><a href="#格式-1" class="headerlink" title="格式"></a>格式</h3><ul><li><p>创建表时，设置唯一约束</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 <span class="keyword">UNIQUE</span>;</span><br></pre></td></tr></tbody></table></figure></li><li><p>在创建表后，为字段添加唯一约束</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span> 唯一约束名] <span class="keyword">UNIQUE</span> (列名);</span><br></pre></td></tr></tbody></table></figure></li><li><p>删除唯一约束</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> INDEX 列名<span class="operator">/</span>唯一约束名;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建学生表 student03, 包含字段(id, name),name 这一列设置唯一约束,不能出现同名的学生</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student03 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span> <span class="comment">-- 设置唯一约束</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加一个同名的学生</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student03 (id, name) <span class="keyword">values</span> (<span class="number">1</span>, <span class="string">'Jason'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student03 (id, name) <span class="keyword">values</span> (<span class="number">2</span>, <span class="string">'Jason'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 可以存在多个null</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student03 (id, name) <span class="keyword">values</span> (<span class="number">3</span>, <span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student03 (id, name) <span class="keyword">values</span> (<span class="number">4</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--  创建表后，为列名id设置唯一约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student03 <span class="keyword">add</span> <span class="keyword">constraint</span> unique_id <span class="keyword">UNIQUE</span> (id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除列名id的唯一约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student03 <span class="keyword">drop</span> index unique_id;</span><br></pre></td></tr></tbody></table></figure><h2 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h2><h3 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h3><p>规定某一列不能为 null。</p><h3 id="格式-2"><a href="#格式-2" class="headerlink" title="格式"></a>格式</h3><ul><li><p>创建非空约束</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>删除非空约束</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 字段类型 <span class="keyword">NULL</span>;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 CHANGE <span class="keyword">COLUMN</span> 字段名 字段名 字段类型 <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure></li><li><p>创建表后，为字段设置非空约束</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY 字段名 字段类型 <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 CHANGE <span class="keyword">COLUMN</span> 字段名 字段名 字段类型 <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表学生表 student04, 包含字段(id,name,gender)其中 name 不能为 NULL</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student04 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>, <span class="comment">-- 非空约束</span></span><br><span class="line">    gender <span class="type">varchar</span>(<span class="number">4</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加一条记录其中姓名不赋值</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student04 <span class="keyword">values</span> (<span class="number">1</span>, <span class="keyword">null</span>, <span class="string">'男'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除字段名为name的非空约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student04 change <span class="keyword">column</span> name name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重新为字段名为name添加上非空约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student04 change <span class="keyword">column</span> name name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h2><h3 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h3><p>给字段默认赋一个值。</p><h3 id="格式-3"><a href="#格式-3" class="headerlink" title="格式"></a>格式</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字段名 字段类型 <span class="keyword">DEFAULT</span> 默认值;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个学生表 student05，包含字段(id,name,address)， 地址默认值是广州</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student05 (</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">default</span> <span class="string">'广州'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加一条记录,使用默认地址</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student05 (id,name) <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'Jason'</span>);</span><br></pre></td></tr></tbody></table></figure><blockquote><p> 疑问:如果一个字段设置了非空与唯一约束，该字段与主键的区别?</p><ol><li>主键数在一个表中，只能有一个。不能出现多个主键。主键可以单列，也可以是多列。</li><li>自增长只能用在主键上</li></ol></blockquote><h2 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h2><h3 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h3><ul><li>外键：在从表中与主表主键对应的那一列</li><li>主表：一方，用来约束别人的表</li><li>从表：多方，被别人约束的表</li></ul><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol><li>必须先删除了从表，才能删除主表</li><li>从表的外键值可以为<code>NULL</code>，但是不能为主表主键值外不存在的值</li></ol><h3 id="格式-4"><a href="#格式-4" class="headerlink" title="格式"></a>格式</h3><ul><li><p>新建表时增加外键</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">CONSTRAINT</span>] [外键约束名称] <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(外键字段名) <span class="keyword">REFERENCES</span> 主表名(主键字段名);</span><br></pre></td></tr></tbody></table></figure></li><li><p>已有表增加外键</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 从表 <span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span>] [外键约束名称] FOERIGN KEY (外键字段名) <span class="keyword">REFERENCES</span> 主表(主键字段名);</span><br></pre></td></tr></tbody></table></figure></li><li><p>删除外键</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 从表 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> 外键名称;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表department，作为主表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> department (</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    dep_name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    dep_location <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向主表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'研发部'</span>, <span class="string">'北京'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span> (<span class="keyword">null</span>, <span class="string">'开发部'</span>, <span class="string">'上海'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建从表 employee 并添加外键约束 emp_depid_fk</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    dep_id <span class="type">int</span>, <span class="comment">-- 外键对应主表的主键</span></span><br><span class="line">    <span class="comment">-- 创建外键约束</span></span><br><span class="line">    <span class="keyword">constraint</span> emp_depid_fk <span class="keyword">foreign</span> <span class="keyword">key</span> (dep_id) <span class="keyword">references</span> department (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 向从表添加数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age, dep_id) <span class="keyword">values</span> (<span class="string">'Jason'</span>, <span class="number">21</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age, dep_id) <span class="keyword">values</span> (<span class="string">'Charlie'</span>, <span class="number">22</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age ,dep_id) <span class="keyword">values</span> (<span class="string">'June'</span>, <span class="number">23</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age, dep_id) <span class="keyword">values</span> (<span class="string">'Bob'</span>, <span class="number">25</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age ,dep_id) <span class="keyword">values</span> (<span class="string">'Run'</span>, <span class="number">19</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age, dep_id) <span class="keyword">values</span> (<span class="string">'Cat'</span>, <span class="number">26</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 尝试往从表中插入不存在的部门（报错）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee (name, age, dep_id) <span class="keyword">values</span> (<span class="string">'KOK'</span>, <span class="number">48</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除employee表的emp_depid_fk外键</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> employee <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> emp_depid_fk;</span><br></pre></td></tr></tbody></table></figure><h3 id="外键的级联"><a href="#外键的级联" class="headerlink" title="外键的级联"></a>外键的级联</h3><p>在修改和删除主表的主键时，同时更新或删除副表的外键值，称为级联操作。</p><table><thead><tr><th>级联操作语法</th><th>描述</th></tr></thead><tbody><tr><td><code>ON UPDATE CASCADE</code></td><td>级联更新，只能是创建表的时候创建级联关系。<br>更新主表中的主键，从表中的外键 列也自动同步更新</td></tr><tr><td><code>ON DELETE CASCADE</code></td><td>级联删除</td></tr></tbody></table><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除 employee 表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> employee;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重新创建 employee 表，添加级联更新和级联删除</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee (</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> <span class="keyword">key</span> auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    dep_id <span class="type">int</span>, <span class="comment">-- 外键对应主表的主键</span></span><br><span class="line">    <span class="keyword">constraint</span> emp_depid_fk <span class="keyword">foreign</span> <span class="keyword">key</span> (dep_id) <span class="keyword">references</span> department (id) </span><br><span class="line">    <span class="keyword">on</span> <span class="keyword">update</span> cascade <span class="keyword">on</span> <span class="keyword">delete</span> cascade <span class="comment">-- 创建外键约束,添加级联更新、级联删除</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 再次添加数据到employee表和department表</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (NAME, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'张三'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (NAME, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'李四'</span>, <span class="number">21</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (NAME, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'王五'</span>, <span class="number">20</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (NAME, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'老王'</span>, <span class="number">20</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (NAME, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'大王'</span>, <span class="number">22</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employee (NAME, age, dep_id) <span class="keyword">VALUES</span> (<span class="string">'小王'</span>, <span class="number">18</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把部门表中 id 等于 1 的部门改成 id 等于 10</span></span><br><span class="line"><span class="keyword">update</span> department <span class="keyword">set</span> id <span class="operator">=</span> <span class="number">10</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 不能直接删除主表department,必须先删除了从表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> department;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除部门号是 2 的部门</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> department <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;数据库表的约束&quot;&gt;&lt;a href=&quot;#数据库表的约束&quot; class=&quot;headerlink&quot; title=&quot;数据库表的约束&quot;&gt;&lt;/a&gt;数据库表的约束&lt;/h1&gt;&lt;h2 id=&quot;概述&quot;&gt;&lt;a href=&quot;#概述&quot; class=&quot;headerlink&quot; title=&quot;概</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>MySQL-DQL语句</title>
    <link href="http://example.com/2020/11/18/83_MySQL-DQL%E8%AF%AD%E5%8F%A5/"/>
    <id>http://example.com/2020/11/18/83_MySQL-DQL%E8%AF%AD%E5%8F%A5/</id>
    <published>2020-11-18T15:57:51.000Z</published>
    <updated>2021-01-27T19:52:37.949Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL-DQL语句"><a href="#MySQL-DQL语句" class="headerlink" title="MySQL-DQL语句"></a>MySQL-DQL语句</h1><blockquote><p>查询不会对数据库中的数据进行修改.只是一种显示数据的方式</p></blockquote><h2 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h2><ol><li><p>查询表所有数据</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure></li><li><p>查询指定列的数据</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名<span class="number">1</span>, 字段名<span class="number">2</span>, 字段名<span class="number">3</span> ... <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure><h2 id="别名查询"><a href="#别名查询" class="headerlink" title="别名查询"></a>别名查询</h2></li><li><p>对列指定别名，然后进行查询</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名<span class="number">1</span> <span class="keyword">AS</span> 别名, 字段名<span class="number">2</span> <span class="keyword">AS</span> 别名, 字段名<span class="number">3</span> <span class="keyword">AS</span> 别名 ... <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure></li><li><p>对列和表同时指定别名，然后进行查询</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名<span class="number">1</span> <span class="keyword">AS</span> 别名, 字段名<span class="number">2</span> <span class="keyword">AS</span> 别名, 字段名<span class="number">3</span> <span class="keyword">AS</span> 别名 ... <span class="keyword">FROM</span> 表名 <span class="keyword">AS</span> 表别名;</span><br></pre></td></tr></tbody></table></figure></li></ol><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 对列指定别名，然后进行查询</span></span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> <span class="string">'名字'</span>, age <span class="keyword">as</span> <span class="string">'年龄'</span> <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对列和表同时指定别名，然后进行查询</span></span><br><span class="line"><span class="keyword">select</span> st.name <span class="keyword">as</span> <span class="string">'姓名'</span>, st.age <span class="keyword">as</span> <span class="string">'年龄'</span> <span class="keyword">from</span> students <span class="keyword">as</span> st;</span><br></pre></td></tr></tbody></table></figure><h2 id="清除重复值"><a href="#清除重复值" class="headerlink" title="清除重复值"></a>清除重复值</h2><p>使用关键字<code>DISTINCT</code>，去除查询结果中的重复数据</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段名 <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询指定列的所有记录，包括重复结果</span></span><br><span class="line"><span class="keyword">select</span> age <span class="keyword">from</span> human;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询指定列的所有记录，去除重复结果</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> age <span class="keyword">from</span> human;</span><br></pre></td></tr></tbody></table></figure><h2 id="查询结果参与运算"><a href="#查询结果参与运算" class="headerlink" title="查询结果参与运算"></a>查询结果参与运算</h2><ol><li><p>某列数据和固定值运算</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列名<span class="number">1</span> <span class="operator">+</span> 固定值 <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure></li><li><p>某列数据和其他列数据参与运算</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列名<span class="number">1</span> <span class="operator">+</span> 列名<span class="number">2</span> <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure><blockquote><p> 注意: 参与运算的必须是数值类型</p></blockquote></li></ol><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将列age+5，然后再查询出来</span></span><br><span class="line"><span class="keyword">select</span> age <span class="operator">+</span> <span class="number">5</span> <span class="keyword">from</span> human;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将id列与age列相加，再查询出来</span></span><br><span class="line"><span class="keyword">select</span> id <span class="operator">+</span> age <span class="keyword">from</span> human;</span><br></pre></td></tr></tbody></table></figure><p><strong>数据准备</strong></p><p>创建一个表格，并导入数据，用于一下代码演示使用。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个表格</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students (</span><br><span class="line">id <span class="type">int</span>, <span class="comment">-- 编号</span></span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>), <span class="comment">-- 姓名</span></span><br><span class="line">    age <span class="type">int</span>, <span class="comment">-- 年龄</span></span><br><span class="line">    sex <span class="type">varchar</span>(<span class="number">5</span>), <span class="comment">-- 性别</span></span><br><span class="line">    address <span class="type">varchar</span>(<span class="number">100</span>), <span class="comment">-- 地址</span></span><br><span class="line">    math <span class="type">int</span>, <span class="comment">-- 数学</span></span><br><span class="line">    english <span class="type">int</span> <span class="comment">-- 英语</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 导入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> </span><br><span class="line">students(id,NAME,age,sex,address,math,english) </span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>,<span class="string">'马云'</span>,<span class="number">55</span>,<span class="string">'男'</span>,<span class="string">'杭州'</span>,<span class="number">66</span>,<span class="number">78</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">'马化腾'</span>,<span class="number">45</span>,<span class="string">'女'</span>,<span class="string">'深圳'</span>,<span class="number">98</span>,<span class="number">87</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">'马景涛'</span>,<span class="number">55</span>,<span class="string">'男'</span>,<span class="string">'香港'</span>,<span class="number">56</span>,<span class="number">77</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">'柳岩'</span>,<span class="number">20</span>,<span class="string">'女'</span>,<span class="string">'湖南'</span>,<span class="number">76</span>,<span class="number">65</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="string">'柳青'</span>,<span class="number">20</span>,<span class="string">'男'</span>,<span class="string">'湖南'</span>,<span class="number">86</span>,<span class="keyword">NULL</span>),</span><br><span class="line">(<span class="number">6</span>,<span class="string">'刘德华'</span>,<span class="number">57</span>,<span class="string">'男'</span>,<span class="string">'香港'</span>,<span class="number">99</span>,<span class="number">99</span>),</span><br><span class="line">(<span class="number">7</span>,<span class="string">'马德'</span>,<span class="number">22</span>,<span class="string">'女'</span>,<span class="string">'香港'</span>,<span class="number">99</span>,<span class="number">99</span>),</span><br><span class="line">(<span class="number">8</span>,<span class="string">'德玛西亚'</span>,<span class="number">18</span>,<span class="string">'男'</span>,<span class="string">'南京'</span>,<span class="number">56</span>,<span class="number">65</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p>指定查询的条件，对查询记录进行过滤</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名 <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 条件;</span><br></pre></td></tr></tbody></table></figure><p><strong>代码演示</strong></p><ul><li>运算符</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 math 分数大于 80 分的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> math <span class="operator">&gt;</span> <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 english 分数小于或等于 80 分的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> english <span class="operator">&lt;=</span> <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 age 等于 20 岁的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 age 不等于 20 岁的学生，注：不等于有两种写法</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">&lt;&gt;</span> <span class="number">20</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">!=</span> <span class="number">20</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>逻辑运算符</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 age 大于 35 且性别为男的学生(两个条件同时满足)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">35</span> <span class="keyword">and</span> sex <span class="operator">=</span> <span class="string">'男'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 age 大于 35 或性别为男的学生(两个条件其中一个满足)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">35</span> <span class="keyword">or</span> sex <span class="operator">=</span> <span class="string">'男'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 id 是 1 或 3 或 5 的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">or</span> id <span class="operator">=</span> <span class="number">3</span> <span class="keyword">or</span> id <span class="operator">=</span> <span class="number">5</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>in 关键字</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 id 是 1 或 3 或 5 的学生(采用in关键字)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> id <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 id 不是 1 或 3 或 5 的学生(采用in关键字)</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> id <span class="keyword">not</span> <span class="keyword">in</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>);</span><br></pre></td></tr></tbody></table></figure><ul><li>范围查询(between…and…)</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询 english 成绩大于等于 75，且小于等于 90 的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> english <span class="keyword">between</span> <span class="number">75</span> <span class="keyword">and</span> <span class="number">90</span>;</span><br></pre></td></tr></tbody></table></figure><ul><li>like 关键字</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询姓马的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">'马%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询姓名中包含'德'字的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">'%德%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询姓马，且姓名有两个字的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">'马__'</span>; <span class="comment">--因为是中文，所有得用两个_，适配一个汉字</span></span><br></pre></td></tr></tbody></table></figure><ul><li>is 关键字</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询英语成绩为NULL的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> english <span class="keyword">is</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询英语成绩不为NULL的学生</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> english <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h2><p>通过<code>ORODER BY</code>子句，可以将查询出的结果进行排序(排序只是显示方式，不会影响数据库中数据的顺序)。</p><ul><li><p>单列排序</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名 <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 字段<span class="operator">=</span>值 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 字段名 <span class="operator">&lt;</span><span class="keyword">ASC</span> 或 <span class="keyword">DESC</span><span class="operator">&gt;</span>; <span class="comment">-- ASC:升序，默认值; DESC:降序</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>组合排序（如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件）</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名 <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 字段<span class="operator">=</span>值 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 字段名<span class="number">1</span> <span class="operator">&lt;</span><span class="keyword">ASC</span> 或 <span class="keyword">DESC</span><span class="operator">&gt;</span>, 字段名<span class="number">2</span> <span class="operator">&lt;</span><span class="keyword">ASC</span> 或 <span class="keyword">DESC</span><span class="operator">&gt;</span>;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询所有数据,使用年龄降序排序</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询所有数据,在年龄降序排序的基础上，如果年龄相同再以数学成绩升序排序</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>, math <span class="keyword">asc</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><p>之前我们做的查询都是横向查询，它们都是根据条件一行一行的进行判断，而使用聚合函数查询是纵向查询， 它是对一列的值进行计算，然后返回一个结果值。聚合函数会忽略空值<code> NULL</code>。</p><ul><li><p>关键字</p><table><thead><tr><th>聚合函数关键字</th><th>作用</th></tr></thead><tbody><tr><td>max(列名)</td><td>求这一列的最大值</td></tr><tr><td>min(列名)</td><td>求这一列的最小值</td></tr><tr><td>avg(列名)</td><td>求这一列的平均值</td></tr><tr><td>count(列名)</td><td>统计这一列共有多少条记录</td></tr><tr><td>sum(列名)</td><td>对这一列求总和</td></tr></tbody></table></li><li><p>语法</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 聚合函数(列名) <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></tbody></table></figure></li><li><p>聚合函数中遇到<code>NULL</code>的解决办法</p><p>使用关键<code>IFNULL</code>，来用默认值取代<code>NULL</code>。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(列名,默认值)</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询学生总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(id) <span class="string">'总人数'</span> <span class="keyword">from</span> students;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> <span class="string">'总人数'</span> <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用 id 字段来统计数据总数，如果为 null，则使用 0 代替，这样统计的数据就不会遗漏</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ifnull(id,<span class="number">0</span>)) <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询年龄大于 20 的总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数学成绩总分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(math) <span class="string">'数学总分'</span> <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数学成绩平均分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(math) <span class="string">'数学均分'</span> <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数学成绩最高分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(math) <span class="string">'数学最高分'</span> <span class="keyword">from</span> students;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询数学成绩最低分</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(math) <span class="string">'数学最低分'</span> <span class="keyword">from</span> students;</span><br></pre></td></tr></tbody></table></figure><h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><p>分组查询是指使用<code>GROUP BY</code>语句对查询信息进行分组，相同数据作为一组。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>, 字段<span class="number">2</span> ... <span class="keyword">FROM</span> 表名 <span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组字段 [<span class="keyword">HAVING</span> 条件];</span><br></pre></td></tr></tbody></table></figure><p>或结合【聚合函数】一起使用</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列名, 聚合函数(列名) <span class="keyword">FROM</span> 表名 <span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组字段 [<span class="keyword">HAVING</span> 条件];</span><br></pre></td></tr></tbody></table></figure><blockquote><p>注意：</p><p>使用分组函数进行查询时，查询的只能是分组字段或聚合函数，查询其他则没有意义。</p></blockquote><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按性别进行分组，求男生和女生数学的平均分</span></span><br><span class="line"><span class="keyword">select</span> sex, <span class="built_in">avg</span>(math) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 统计男女各有多少人</span></span><br><span class="line"><span class="keyword">select</span> sex, <span class="built_in">count</span>(id) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">select</span> sex, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> students <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询年龄大于 25 岁的人,按性别分组,统计每组的人数</span></span><br><span class="line"><span class="keyword">select</span> sex, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">25</span> <span class="keyword">group</span> <span class="keyword">by</span> sex;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询年龄大于 25 岁的人，按性别分组，统计每组的人数，并只显示性别人数大于 2 的数据</span></span><br><span class="line"><span class="keyword">select</span> sex, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> <span class="string">'人数'</span> <span class="keyword">from</span> students <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">25</span> <span class="keyword">group</span> <span class="keyword">by</span> sex <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">2</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="having-与-where-的区别"><a href="#having-与-where-的区别" class="headerlink" title="having 与 where 的区别"></a>having 与 where 的区别</h2><table><thead><tr><th>子句</th><th>作用</th></tr></thead><tbody><tr><td>where子句</td><td>1. 对查询结果进行分组前，将不符合 where 条件的行去掉，即在分组之前过滤数据，即先过滤 再分组。<br> 2. where 后的条件不可以使用聚合函数<br>3. where子句必须出现在group by前面</td></tr><tr><td>having子句</td><td>1. having 子句的作用是筛选满足条件的组，即在分组之后过滤数据，即先分组再过滤。<br>2. having 后的条件可以使用聚合函数<br>3. having子句只能出现在group by后面的</td></tr></tbody></table><p><strong>面试题</strong></p><p><img src="https://gitee.com/jasonM4A1/pictureHost/raw/master/20201119054405.png"></p><p>执行如下 SQL 语句<code>select product,sum(price) from orders group by product where sum(price) &gt; 30;</code>，运行结果是？</p><p><strong>答案</strong></p><p>运行有误，group by 后面不能出现 where，应使用 having</p><p><strong>准备数据</strong></p><p>往之前的students表中继续加入数据，以便下面学习使用。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students (id, name, age, sex, address, math, english) <span class="keyword">values</span> </span><br><span class="line">(<span class="number">9</span>,<span class="string">'唐僧'</span>,<span class="number">25</span>,<span class="string">'男'</span>,<span class="string">'长安'</span>,<span class="number">87</span>,<span class="number">78</span>), (<span class="number">10</span>,<span class="string">'孙悟空'</span>,<span class="number">18</span>,<span class="string">'男'</span>,<span class="string">'花果山'</span>,<span class="number">100</span>,<span class="number">66</span>), </span><br><span class="line">(<span class="number">11</span>,<span class="string">'猪八戒'</span>,<span class="number">22</span>,<span class="string">'男'</span>,<span class="string">'高老庄'</span>,<span class="number">58</span>,<span class="number">78</span>), (<span class="number">12</span>,<span class="string">'沙僧'</span>,<span class="number">50</span>,<span class="string">'男'</span>,<span class="string">'流沙河'</span>,<span class="number">77</span>,<span class="number">88</span>), </span><br><span class="line">(<span class="number">13</span>,<span class="string">'白骨精'</span>,<span class="number">22</span>,<span class="string">'女'</span>,<span class="string">'白虎岭'</span>,<span class="number">66</span>,<span class="number">66</span>), (<span class="number">14</span>,<span class="string">'蜘蛛精'</span>,<span class="number">23</span>,<span class="string">'女'</span>,<span class="string">'盘丝洞'</span>,<span class="number">88</span>,<span class="number">88</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="截取查询"><a href="#截取查询" class="headerlink" title="截取查询"></a>截取查询</h2><p><code>LIMIT</code>是限制的意思，所以<code>LIMIT</code>的作用就是限制查询记录的条数。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 列名 [<span class="keyword">as</span> 别名] <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span>子句] [<span class="keyword">group</span> <span class="keyword">by</span>子句] [<span class="keyword">HAVING</span>子句] [<span class="keyword">ORDER</span> <span class="keyword">BY</span>子句] LIMIT <span class="keyword">offset</span>, length; </span><br><span class="line"><span class="comment">-- offset：起始行数，从 0 开始计数，如果省略，默认就是 0;  length：返回的行数</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>类似百度页面的分页公式：<code>开始的索引</code></p></blockquote><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询学生表中数据，从第 3 条开始显示，显示 6 条。</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students limit <span class="number">2</span>, <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询学生表中前5条数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students limit <span class="number">5</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="查询顺序"><a href="#查询顺序" class="headerlink" title="查询顺序"></a>查询顺序</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">字段列表</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">表名列表</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">条件列表</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">分组字段</span><br><span class="line"><span class="keyword">HAVING</span></span><br><span class="line">分组后条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">排序</span><br><span class="line">LIMIT</span><br><span class="line">分页限定</span><br></pre></td></tr></tbody></table></figure><h2 id="数据库备份和还原"><a href="#数据库备份和还原" class="headerlink" title="数据库备份和还原"></a>数据库备份和还原</h2><h3 id="备份的应用场景"><a href="#备份的应用场景" class="headerlink" title="备份的应用场景"></a>备份的应用场景</h3><p>在服务器进行数据传输、数据存储和数据交换，就有可能产生数据故障。比如发生意外停机或存储介质损坏。 这时，如果没有采取数据备份和数据恢复手段与措施，就会导致数据的丢失，造成的损失是无法弥补与估量的。</p><h3 id="备份与还原的语句"><a href="#备份与还原的语句" class="headerlink" title="备份与还原的语句"></a>备份与还原的语句</h3><ul><li><p>备份格式：（DOS 下，未登录的时候）</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u用户名 -p密码 数据库名 &gt; 文件路径</span><br></pre></td></tr></tbody></table></figure></li><li><p>还原格式：（mysql 中的命令，需要登录后才可以操作）</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库;</span><br><span class="line">SOURCE 导入文件的路径;</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>代码演示</strong></p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 备份数据库liboshuai中的数据到 d:/one.sql 文件中</span></span><br><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p密码 liboshuai <span class="operator">&gt;</span> d:<span class="operator">/</span>one.sql</span><br><span class="line"><span class="comment">-- 导出结果：数据库中的所有表和数据都会导出成 SQL 语句</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 还原 liboshuai 数据库中的数据 (还原的时候需要先登录 MySQL,并选中对应的数据库)</span></span><br><span class="line">source d:<span class="operator">/</span>one.sql;</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MySQL-DQL语句&quot;&gt;&lt;a href=&quot;#MySQL-DQL语句&quot; class=&quot;headerlink&quot; title=&quot;MySQL-DQL语句&quot;&gt;&lt;/a&gt;MySQL-DQL语句&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;查询不会对数据库中的数据进行修改.只是一种</summary>
      
    
    
    
    <category term="MySQL" scheme="http://example.com/categories/MySQL/"/>
    
    <category term="复习" scheme="http://example.com/categories/MySQL/%E5%A4%8D%E4%B9%A0/"/>
    
    
    <category term="MySQL" scheme="http://example.com/tags/MySQL/"/>
    
    <category term="数据库" scheme="http://example.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
</feed>
